<!DOCTYPE html>
<html lang="en" class="">
<head>
  <title>Get TikTok Account Location Finder | Full Profile Details</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <meta name="description" content="Our TikTok Location Finder helps you discover TikTok account locations by username. Get full profile details, Free, accurate, and easy to use!">
  <meta name="keywords" content="TikTok location finder, ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπ ÿ™ŸäŸÉ ÿ™ŸàŸÉ, ŸÖÿπÿ±ŸÅÿ© ÿ≠ÿ≥ÿßÿ® ÿ™ŸäŸÉ ÿ™ŸàŸÉ  ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπ ÿ≠ÿ≥ÿßÿ® ÿ™ŸäŸÉÿ™ŸàŸÉ, Find TikTok Influencers by Location, Tiktok Location Scraper, ÿ®Ÿàÿ™ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿ™ŸäŸÉ ÿ™ŸàŸÉ, ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿ≠ÿ≥ÿßÿ®Ÿä ÿπŸÑŸâ ÿ™ŸäŸÉ ÿ™ŸàŸÉÿü, ŸÉŸäŸÅ ÿ™ÿπÿ±ŸÅ ÿµÿßÿ≠ÿ® ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸäŸÉ ÿ™ŸàŸÉÿü, ŸÉŸäŸÅŸäÿ© ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ≠ÿ≥ÿßÿ® TikTokÿü, How do I find local TikTok users, How do I find a specific TikTok user, How do I look up an account on TikTok, Find TikTok User ID, Free Tiktok search tool, TikTok User Search Tool, account statistics for any TikTok user, tiktok profile lookup, tiktok lookup, tiktok account search, find TikTok user location, TikTok account location, TikTok username location, FAQ TikTok tool, About TikTok location tool, TikTok geolocation, TikTok user location search, Locate TikTok account by username, TikTok profile location, Free TikTok location finder, How to find TikTok user location, TikTok account details, TikTok stats checker">
  <meta name="author" content="@mo.or__">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tikip.us/"/>

  <meta property="og:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta property="og:description" content="Use our free TikTok Location Finder to get full profile details, including location, by username. Learn more about the tool and find answers in our FAQ.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tikip.us">
  <meta property="og:image" content="https://tikip.us/favicon.png">
  <meta property="og:site_name" content="TikTok Location Finder">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@mo.or__">
  <meta name="twitter:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta name="twitter:description" content="Free tool to find TikTok user locations and full profile details by username. Check out our FAQ and learn more about how it works.">
  <meta name="twitter:image" content="https://tikip.us/favicon.png">
  <meta content="Global" name="distribution"/>
  <meta content="General" name="rating"/>
  <meta content="en" http-equiv="content-language"/>
  <meta content="Turkey" name="geo.country"/>
  <meta content="en_US" property="og:locale"/>
  <meta content="en_UK" property="og:locale:alternate"/>
  <meta content="Turkey" name="geo.placename"/>

  <!-- Google Fonts and Tailwind CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="/favicon.png" type="image/png">
  
  <!-- Scripts -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HTPQL6DM82"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HTPQL6DM82');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6346556035067219" crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="B3Dexm1A96g9Vj5uQ3LjOOsA-RxFqSwca_G0LrOchB0" />
  <meta name="monetag" content="caa90b8bc2e2b44cb2ca5427c3072138">
  
  <!-- API Config (ensure this file exists or functionality will break) -->
  <script src="api_config.js"></script>

  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "TikTok Account Location Finder & FAQ",
    "url": "https://tikip.us/",
    "description": "A free online tool to find TikTok account locations and full profile details by username. Includes an FAQ section for common questions.",
    "creator": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://tikip.us/?username={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "TikTok Account Location Finder",
    "applicationCategory": "SocialNetworkAnalysisTool",
    "operatingSystem": "Web",
    "browserRequirements": "Requires a modern web browser with JavaScript enabled.",
    "description": "Free web-based tool to retrieve public TikTok user profile details, including estimated location, bio, follower counts, and video statistics by username. Learn more about the tool and see our FAQ.",
    "url": "https://tikip.us/",
    "author": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <style>
    /* Custom Styles for 3D effect and aesthetics */
    :root {
        --bg-light: #f0f2f5;
        --bg-dark: #111827;
        --card-light: rgba(255, 255, 255, 0.5);
        --card-dark: rgba(23, 30, 48, 0.5);
        --border-light: rgba(255, 255, 255, 0.8);
        --border-dark: rgba(255, 255, 255, 0.1);
        --shadow-light: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        --shadow-dark: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        --text-light: #1f2937;
        --text-dark: #e5e7eb;
        --text-secondary-light: #4b5563;
        --text-secondary-dark: #9ca3af;
    }

    html.dark {
        --bg: var(--bg-dark);
        --card-bg: var(--card-dark);
        --border-color: var(--border-dark);
        --shadow-color: var(--shadow-dark);
        --text-primary: var(--text-dark);
        --text-secondary: var(--text-secondary-dark);
    }
    html:not(.dark) {
        --bg: var(--bg-light);
        --card-bg: var(--card-light);
        --border-color: var(--border-light);
        --shadow-color: var(--shadow-light);
        --text-primary: var(--text-light);
        --text-secondary: var(--text-secondary-light);
    }

    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg);
        color: var(--text-primary);
        transition: background-color 0.3s ease;
        overflow-x: hidden;
    }

    .glass-card {
        background: var(--card-bg);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius: 1.5rem; /* 24px */
        border: 1px solid var(--border-color);
        box-shadow: var(--shadow-color);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        transform-style: preserve-3d;
    }
    
    .glass-card:hover {
        transform: translateY(-5px) rotateX(2deg) scale(1.01);
        box-shadow: 0 16px 40px 0 rgba(31, 38, 135, 0.2);
    }
    html.dark .glass-card:hover {
        box-shadow: 0 16px 40px 0 rgba(0, 0, 0, 0.5);
    }

    .background-gradient {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-image: 
            radial-gradient(circle at 15% 15%, #00f2fe 0%, transparent 30%),
            radial-gradient(circle at 85% 85%, #ff0070 0%, transparent 30%),
            radial-gradient(circle at 90% 10%, #6200ea 0%, transparent 30%);
        opacity: 0.3;
        filter: blur(100px);
        transition: opacity 0.5s ease;
    }
    
    html.dark .background-gradient {
      opacity: 0.4;
    }
    
    .btn-3d {
        transform-style: preserve-3d;
        transition: all 0.15s ease-out;
    }
    .btn-3d:hover {
        transform: scale(1.05) translateZ(5px);
    }
    .btn-3d:active {
        transform: scale(0.98) translateZ(2px);
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .loading-spinner {
        animation: spin 1s linear infinite;
    }
  </style>

</head>
<body class="antialiased">

  <div class="background-gradient"></div>
  
  <div class="relative min-h-screen w-full flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8">
    
    <!-- Theme Toggle Button -->
    <button class="theme-toggle absolute top-4 right-4 z-10 p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700/50 transition-colors duration-200" id="themeToggle" aria-label="Toggle theme">
      <svg id="theme-icon-sun" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
      <svg id="theme-icon-moon" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
    </button>
  
    <div class="container w-full max-w-3xl mx-auto">
      <main>
        <!-- Main Search Page -->
        <div class="page-content active" id="main-page">
          <div class="glass-card p-6 sm:p-10 text-center">
            
            <div class="mb-4 text-xl sm:text-2xl font-bold" style="color: var(--text-secondary);">‚ùåüö¨ | üèã‚Äç‚ôÄÔ∏è‚úÖ</div>
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight" style="color: var(--text-primary);">
              TikTok Account <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-pink-500">Location Finder</span>
            </h1>
            <div class="mt-2 mb-8 text-sm" style="color: var(--text-secondary);">Created by <a href="https://www.tiktok.com/@mo.or__" target="_blank" rel="noopener" class="font-semibold text-cyan-500 hover:text-pink-500 transition-colors">@_moro.__</a></div>

            <section aria-labelledby="search-tool-heading" class="max-w-xl mx-auto">
              <h2 id="search-tool-heading" class="sr-only">TikTok Profile Search Tool</h2>
              <div class="relative">
                <input type="text" id="username" placeholder="Enter TikTok username (without @)" required aria-label="TikTok Username Input" class="w-full pl-5 pr-12 py-4 text-base rounded-full bg-white/20 dark:bg-black/20 border border-gray-300 dark:border-gray-600/50 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 outline-none transition-all duration-300 shadow-inner" style="color: var(--text-primary);">
              </div>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
                <button id="getResultsBtn" aria-label="Search TikTok profile" class="btn-3d w-full py-4 text-base font-bold text-white rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-400 hover:to-blue-400 shadow-lg">Get Profile Details</button>
                <button id="supportBtn" aria-label="Support the creator" class="btn-3d w-full py-4 text-base font-bold text-white rounded-full bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-400 hover:to-red-400 shadow-lg">Support Our Work ‚ù§</button>
              </div>
            </section>
          </div>
          
          <div id="result" class="mt-8" aria-live="polite"></div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
            <article class="glass-card p-6" aria-labelledby="about-tool-heading">
                <h2 id="about-tool-heading" class="text-xl font-bold mb-3" style="color: var(--text-primary);">About This Tool</h2>
                <p style="color: var(--text-secondary);">This <strong>TikTok Location Finder</strong> is a free tool designed to help you retrieve complete public TikTok user profiles. With our <strong>TikTok profile lookup</strong> service, you can easily <strong>find TikTok user location</strong> information, along with other <strong>TikTok account details</strong>.</p>
            </article>

            <article class="glass-card p-6" aria-labelledby="faq-heading">
                <h2 id="faq-heading" class="text-xl font-bold mb-3" style="color: var(--text-primary);">FAQ</h2>
                <p style="color: var(--text-secondary);"><strong>How does it work?</strong> Our tool fetches publicly available TikTok profile information using the username you provide. This includes data such as their display name, bio, follower counts, and an estimated country or region.</p>
            </article>

             <article class="glass-card p-6" aria-labelledby="about-creator-heading">
                <h2 id="about-creator-heading" class="text-xl font-bold mb-3" style="color: var(--text-primary);">About the Creator</h2>
                <p style="color: var(--text-secondary);">I'm Moor, a Graphic Designer & Web Developer with 4+ years of experience. Reach out on <a href="https://www.tiktok.com/@mo.or__" class="font-semibold text-cyan-500 hover:text-pink-500 transition-colors" target="_blank" rel="noopener">TikTok</a>!</p>
            </article>

            <article class="glass-card p-6" aria-labelledby="get-involved-heading">
                <h2 id="get-involved-heading" class="text-xl font-bold mb-3" style="color: var(--text-primary);">Get Involved</h2>
                <p style="color: var(--text-secondary);">Enjoy this tool? <a href="https://ko-fi.com/moroccan" class="font-semibold text-cyan-500 hover:text-pink-500 transition-colors" target="_blank" rel="noopener">Support on Ko-fi</a> or <a href="https://www.tiktok.com/@mo.or__" class="font-semibold text-cyan-500 hover:text-pink-500 transition-colors" target="_blank" rel="noopener">Follow on TikTok</a>.</p>
            </article>
            
            <article class="glass-card p-6 md:col-span-2" aria-labelledby="disclaimer-heading">
                <h2 id="disclaimer-heading" class="text-xl font-bold mb-3" style="color: var(--text-primary);">Disclaimer</h2>
                <p style="color: var(--text-secondary);">For educational use only. Respect user privacy and use responsibly. Data is sourced publicly and may not be 100% accurate.</p>
            </article>
          </div>
        </div>

        <!-- Other Pages (Contact, About, etc.) -->
        <section class="page-content hidden glass-card p-6 sm:p-10" id="contact-page" aria-labelledby="contact-page-heading">
          <!-- Contact Content Here -->
        </section>
        <section class="page-content hidden glass-card p-6 sm:p-10" id="about-page" aria-labelledby="about-us-page-heading">
          <!-- About Us Content Here -->
        </section>
        <section class="page-content hidden glass-card p-6 sm:p-10" id="privacy-page" aria-labelledby="privacy-policy-page-heading">
            <!-- Privacy Policy Content Here -->
        </section>
        <section class="page-content hidden glass-card p-6 sm:p-10" id="terms-page" aria-labelledby="terms-of-service-page-heading">
          <!-- Terms Content Here -->
        </section>

      </main>

      <footer class="footer mt-12 text-center py-6">
        <nav class="footer-nav flex flex-wrap justify-center gap-x-6 gap-y-2" aria-label="Footer navigation">
          <a href="#" onclick="showPage('main-page'); return false;" class="text-sm font-medium hover:text-cyan-400 transition-colors" style="color: var(--text-secondary);">Home</a>
          <a href="#" onclick="showPage('about-page'); return false;" class="text-sm font-medium hover:text-cyan-400 transition-colors" style="color: var(--text-secondary);">About Us</a>
          <a href="#" onclick="showPage('contact-page'); return false;" class="text-sm font-medium hover:text-cyan-400 transition-colors" style="color: var(--text-secondary);">Contact</a>
          <a href="#" onclick="showPage('privacy-page'); return false;" class="text-sm font-medium hover:text-cyan-400 transition-colors" style="color: var(--text-secondary);">Privacy</a>
          <a href="#" onclick="showPage('terms-page'); return false;" class="text-sm font-medium hover:text-cyan-400 transition-colors" style="color: var(--text-secondary);">Terms</a>
        </nav>
      </footer>
    </div>
  </div>

  <script>
    // ===== THEME TOGGLE FUNCTIONALITY ===== //
    const themeToggle = document.getElementById('themeToggle');
    const sunIcon = document.getElementById('theme-icon-sun');
    const moonIcon = document.getElementById('theme-icon-moon');
    const htmlEl = document.documentElement;

    // Set initial theme based on localStorage or system preference
    const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    htmlEl.classList.toggle('dark', currentTheme === 'dark');
    sunIcon.classList.toggle('hidden', currentTheme === 'dark');
    moonIcon.classList.toggle('hidden', currentTheme !== 'dark');

    themeToggle.addEventListener('click', () => {
        htmlEl.classList.toggle('dark');
        const isDark = htmlEl.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        sunIcon.classList.toggle('hidden', isDark);
        moonIcon.classList.toggle('hidden', !isDark);
    });
    
    // ===== DYNAMIC CONTENT (Profile Card, etc) LOGIC ===== //
    // NOTE: The rest of the JavaScript logic from the original file remains largely the same.
    // The key change is in the `formattedData` string within the `lookupUser` function.

    const baseTitle = "TikTok Account Location Finder | Full Profile Details & FAQ";

    function showPage(pageId) {
      document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active', 'block') || page.classList.add('hidden'));
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add('active', 'block');
        targetPage.classList.remove('hidden');
        const pageTitleElement = targetPage.querySelector('h1');
        document.title = (pageTitleElement && pageId !== 'main-page') ? `${pageTitleElement.textContent} | TikTok Account Location Finder` : baseTitle;
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Country flag mapping remains the same...
    function getCountryFlag(country) {
      const flagMap = {'AD': 'üá¶üá©', 'AE': 'ÔøΩüá™', 'AF': 'üá¶üá´', 'AG': 'üá¶üá¨', 'AI': 'üá¶üáÆ', 'AL': 'üá¶üá±', 'AM': 'üá¶üá≤', 'AO': 'üá¶üá¥', 'AQ': 'üá¶üá∂', 'AR': 'üá¶üá∑', 'AS': 'üá¶üá∏', 'AT': 'üá¶üáπ', 'AU': 'üá¶üá∫', 'AW': 'üá¶üáº', 'AX': 'üá¶üáΩ', 'AZ': 'üá¶üáø', 'BA': 'üáßüá¶', 'BB': 'üáßüáß', 'BD': 'üáßüá©', 'BE': 'üáßüá™', 'BF': 'üáßüá´', 'BG': 'üáßüá¨', 'BH': 'üáßüá≠', 'BI': 'üáßüáÆ', 'BJ': 'üáßüáØ', 'BL': 'üáßüá±', 'BM': 'üáßüá≤', 'BN': 'üáßüá≥', 'BO': 'üáßüá¥', 'BQ': 'üáßüá∂', 'BR': 'üáßüá∑', 'BS': 'üáßüá∏', 'BT': 'üáßüáπ', 'BV': 'üáßüáª', 'BW': 'üáßüáº', 'BY': 'üáßüáæ', 'BZ': 'üáßüáø', 'CA': 'üá®üá¶', 'CC': 'üá®üá®', 'CD': 'üá®üá©', 'CF': 'üá®üá´', 'CG': 'üá®üá¨', 'CH': 'üá®üá≠', 'CI': 'üá®üáÆ', 'CK': 'üá®üá∞', 'CL': 'üá®üá±', 'CM': 'üá®üá≤', 'CN': 'üá®üá≥', 'CO': 'üá®üá¥', 'CR': 'üá®üá∑', 'CU': 'üá®üá∫', 'CV': 'üá®üáª', 'CW': 'üá®üáº', 'CX': 'üá®üáΩ', 'CY': 'üá®üáæ', 'CZ': 'üá®üáø', 'DE': 'üá©üá™', 'DJ': 'üá©üáØ', 'DK': 'üá©üá∞', 'DM': 'üá©üá≤', 'DO': 'üá©üá¥', 'DZ': 'üá©üáø', 'EC': 'üá™üá®', 'EE': 'üá™üá™', 'EG': 'üá™üá¨', 'EH': 'üá™üá≠', 'ER': 'üá™üá∑', 'ES': 'üá™üá∏', 'ET': 'üá™üáπ', 'FI': 'üá´üáÆ', 'FJ': 'üá´üáØ', 'FK': 'üá´üá∞', 'FM': 'üá´üá≤', 'FO': 'üá´üá¥', 'FR': 'üá´üá∑', 'GA': 'üá¨üá¶', 'GB': 'üá¨üáß', 'UK': 'üá¨üáß', 'GD': 'üá¨üá©', 'GE': 'üá¨üá™', 'GF': 'üá¨üá´', 'GG': 'üá¨üá¨', 'GH': 'üá¨üá≠', 'GI': 'üá¨üáÆ', 'GL': 'üá¨üá±', 'GM': 'üá¨üá≤', 'GN': 'üá¨üá≥', 'GP': 'üá¨üáµ', 'GQ': 'üá¨üá∂', 'GR': 'üá¨üá∑', 'GS': 'üá¨üá∏', 'GT': 'üá¨üáπ', 'GU': 'üá¨üá∫', 'GW': 'üá¨üáº', 'GY': 'üá¨üáæ', 'HK': 'üá≠üá∞', 'HM': 'üá≠üá≤', 'HN': 'üá≠üá≥', 'HR': 'üá≠üá∑', 'HT': 'üá≠üáπ', 'HU': 'üá≠üá∫', 'ID': 'üáÆüá©', 'IE': 'üáÆüá™', 'IL': 'üáÆüá±', 'IM': 'üáÆüá≤', 'IN': 'üáÆüá≥', 'IO': 'üáÆüá¥', 'IQ': 'üáÆüá∂', 'IR': 'üáÆüá∑', 'IS': 'üáÆüá∏', 'IT': 'üáÆüáπ', 'JE': 'üáØüá™', 'JM': 'üáØüá≤', 'JO': 'üáØüá¥', 'JP': 'üáØüáµ', 'KE': 'üá∞üá™', 'KG': 'üá∞üá¨', 'KH': 'üá∞üá≠', 'KI': 'üá∞üáÆ', 'KM': 'üá∞üá≤', 'KN': 'üá∞üá≥', 'KP': 'üá∞üáµ', 'KR': 'üá∞üá∑', 'KW': 'üá∞üáº', 'KY': 'üá∞üáæ', 'KZ': 'üá∞üáø', 'LA': 'üá±üá¶', 'LB': 'üá±üáß', 'LC': 'üá±üá®', 'LI': 'üá±üáÆ', 'LK': 'üá±üá∞', 'LR': 'üá±üá∑', 'LS': 'üá±üá∏', 'LT': 'üá±üáπ', 'LU': 'üá±üá∫', 'LV': 'üá±üáª', 'LY': 'üá±üáæ', 'MA': 'üá≤üá¶', 'MC': 'üá≤üá®', 'MD': 'üá≤üá©', 'ME': 'üá≤üá™', 'MF': 'üá≤üá´', 'MG': 'üá≤üá¨', 'MH': 'üá≤üá≠', 'MK': 'üá≤üá∞', 'ML': 'üá≤üá±', 'MM': 'üá≤üá≤', 'MN': 'üá≤üá≥', 'MO': 'üá≤üá¥', 'MP': 'üá≤üáµ', 'MQ': 'üá≤üá∂', 'MR': 'üá≤üá∑', 'MS': 'üá≤üá∏', 'MT': 'üá≤üáπ', 'MU': 'üá≤üá∫', 'MV': 'üá≤üáª', 'MW': 'üá≤üáº', 'MX': 'üá≤üáΩ', 'MY': 'üá≤üáæ', 'MZ': 'üá≤üáø', 'NA': 'üá≥üá¶', 'NC': 'üá≥üá®', 'NE': 'üá≥üá™', 'NF': 'üá≥üá´', 'NG': 'üá≥üá¨', 'NI': 'üá≥üáÆ', 'NL': 'üá≥üá±', 'NO': 'üá≥üá¥', 'NP': 'üá≥üáµ', 'NR': 'üá≥üá∑', 'NU': 'üá≥üá∫', 'NZ': 'üá≥üáø', 'OM': 'üá¥üá≤', 'PA': 'üáµüá¶', 'PE': 'üáµüá™', 'PF': 'üáµüá´', 'PG': 'üáµüá¨', 'PH': 'üáµüá≠', 'PK': 'üáµüá∞', 'PL': 'üáµüá±', 'PM': 'üáµüá≤', 'PN': 'üáµüá≥', 'PR': 'üáµüá∑', 'PS': 'üáµüá∏', 'PT': 'üáµüáπ', 'PW': 'üáµüáº', 'PY': 'üáµüáæ', 'QA': 'üá∂üá¶', 'RE': 'üá∑üá™', 'RO': 'üá∑üá¥', 'RS': 'üá∑üá∏', 'RU': 'üá∑üá∫', 'Russia': 'üá∑üá∫', 'RW': 'üá∑üáº', 'SA': 'üá∏üá¶', 'SB': 'üá∏üáß', 'SC': 'üá∏üá®', 'SD': 'üá∏üá©', 'SE': 'üá∏üá™', 'SG': 'üá∏üá¨', 'SH': 'üá∏üá≠', 'SI': 'üá∏üáÆ', 'SJ': 'üá∏üáØ', 'SK': 'üá∏üá∞', 'SL': 'üá∏üá±', 'SM': 'üá∏üá≤', 'SN': 'üá∏üá≥', 'SO': 'üá∏üá¥', 'SR': 'üá∏üá∑', 'SS': 'üá∏üá∏', 'ST': 'üá∏üáπ', 'SV': 'üá∏üáª', 'SX': 'üá∏üáΩ', 'SY': 'üá∏üáæ', 'SZ': 'üá∏üáø', 'TC': 'üáπüá®', 'TD': 'üáπüá©', 'TF': 'üáπüá´', 'TG': 'üáπüá¨', 'TH': 'üáπüá≠', 'TJ': 'üáπüáØ', 'TK': 'üáπüá∞', 'TL': 'üáπüá±', 'TM': 'üáπüá≤', 'TN': 'üáπüá≥', 'TO': 'üáπüá¥', 'TR': 'üáπüá∑', 'TT': 'üáπüáπ', 'TV': 'üáπüáª', 'TW': 'üáπüáº', 'TZ': 'üáπüáø', 'UA': 'üá∫üá¶', 'UG': 'üá∫üá¨', 'UM': 'üá∫üá≤', 'US': 'üá∫üá∏', 'USA': 'üá∫üá∏', 'UY': 'üá∫üáæ', 'UZ': 'üá∫üáø', 'VA': 'üáªüá¶', 'VC': 'üáªüá®', 'VE': 'üáªüá™', 'VG': 'üáªüá¨', 'VI': 'üáªüáÆ', 'VN': 'üáªüá≥', 'VU': 'üáªüá∫', 'WF': 'üáºüá´', 'WS': 'üáºüá∏', 'XK': 'üáΩüá∞', 'YE': 'üáæüá™', 'YT': 'üáæüáπ', 'ZA': 'üáøüá¶', 'ZM': 'üáøüá≤', 'ZW': 'üáøüáº'};
      if (!country) return 'üåê';
      const normalizedCountry = String(country).trim();
      for (const key in flagMap) {
        if (key.toLowerCase() === normalizedCountry.toLowerCase()) return flagMap[key];
      }
      return 'üåê';
    }


    const getResultsBtn = document.getElementById('getResultsBtn');
    const supportBtn = document.getElementById('supportBtn');
    const usernameInputGlobal = document.getElementById('username');

    if (getResultsBtn) getResultsBtn.addEventListener('click', lookupUser);
    if (supportBtn) supportBtn.addEventListener('click', () => window.open('https://ko-fi.com/moroccan', '_blank'));
    if (usernameInputGlobal) {
      usernameInputGlobal.addEventListener('keypress', e => {
        if (e.key === 'Enter') {
          e.preventDefault();
          lookupUser();
        }
      });
    }

    function createMessage(text, type = 'error') {
        const bgColor = type === 'success' ? 'bg-green-500/80' : 'bg-red-500/80';
        return `<div class="glass-card p-4 text-center ${bgColor} text-white font-semibold">${text}</div>`;
    }
    
    function lookupUser() {
      const resultDiv = document.getElementById('result');
      const username = usernameInputGlobal ? usernameInputGlobal.value.trim() : '';

      if (!username) {
        if(resultDiv) resultDiv.innerHTML = createMessage('Please enter a valid TikTok username.');
        return;
      }

      if (typeof API_CONFIG === 'undefined' || typeof getApiUrl === 'undefined') {
        if(resultDiv) resultDiv.innerHTML = createMessage('API configuration error. Please contact support.');
        return;
      }

      getResultsBtn.disabled = true;
      getResultsBtn.innerHTML = `<svg class="loading-spinner h-5 w-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>`;

      const apiUrl = getApiUrl(username);
      if (!apiUrl) {
        if(resultDiv) resultDiv.innerHTML = createMessage('Could not construct API URL.');
        getResultsBtn.disabled = false;
        getResultsBtn.innerText = 'Get Profile Details';
        return;
      }

      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            return response.text().then(text => {
                let errorMsg = `API Error: Status ${response.status}`;
                if (response.status === 429) errorMsg = 'Rate limit exceeded. Try again later.';
                else if (response.status === 404) errorMsg = 'User not found or API endpoint issue.';
                else { try { const d = JSON.parse(text); errorMsg = d.message || d.error || text; } catch (e) { errorMsg = text || errorMsg; }}
                throw new Error(errorMsg);
            });
          }
          return response.json();
        })
        .then(data => {
          const apiProfile = data.profile || data;

          if (apiProfile && typeof apiProfile === 'object' && Object.keys(apiProfile).length > 0) {
            const sanitize = str => (typeof str !== 'string') ? (str ?? '') : str.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            
            // --- UPDATED PROFILE CARD HTML with Tailwind CSS ---
            let foundProfilePhotoUrl = '';
            const avatarKeys = ['Profile Photo', 'Avatar URL', 'avatar_url', 'avatarUrl', 'picture', 'profileImageUrl', 'profile_pic_url', 'profile_image_url', 'avatar', 'Avatar', 'profile_picture', 'photo_url', 'user_avatar'];
            for (const key of avatarKeys) {
                if (apiProfile[key] && typeof apiProfile[key] === 'string' && apiProfile[key].trim() !== '') {
                    foundProfilePhotoUrl = apiProfile[key];
                    break;
                }
            }
            const profilePhoto = sanitize(foundProfilePhotoUrl);
            
            let rawUsernameFromAPI = apiProfile.Username || apiProfile.username || apiProfile.user_name || apiProfile.unique_id || username;
            if (typeof rawUsernameFromAPI === 'string' && rawUsernameFromAPI.startsWith('@')) {
                rawUsernameFromAPI = rawUsernameFromAPI.substring(1);
            }
            const displayUsername = sanitize(rawUsernameFromAPI);
            const displayNickname = sanitize(apiProfile.Nickname || apiProfile.nickname || apiProfile.name || apiProfile.display_name || apiProfile.user_display_name || displayUsername);

            let profileDetailsHtml = '<div class="space-y-4">';
            
            for (const key in apiProfile) {
                if (Object.hasOwnProperty.call(apiProfile, key)) {
                    if (['Nickname','nickname','Username','username','name','display_name','user_name','unique_id','user_display_name', 'Sec U I D', 'Username Last Modified', ...avatarKeys].includes(key) || apiProfile[key] == null || String(apiProfile[key]).trim() === '') continue;
                    
                    let value = apiProfile[key];
                    let displayKey = key.replace(/([A-Z])/g, ' $1').replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()).trim();
                    
                    let valueHtml;
                    if (['Bio', 'bio', 'description', 'Signature', 'bio_text', 'user_bio'].includes(key)) {
                        valueHtml = `<p class="text-sm text-left whitespace-pre-wrap">${sanitize(String(value)).replace(/\n/g, '<br>') || 'N/A'}</p>`;
                        displayKey = 'Bio'; // Standardize the key display
                        profileDetailsHtml += `<div class="pt-4 border-t border-white/10 dark:border-black/20"><span class="font-semibold" style="color: var(--text-primary);">${displayKey}:</span>${valueHtml}</div>`;
                        continue;
                    } else if (['Country', 'country', 'region', 'Location', 'country_code', 'user_region'].includes(key)) {
                        valueHtml = `${getCountryFlag(value)} ${sanitize(String(value)) || 'N/A'}`;
                    } else if (typeof value === 'number') {
                        valueHtml = Number(value).toLocaleString();
                    } else if (typeof value === 'boolean') {
                        valueHtml = value ? 'Yes' : 'No';
                    } else if (typeof value === 'string' && value.startsWith('http')) {
                        valueHtml = `<a href="${sanitize(value)}" target="_blank" rel="noopener" class="text-cyan-400 hover:underline break-all">${sanitize(value)}</a>`;
                    } else {
                        valueHtml = sanitize(String(value)) || 'N/A';
                    }
                    
                    profileDetailsHtml += `<div class="flex justify-between items-start gap-4"><span class="font-semibold text-sm" style="color: var(--text-secondary);">${displayKey}:</span><span class="text-right text-sm font-medium" style="color: var(--text-primary);">${valueHtml}</span></div>`;
                }
            }
            profileDetailsHtml += '</div>';

            const formattedData = `
              <article class="glass-card p-6" aria-labelledby="profile-card-heading-${displayUsername}">
                <div class="flex flex-col sm:flex-row items-center gap-6">
                   <div class="relative flex-shrink-0">
                      <img src="${profilePhoto}" alt="Profile photo of ${displayNickname}" class="h-24 w-24 rounded-full object-cover border-4 border-white/50 dark:border-black/50 shadow-lg" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                      <div class="h-24 w-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center" style="display:none;">
                        <svg class="h-12 w-12 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.998a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                      </div>
                    </div>
                    <div class="text-center sm:text-left">
                        <h3 class="text-2xl font-bold" style="color: var(--text-primary);">${displayNickname}</h3>
                        <p class="text-md font-mono" style="color: var(--text-secondary);">${displayUsername.startsWith('@') ? displayUsername : '@' + displayUsername}</p>
                    </div>
                </div>
                <div class="my-6 h-px bg-white/10 dark:bg-black/20"></div>
                ${profileDetailsHtml}
              </article>`;

            if(resultDiv) resultDiv.innerHTML = formattedData;
          } else {
            if(resultDiv) resultDiv.innerHTML = createMessage(`Profile data not found or is incomplete for '${sanitize(username)}'.`);
          }
        })
        .catch(error => {
          if(resultDiv) resultDiv.innerHTML = createMessage(`Error: ${error.message || 'Failed to fetch profile data'}.`);
        })
        .finally(() => {
          getResultsBtn.disabled = false;
          getResultsBtn.innerText = 'Get Profile Details';
        });
    }

  </script>
</body>
</html>
