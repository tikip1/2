<!DOCTYPE html>
<html lang="en">
<head>
  <title>Get TikTok Account Location Finder | Full Profile Details</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <meta name="description" content="Our TikTok Location Finder helps you discover TikTok account locations by username. Get full profile details, Free, accurate, and easy to use!">
  <meta name="keywords" content="TikTok location finder, ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπ ÿ™ŸäŸÉ ÿ™ŸàŸÉ, ŸÖÿπÿ±ŸÅÿ© ÿ≠ÿ≥ÿßÿ® ÿ™ŸäŸÉ ÿ™ŸàŸÉ  ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπ ÿ≠ÿ≥ÿßÿ® ÿ™ŸäŸÉÿ™ŸàŸÉ, Find TikTok Influencers by Location, Tiktok Location Scraper, ÿ®Ÿàÿ™ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿ™ŸäŸÉ ÿ™ŸàŸÉ, ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿ≠ÿ≥ÿßÿ®Ÿä ÿπŸÑŸâ ÿ™ŸäŸÉ ÿ™ŸàŸÉÿü, ŸÉŸäŸÅ ÿ™ÿπÿ±ŸÅ ÿµÿßÿ≠ÿ® ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸäŸÉ ÿ™ŸàŸÉÿü, ŸÉŸäŸÅŸäÿ© ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ≠ÿ≥ÿßÿ® TikTokÿü, How do I find local TikTok users, How do I find a specific TikTok user, How do I look up an account on TikTok, Find TikTok User ID, Free Tiktok search tool, TikTok User Search Tool, account statistics for any TikTok user, tiktok profile lookup, tiktok lookup, tiktok account search, find TikTok user location, TikTok account location, TikTok username location, FAQ TikTok tool, About TikTok location tool, TikTok geolocation, TikTok user location search, Locate TikTok account by username, TikTok profile location, Free TikTok location finder, How to find TikTok user location, TikTok account details, TikTok stats checker">
  <meta name="author" content="@mo.or__">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tikip.us/"/>

  <meta property="og:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta property="og:description" content="Use our free TikTok Location Finder to get full profile details, including location, by username. Learn more about the tool and find answers in our FAQ.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tikip.us">
  <meta property="og:image" content="https://tikip.us/favicon.png">
  <meta property="og:site_name" content="TikTok Location Finder">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@mo.or__">
  <meta name="twitter:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta name="twitter:description" content="Free tool to find TikTok user locations and full profile details by username. Check out our FAQ and learn more about how it works.">
  <meta name="twitter:image" content="https://tikip.us/favicon.png">
  <meta content="Global" name="distribution"/>
  <meta content="General" name="rating"/>
  <meta content="en" http-equiv="content-language"/>
  <meta content="Turkey" name="geo.country"/>
  <meta content="en_US" property="og:locale"/>
  <meta content="en_UK" property="og:locale:alternate"/>
  <meta content="Turkey" name="geo.placename"/>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HTPQL6DM82"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HTPQL6DM82');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6346556035067219"
     crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="B3Dexm1A96g9Vj5uQ3LjOOsA-RxFqSwca_G0LrOchB0" />
  <meta name="monetag" content="caa90b8bc2e2b44cb2ca5427c3072138">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="/favicon.png" type="image/png">

  <!-- Include the API configuration file BEFORE your main script -->
  <!-- Ensure 'api_config.js' is in the same directory as index.html, or adjust the path accordingly -->
  <script src="api_config.js"></script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "TikTok Account Location Finder & FAQ",
    "url": "https://tikip.us/",
    "description": "A free online tool to find TikTok account locations and full profile details by username. Includes an FAQ section for common questions.",
    "creator": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://tikip.us/?username={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "TikTok Account Location Finder",
    "applicationCategory": "SocialNetworkAnalysisTool",
    "operatingSystem": "Web",
    "browserRequirements": "Requires a modern web browser with JavaScript enabled.",
    "description": "Free web-based tool to retrieve public TikTok user profile details, including estimated location, bio, follower counts, and video statistics by username. Learn more about the tool and see our FAQ.",
    "url": "https://tikip.us/",
    "author": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <style>
    :root {
      --primary-color: #007AFF; /* Professional Blue */
      --primary-hover-color: #0056b3;
      --secondary-color: #6c757d; /* Muted Gray */
      --success-color: #28a745; /* Green for success messages */
      --danger-color: #dc3545; /* Red for error messages and support button */
      --danger-hover-color: #c82333;
      --light-bg: #F8F9FA;
      --dark-bg: #1A1A1A; /* Darker background for dark mode */
      --light-card-bg: #FFFFFF;
      --dark-card-bg: #242424; /* Slightly lighter card for dark mode */
      --light-text-color: #212529;
      --dark-text-color: #EAEAEA;
      --light-text-secondary: #6c757d;
      --dark-text-secondary: #A0A0A0;
      --light-border-color: #DEE2E6;
      --dark-border-color: #444444;
      --input-bg-light: #FFFFFF;
      --input-bg-dark: #2C2C2C;
      --font-family-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --box-shadow-sm: 0 .125rem .25rem rgba(0,0,0,.075);
      --box-shadow-md: 0 .5rem 1rem rgba(0,0,0,.1);
      --box-shadow-lg: 0 1rem 3rem rgba(0,0,0,.125);
      --border-radius: 0.5rem; /* Increased border radius for a softer look */
      --transition-speed: 0.2s;
    }

    /* Light Theme (Default) */
    body {
      background-color: var(--light-bg);
      color: var(--light-text-color);
    }
    .container {
      background-color: transparent; /* Container is just for centering */
    }
    .theme-toggle {
      background-color: var(--light-card-bg);
      border: 1px solid var(--light-border-color);
      box-shadow: var(--box-shadow-sm);
    }
    .theme-toggle svg { fill: var(--light-text-color); }
    .patriotic-text { color: var(--light-text-color); }
    h1 { color: var(--light-text-color); }
    .credit { color: var(--light-text-secondary); }
    .credit a { color: var(--primary-color); }
    input {
      background-color: var(--input-bg-light);
      border: 1px solid var(--light-border-color);
      color: var(--light-text-color);
      box-shadow: var(--box-shadow-sm);
    }
    input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm);
    }
    input::placeholder { color: var(--light-text-secondary); opacity: 0.7; }
    button {
      color: #FFFFFF;
      box-shadow: var(--box-shadow-sm);
      text-shadow: none;
    }
    #getResultsBtn { background: linear-gradient(145deg, var(--primary-color), var(--primary-hover-color)); }
    #getResultsBtn:hover, #getResultsBtn:focus { background: linear-gradient(145deg, var(--primary-hover-color), var(--primary-color)); box-shadow: var(--box-shadow-md); transform: translateY(-2px); }
    #supportBtn { background: linear-gradient(145deg, var(--danger-color), var(--danger-hover-color)); }
    #supportBtn:hover, #supportBtn:focus { background: linear-gradient(145deg, var(--danger-hover-color), var(--danger-color)); box-shadow: var(--box-shadow-md); transform: translateY(-2px); }
    .profile-card {
      background-color: var(--light-card-bg);
      border: 1px solid var(--light-border-color);
      box-shadow: var(--box-shadow-md);
    }
    .profile-card-header {
      background-color: var(--light-bg);
      border-bottom: 1px solid var(--light-border-color);
    }
    .profile-photo-enhanced { border-color: var(--primary-color); }
    .profile-photo-placeholder { background-color: var(--light-bg); border-color: var(--light-border-color); }
    .profile-photo-placeholder svg { fill: var(--light-text-secondary); }
    .profile-nickname { color: var(--light-text-color); }
    .profile-username-display { color: var(--light-text-secondary); }
    .profile-info-row { border-bottom: 1px solid var(--light-border-color); }
    .info-label { color: var(--light-text-secondary); }
    .info-value { color: var(--light-text-color); }
    .bio-row .info-value.bio-text { color: var(--light-text-secondary); }
    .profile-card-footer { background-color: var(--light-bg); border-top: 1px solid var(--light-border-color); }
    .message.success-message { color: var(--success-color); background-color: #e9f7ef; border: 1px solid var(--success-color); }
    .message.error-message { color: var(--danger-color); background-color: #fdecea; border: 1px solid var(--danger-color); }
    .loading-spinner { border-top-color: var(--primary-color); }
    .about-section, .page-content > .about-section, .footer {
      background-color: var(--light-card-bg);
      border: 1px solid var(--light-border-color);
      box-shadow: var(--box-shadow-md);
    }
    .page-content h1 { color: var(--primary-color); }
    .about-section h2 { color: var(--primary-color); }
    .about-section p { color: var(--light-text-secondary); }
    .dm-link { color: var(--primary-color); }
    .footer-nav a { color: var(--primary-color); }
    .footer-nav a:hover { color: var(--primary-hover-color); }
    .contact-form input, .contact-form textarea {
      background-color: var(--input-bg-light);
      border: 1px solid var(--light-border-color);
      color: var(--light-text-color);
      box-shadow: var(--box-shadow-sm);
    }
    .contact-form input:focus, .contact-form textarea:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm);
    }
    .contact-form button { background: linear-gradient(145deg, var(--primary-color), var(--primary-hover-color)); }
    .contact-form button:hover, .contact-form button:focus { background: linear-gradient(145deg, var(--primary-hover-color), var(--primary-color)); }
    .back-btn { background: linear-gradient(145deg, var(--secondary-color), #5a6268); }
    .back-btn:hover, .back-btn:focus { background: linear-gradient(145deg, #5a6268, var(--secondary-color)); }

    /* Dark Theme */
    :root[data-theme="dark"] body {
      background-color: var(--dark-bg);
      color: var(--dark-text-color);
    }
    :root[data-theme="dark"] .theme-toggle {
      background-color: var(--dark-card-bg);
      border: 1px solid var(--dark-border-color);
    }
    :root[data-theme="dark"] .theme-toggle svg { fill: var(--dark-text-color); }
    :root[data-theme="dark"] .patriotic-text { color: var(--dark-text-color); }
    :root[data-theme="dark"] h1 { color: var(--dark-text-color); }
    :root[data-theme="dark"] .credit { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .credit a { color: var(--primary-color); } /* Keep primary for links */
    :root[data-theme="dark"] input {
      background-color: var(--input-bg-dark);
      border: 1px solid var(--dark-border-color);
      color: var(--dark-text-color);
    }
    :root[data-theme="dark"] input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm);
    }
    :root[data-theme="dark"] input::placeholder { color: var(--dark-text-secondary); opacity: 0.7; }
    :root[data-theme="dark"] .profile-card {
      background-color: var(--dark-card-bg);
      border: 1px solid var(--dark-border-color);
    }
    :root[data-theme="dark"] .profile-card-header {
      background-color: var(--dark-bg); /* Darker header */
      border-bottom: 1px solid var(--dark-border-color);
    }
    :root[data-theme="dark"] .profile-photo-placeholder { background-color: var(--dark-bg); border-color: var(--dark-border-color); }
    :root[data-theme="dark"] .profile-photo-placeholder svg { fill: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-nickname { color: var(--dark-text-color); }
    :root[data-theme="dark"] .profile-username-display { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-info-row { border-bottom: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .info-label { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .info-value { color: var(--dark-text-color); }
    :root[data-theme="dark"] .bio-row .info-value.bio-text { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-card-footer { background-color: var(--dark-bg); border-top: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .message.success-message { color: #d4edda; background-color: #1c3c24; border: 1px solid var(--success-color); }
    :root[data-theme="dark"] .message.error-message { color: #f8d7da; background-color: #491c21; border: 1px solid var(--danger-color); }
    :root[data-theme="dark"] .loading-spinner { border-top-color: var(--primary-color); border-left-color: var(--dark-border-color); border-right-color: var(--dark-border-color); border-bottom-color: var(--dark-border-color); }
    :root[data-theme="dark"] .about-section, :root[data-theme="dark"] .page-content > .about-section, :root[data-theme="dark"] .footer {
      background-color: var(--dark-card-bg);
      border: 1px solid var(--dark-border-color);
    }
    :root[data-theme="dark"] .page-content h1 { color: var(--primary-color); }
    :root[data-theme="dark"] .about-section h2 { color: var(--primary-color); }
    :root[data-theme="dark"] .about-section p { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .dm-link { color: var(--primary-color); }
    :root[data-theme="dark"] .footer-nav a { color: var(--primary-color); }
    :root[data-theme="dark"] .footer-nav a:hover { color: var(--primary-hover-color); }
    :root[data-theme="dark"] .contact-form input, :root[data-theme="dark"] .contact-form textarea {
      background-color: var(--input-bg-dark);
      border: 1px solid var(--dark-border-color);
      color: var(--dark-text-color);
    }
    :root[data-theme="dark"] .contact-form input:focus, :root[data-theme="dark"] .contact-form textarea:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm);
    }

    /* Base Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px; /* Base font size */
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-family-sans-serif);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      line-height: 1.6;
      -webkit-text-size-adjust: 100%;
      transition: background-color var(--transition-speed) ease-in-out, color var(--transition-speed) ease-in-out;
      padding: 1rem; /* Add some padding to the body */
    }

    .container {
      width: 100%;
      max-width: 720px; /* Max width for content */
      padding: 0 1rem; /* Padding for container content on smaller screens */
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      border-radius: 50%; /* Make it circular */
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-speed) ease-in-out;
      z-index: 1000;
    }
    .theme-toggle:hover {
      transform: scale(1.1);
      box-shadow: var(--box-shadow-md);
    }
    .theme-toggle svg {
      width: 22px;
      height: 22px;
      transition: fill var(--transition-speed) ease-in-out;
    }

    .patriotic-text {
      font-size: clamp(1rem, 3vw, 1.25rem);
      text-align: center;
      margin-bottom: 0.75rem;
      font-weight: 600; /* Bolder */
      width: 100%;
      padding: 0.5rem 0;
    }

    h1 {
      font-size: clamp(1.5rem, 5vw, 2rem); /* Responsive heading */
      font-weight: 700; /* Bolder */
      text-align: center;
      margin-bottom: 0.5rem;
      width: 100%;
    }
    
    /* Added style for new subtitle */
    .h1-subtitle {
      display: block;
      font-size: 0.6em;
      font-weight: 400;
      margin-top: 0.8rem;
      line-height: 1.5;
      color: var(--light-text-secondary);
    }
    :root[data-theme="dark"] .h1-subtitle {
      color: var(--dark-text-secondary);
    }

    .credit {
      font-size: clamp(0.75rem, 2.5vw, 0.875rem);
      text-align: center;
      margin-bottom: 1.5rem;
      width: 100%;
    }
    .credit a:hover { text-decoration: underline; }

    input, button, textarea {
      font-family: inherit;
      font-size: 1rem;
      border-radius: var(--border-radius);
      transition: all var(--transition-speed) ease-in-out;
    }

    input {
      width: 100%;
      padding: 0.75rem 1rem; /* More padding */
      margin-bottom: 1rem;
      -webkit-appearance: none;
      user-select: text;
    }

    button {
      width: 100%;
      padding: 0.75rem 1rem;
      font-weight: 600; /* Bolder buttons */
      cursor: pointer;
      margin-bottom: 0.75rem;
      border: none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active {
      transform: translateY(1px) scale(0.98);
    }

    #result {
      margin-top: 2rem;
      min-height: 50px;
      width: 100%;
    }

    .profile-card {
      border-radius: var(--border-radius);
      overflow: hidden;
      width: 100%;
      margin-bottom: 1.5rem; /* Space below card */
    }

    .profile-card-header {
      display: flex;
      align-items: center; /* Vertically align avatar and text block */
      padding: 1.25rem; /* Increased padding */
      /* flex-direction: row; /* Ensures avatar and identity block are side-by-side by default */
    }

    .profile-photo-enhanced, .profile-photo-placeholder {
      width: 72px; /* Slightly larger */
      height: 72px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 1.25rem; /* Space between avatar and text */
      margin-bottom: 0; /* Reset bottom margin if it was set for stacking */
      border-width: 3px;
      border-style: solid;
      flex-shrink: 0;
    }
    .profile-photo-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .profile-photo-placeholder svg {
      width: 36px;
      height: 36px;
    }

    .profile-identity {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      min-width: 0;
      gap: 0.1rem;
    }
    .profile-nickname {
      font-size: clamp(1.25rem, 4vw, 1.5rem);
      font-weight: 600;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .profile-username-display {
      font-size: clamp(0.875rem, 3vw, 1rem);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .profile-card-body {
      padding: 0.75rem 1.25rem 1.25rem; /* Adjusted padding */
    }
    .profile-info-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 0.75rem 0;
      font-size: clamp(0.875rem, 3vw, 0.95rem);
    }
    .profile-info-row:last-child { border-bottom: none; }
    .info-label {
      font-weight: 500; /* Slightly less bold */
      margin-right: 1rem;
      flex-shrink: 0;
    }
    .info-value {
      text-align: right;
      word-break: break-word;
      flex-grow: 1;
      min-width: 0;
    }
    .bio-row {
      flex-direction: column;
      align-items: flex-start;
    }
    .bio-row .info-label { margin-bottom: 0.5rem; }
    .bio-row .info-value.bio-text {
      text-align: left;
      width: 100%;
      line-height: 1.5;
      font-size: clamp(0.8rem, 2.8vw, 0.9rem);
    }

    .profile-card-footer {
      padding: 1rem 1.25rem;
      text-align: center;
    }
    .message {
      padding: 0.75rem 1rem;
      border-radius: var(--border-radius);
      font-weight: 500;
      margin: 0;
      display: inline-block;
      box-shadow: var(--box-shadow-sm);
    }

    .loading-spinner-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      text-align: center;
      width: 100%;
    }
    .loading-spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(0,0,0,0.1);
      border-radius: 50%;
      animation: spin 0.8s linear infinite; /* Faster spin */
      margin-right: 0.75rem;
    }

    main {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 2rem; /* Space for footer */
    }

    .about-section, .page-content > .about-section, .footer {
      margin-top: 2rem; /* More spacing between sections */
      padding: 1.25rem; /* More padding */
      border-radius: var(--border-radius);
      font-size: clamp(0.875rem, 3vw, 0.95rem);
      line-height: 1.7; /* Improved line height */
      width: 100%;
    }
    .page-content {
      display: none;
      width: 100%;
      margin-top: 2rem;
    }
    .page-content.active { display: block; }
    .page-content h1 {
      font-size: clamp(1.35rem, 4.5vw, 1.75rem);
      margin-bottom: 1.25rem;
    }
    .about-section h2 {
      font-size: clamp(1.1rem, 3.5vw, 1.25rem);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }
    .about-section p { margin-bottom: 0.75rem; }
    .about-section p:last-child { margin-bottom: 0; }
    .dm-link:hover { text-decoration: underline; }
    .footer {
      text-align: center;
      padding: 1.5rem; /* More padding for footer */
    }
    .footer-nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem 1.5rem; /* More gap */
    }
    .footer-nav a {
      font-size: clamp(0.8rem, 2.8vw, 0.9rem);
      font-weight: 500;
      transition: color var(--transition-speed) ease-in-out, transform var(--transition-speed) ease-in-out;
    }
    .footer-nav a:hover {
      transform: translateY(-1px);
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1.25rem;
      width: 100%;
    }
    .contact-form input, .contact-form textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: var(--border-radius);
      -webkit-appearance: none;
      user-select: text;
    }
    .contact-form textarea {
      resize: vertical;
      min-height: 120px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      html { font-size: 15px; } /* Slightly smaller base for tablets */
      .container { padding: 0 0.75rem; }
    }

    @media (max-width: 480px) {
      html { font-size: 14px; } /* Smaller base for mobile */
      body { padding: 0.5rem; }
      .container { padding: 0 0.5rem; }
      .theme-toggle { top: 0.5rem; right: 0.5rem; width: 40px; height: 40px; }
      .theme-toggle svg { width: 20px; height: 20px; }
      input, button, textarea { padding: 0.65rem 0.85rem; }
      .profile-card-header {
        padding: 1rem;
        /* flex-direction: column; /* REMOVED: To keep avatar and text side-by-side */
        /* text-align: center; /* REMOVED: Not needed if items are aligned to start */
      }
      .profile-photo-enhanced, .profile-photo-placeholder {
        margin-right: 1rem; /* ADDED: Space between avatar and text on small screens */
        margin-bottom: 0; /* Ensure no bottom margin if it was previously stacked */
        width: 60px; /* Slightly smaller avatar on mobile */
        height: 60px;
      }
      .profile-photo-placeholder svg {
        width: 30px;
        height: 30px;
      }
      .profile-identity {
        align-items: flex-start; /* Ensure text aligns to the start of its container */
      }
      .footer-nav { flex-direction: column; gap: 0.75rem; }
    }
    @media screen and (max-width: 767px) {
      input, select, textarea { font-size: 1rem; } /* Ensure readability on iOS */
    }
    .sr-only { /* Screen reader only class */
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
    }
    
    /* Hide the navigation links */
    .footer-nav {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1-8.313-12.454z"/>
      </svg>
    </button>

    <main>
        <div class="page-content active" id="main-page">
          <div class="patriotic-text">‚ùåüö¨ | üèã‚Äç‚ôÄÔ∏è‚úÖ</div>
          <h1>
            TikTok Account Location Finder
            <span class="h1-subtitle">Find TikTok account locations and full profile details by username. Contact the developer: <a href="https://www.tiktok.com/@mo.or__" target="_blank" rel="noopener">@_moro.__</a></span>
          </h1>

          <section aria-labelledby="search-tool-heading">
            <h2 id="search-tool-heading" class="sr-only">TikTok Profile Search Tool</h2> <input type="text" id="username" placeholder="Enter TikTok username (without @)" required aria-label="TikTok Username Input">
            <button id="getResultsBtn" aria-label="Search TikTok profile">Get Profile Details</button>
            <button id="supportBtn" aria-label="Support the creator">Support Our Work ‚ù§</button>
          </section>
          <div id="result" aria-live="polite"></div>

          <article class="about-section" aria-labelledby="about-tool-heading">
            <h2 id="about-tool-heading">About This TikTok Location Finder Tool</h2>
            <p>This <strong>TikTok Location Finder</strong> is a free tool designed to help you retrieve complete public TikTok user profiles. With our <strong>TikTok profile lookup</strong> service, you can easily <strong>find TikTok user location</strong> information, along with other <strong>TikTok account details</strong> like username, bio, follower counts, video statistics, and more. It's an ideal resource for researchers, social media enthusiasts, or anyone curious about a TikTok user's public presence.</p>
            <p><strong>Key Features:</strong> Comprehensive <strong>TikTok profile lookup</strong>, estimated country display with flags, full bio visibility, up-to-date follower and video statistics, responsive design for all devices, and a user-friendly dark/light mode switcher.</p>
          </article>
  </div>
  <script>
    // Base title for the website
    const baseTitle = "TikTok Account Location Finder | Full Profile Details & FAQ";

    // ===== THEME TOGGLE FUNCTIONALITY ===== //
    const themeToggle = document.getElementById('themeToggle');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

    const currentTheme = localStorage.getItem('theme') || (prefersDarkScheme.matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', currentTheme);
    updateThemeIcon(currentTheme);

    themeToggle.addEventListener('click', function() {
      let theme = document.documentElement.getAttribute('data-theme');
      theme = theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      updateThemeIcon(theme);
    });

    function updateThemeIcon(theme) {
      const icon = themeToggle.querySelector('svg');
      if (theme === 'dark') {
        icon.innerHTML = '<path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1-8.313-12.454z"/>'; // Moon
      } else {
        icon.innerHTML = '<path d="M12 18a6 6 0 1 1 0-12 6 6 0 1 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 1 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/>'; // Sun
      }
    }

    // ===== PAGE NAVIGATION + DYNAMIC TITLE UPDATE ===== //
    function showPage(pageId) {
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add('active');
        const pageTitleElement = targetPage.querySelector('h1');
        if (pageTitleElement && pageId !== 'main-page') {
            document.title = pageTitleElement.textContent + " | TikTok Account Location Finder";
        } else {
            document.title = baseTitle;
        }
      } else {
        console.warn(`Page with ID "${pageId}" not found. Defaulting to main page.`);
        const mainPage = document.getElementById('main-page');
        if(mainPage) mainPage.classList.add('active');
        document.title = baseTitle;
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ===== CONTACT FORM SUBMISSION ===== //
    const contactSubmitButton = document.getElementById('contact-submit');
    if (contactSubmitButton) {
        contactSubmitButton.addEventListener('click', function(e) {
          e.preventDefault();
          const nameInput = document.getElementById('contact-name');
          const emailInput = document.getElementById('contact-email');
          const messageInput = document.getElementById('contact-message');
          const name = nameInput ? nameInput.value.trim() : '';
          const email = emailInput ? emailInput.value.trim() : '';
          const message = messageInput ? messageInput.value.trim() : '';
          const resultDiv = document.getElementById('result'); // Assuming resultDiv is for general messages now

          if (name && email && message) {
            if (resultDiv) { // Display success in the main result area for simplicity
                resultDiv.innerHTML = '<div class="message success-message">Thank you for your message! We will get back to you soon.</div>';
                resultDiv.style.display = 'block';
                // Auto-hide message after a few seconds
                setTimeout(() => {
                    if (resultDiv.contains(resultDiv.firstChild) && resultDiv.firstChild.classList.contains('success-message')) {
                        resultDiv.style.display = 'none';
                        resultDiv.innerHTML = '';
                    }
                }, 4000);
            }
            if(nameInput) nameInput.value = '';
            if(emailInput) emailInput.value = '';
            if(messageInput) messageInput.value = '';
          } else {
            if (resultDiv) { // Display error in the main result area
                resultDiv.innerHTML = '<div class="message error-message">Please fill in all fields in the contact form.</div>';
                resultDiv.style.display = 'block';
                 setTimeout(() => {
                     if (resultDiv.contains(resultDiv.firstChild) && resultDiv.firstChild.classList.contains('error-message')) {
                        resultDiv.style.display = 'none';
                        resultDiv.innerHTML = '';
                     }
                }, 4000);
            }
          }
        });
    }

    // ===== COUNTRY FLAG MAPPING ===== //
    function getCountryFlag(country) {
      const flagMap = {
        'AD': 'üá¶üá©', 'Andorra': 'üá¶üá©', 'AE': 'üá¶üá™', 'United Arab Emirates': 'üá¶üá™', 'AF': 'üá¶üá´', 'Afghanistan': 'üá¶üá´',
        'AG': 'üá¶üá¨', 'Antigua and Barbuda': 'üá¶üá¨', 'AI': 'üá¶üáÆ', 'Anguilla': 'üá¶üáÆ', 'AL': 'üá¶üá±', 'Albania': 'üá¶üá±',
        'AM': 'üá¶üá≤', 'Armenia': 'üá¶üá≤', 'AO': 'üá¶üá¥', 'Angola': 'üá¶üá¥', 'AQ': 'üá¶üá∂', 'Antarctica': 'üá¶üá∂',
        'AR': 'üá¶üá∑', 'Argentina': 'üá¶üá∑', 'AS': 'üá¶üá∏', 'American Samoa': 'üá¶üá∏', 'AT': 'üá¶üáπ', 'Austria': 'üá¶üáπ',
        'AU': 'üá¶üá∫', 'Australia': 'üá¶üá∫', 'AW': 'üá¶üáº', 'Aruba': 'üá¶üáº', 'AX': 'üá¶üáΩ', '√Öland Islands': 'üá¶üáΩ',
        'AZ': 'üá¶üáø', 'Azerbaijan': 'üá¶üáø', 'BA': 'üáßüá¶', 'Bosnia and Herzegovina': 'üáßüá¶', 'BB': 'üáßüáß', 'Barbados': 'üáßüáß',
        'BD': 'üáßüá©', 'Bangladesh': 'üáßüá©', 'BE': 'üáßüá™', 'Belgium': 'üáßüá™', 'BF': 'üáßüá´', 'Burkina Faso': 'üáßüá´',
        'BG': 'üáßüá¨', 'Bulgaria': 'üáßüá¨', 'BH': 'üáßüá≠', 'Bahrain': 'üáßüá≠', 'BI': 'üáßüáÆ', 'Burundi': 'üáßüáÆ',
        'BJ': 'üáßüáØ', 'Benin': 'üáßüáØ', 'BL': 'üáßüá±', 'Saint Barth√©lemy': 'üáßüá±', 'BM': 'üáßüá≤', 'Bermuda': 'üáßüá≤',
        'BN': 'üáßüá≥', 'Brunei Darussalam': 'üáßüá≥', 'BO': 'üáßüá¥', 'Bolivia': 'üáßüá¥', 'BQ': 'üáßüá∂', 'Bonaire, Sint Eustatius and Saba': 'üáßüá∂',
        'BR': 'üáßüá∑', 'Brazil': 'üáßüá∑', 'BS': 'üáßüá∏', 'Bahamas': 'üáßüá∏', 'BT': 'üáßüáπ', 'Bhutan': 'üáßüáπ',
        'BV': 'üáßüáª', 'Bouvet Island': 'üáßüáª', 'BW': 'üáßüáº', 'Botswana': 'üáßüáº', 'BY': 'üáßüáæ', 'Belarus': 'üáßüáæ',
        'BZ': 'üáßüáø', 'Belize': 'üáßüáø', 'CA': 'üá®üá¶', 'Canada': 'üá®üá¶', 'CC': 'üá®üá®', 'Cocos (Keeling) Islands': 'üá®üá®',
        'CD': 'üá®üá©', 'Congo, Democratic Republic of the': 'üá®üá©', 'CF': 'üá®üá´', 'Central African Republic': 'üá®üá´', 'CG': 'üá®üá¨', 'Congo, Republic of the': 'üá®üá¨',
        'CH': 'üá®üá≠', 'Switzerland': 'üá®üá≠', 'CI': 'üá®üáÆ', "C√¥te D'Ivoire": 'üá®üáÆ', 'CK': 'üá®üá∞', 'Cook Islands': 'üá®üá∞',
        'CL': 'üá®üá±', 'Chile': 'üá®üá±', 'CM': 'üá®üá≤', 'Cameroon': 'üá®üá≤', 'CN': 'üá®üá≥', 'China': 'üá®üá≥',
        'CO': 'üá®üá¥', 'Colombia': 'üá®üá¥', 'CR': 'üá®üá∑', 'Costa Rica': 'üá®üá∑', 'CU': 'üá®üá∫', 'Cuba': 'üá®üá∫',
        'CV': 'üá®üáª', 'Cape Verde': 'üá®üáª', 'CW': 'üá®üáº', 'Cura√ßao': 'üá®üáº', 'CX': 'üá®üáΩ', 'Christmas Island': 'üá®üáΩ',
        'CY': 'üá®üáæ', 'Cyprus': 'üá®üáæ', 'CZ': 'üá®üáø', 'Czech Republic': 'üá®üáø', 'DE': 'üá©üá™', 'Germany': 'üá©üá™',
        'DJ': 'üá©üáØ', 'Djibouti': 'üá©üáØ', 'DK': 'üá©üá∞', 'Denmark': 'üá©üá∞', 'DM': 'üá©üá≤', 'Dominica': 'üá©üá≤',
        'DO': 'üá©üá¥', 'Dominican Republic': 'üá©üá¥', 'DZ': 'üá©üáø', 'Algeria': 'üá©üáø', 'EC': 'üá™üá®', 'Ecuador': 'üá™üá®',
        'EE': 'üá™üá™', 'Estonia': 'üá™üá™', 'EG': 'üá™üá¨', 'Egypt': 'üá™üá¨', 'EH': 'üá™üá≠', 'Western Sahara': 'üá™üá≠',
        'ER': 'üá™üá∑', 'Eritrea': 'üá™üá∑', 'ES': 'üá™üá∏', 'Spain': 'üá™üá∏', 'ET': 'üá™üáπ', 'Ethiopia': 'üá™üáπ',
        'FI': 'üá´üáÆ', 'Finland': 'üá´üáÆ', 'FJ': 'üá´üáØ', 'Fiji': 'üá´üáØ', 'FK': 'üá´üá∞', 'Falkland Islands (Malvinas)': 'üá´üá∞',
        'FM': 'üá´üá≤', 'Micronesia, Federated States of': 'üá´üá≤', 'FO': 'üá´üá¥', 'Faroe Islands': 'üá´üá¥', 'FR': 'üá´üá∑', 'France': 'üá´üá∑',
        'GA': 'üá¨üá¶', 'Gabon': 'üá¨üá¶', 'GB': 'üá¨üáß', 'United Kingdom': 'üá¨üáß', 'UK': 'üá¨üáß', 'GD': 'üá¨üá©', 'Grenada': 'üá¨üá©',
        'GE': 'üá¨üá™', 'Georgia': 'üá¨üá™', 'GF': 'üá¨üá´', 'French Guiana': 'üá¨üá´', 'GG': 'üá¨üá¨', 'Guernsey': 'üá¨üá¨',
        'GH': 'üá¨üá≠', 'Ghana': 'üá¨üá≠', 'GI': 'üá¨üáÆ', 'Gibraltar': 'üá¨üáÆ', 'GL': 'üá¨üá±', 'Greenland': 'üá¨üá±',
        'GM': 'üá¨üá≤', 'Gambia': 'üá¨üá≤', 'GN': 'üá¨üá≥', 'Guinea': 'üá¨üá≥', 'GP': 'üá¨üáµ', 'Guadeloupe': 'üá¨üáµ',
        'GQ': 'üá¨üá∂', 'Equatorial Guinea': 'üá¨üá∂', 'GR': 'üá¨üá∑', 'Greece': 'üá¨üá∑', 'GS': 'üá¨üá∏', 'South Georgia and the South Sandwich Islands': 'üá¨üá∏',
        'GT': 'üá¨üáπ', 'Guatemala': 'üá¨üáπ', 'GU': 'üá¨üá∫', 'Guam': 'üá¨üá∫', 'GW': 'üá¨üáº', 'Guinea-Bissau': 'üá¨üáº',
        'GY': 'üá¨üáæ', 'Guyana': 'üá¨üáæ', 'HK': 'üá≠üá∞', 'Hong Kong': 'üá≠üá∞', 'HM': 'üá≠üá≤', 'Heard Island and McDonald Islands': 'üá≠üá≤',
        'HN': 'üá≠üá≥', 'Honduras': 'üá≠üá≥', 'HR': 'üá≠üá∑', 'Croatia': 'üá≠üá∑', 'HT': 'üá≠üáπ', 'Haiti': 'üá≠üáπ',
        'HU': 'üá≠üá∫', 'Hungary': 'üá≠üá∫', 'ID': 'üáÆüá©', 'Indonesia': 'üáÆüá©', 'IE': 'üáÆüá™', 'Ireland': 'üáÆüá™',
        'IL': 'üáÆüá±', 'Israel': 'üáÆüá±', 'IM': 'üáÆüá≤', 'Isle of Man': 'üáÆüá≤', 'IN': 'üáÆüá≥', 'India': 'üáÆüá≥',
        'IO': 'üáÆüá¥', 'British Indian Ocean Territory': 'üáÆüá¥', 'IQ': 'üáÆüá∂', 'Iraq': 'üáÆüá∂', 'IR': 'üáÆüá∑', 'Iran, Islamic Republic of': 'üáÆüá∑',
        'IS': 'üáÆüá∏', 'Iceland': 'üáÆüá∏', 'IT': 'üáÆüáπ', 'Italy': 'üáÆüáπ', 'JE': 'üáØüá™', 'Jersey': 'üáØüá™',
        'JM': 'üáØüá≤', 'Jamaica': 'üáØüá≤',
        'JO': 'üáØüá¥', 'Jordan': 'üáØüá¥', 'JP': 'üáØüáµ', 'Japan': 'üáØüáµ', 'KE': 'üá∞üá™', 'Kenya': 'üá∞üá™',
        'KG': 'üá∞üá¨', 'Kyrgyzstan': 'üá∞üá¨', 'KH': 'üá∞üá≠', 'Cambodia': 'üá∞üá≠', 'KI': 'üá∞üáÆ', 'Kiribati': 'üá∞üáÆ',
        'KM': 'üá∞üá≤', 'Comoros': 'üá∞üá≤', 'KN': 'üá∞üá≥', 'Saint Kitts and Nevis': 'üá∞üá≥', 'KP': 'üá∞üáµ', "Korea, Democratic People's Republic of": 'üá∞üáµ',
        'KR': 'üá∞üá∑', 'Korea, Republic of': 'üá∞üá∑',
        'KW': 'üá∞üáº', 'Kuwait': 'üá∞üáº', 'KY': 'üá∞üáæ', 'Cayman Islands': 'üá∞üáæ',
        'KZ': 'üá∞üáø', 'Kazakhstan': 'üá∞üáø', 'LA': 'üá±üá¶', "Lao People's Democratic Republic": 'üá±üá¶', 'LB': 'üá±üáß', 'Lebanon': 'üá±üáß',
        'LC': 'üá±üá®', 'Saint Lucia': 'üá±üá®', 'LI': 'üá±üáÆ', 'Liechtenstein': 'üá±üáÆ', 'LK': 'üá±üá∞', 'Sri Lanka': 'üá±üá∞',
        'LR': 'üá±üá∑', 'Liberia': 'üá±üá∑', 'LS': 'üá±üá∏', 'Lesotho': 'üá±üá∏', 'LT': 'üá±üáπ', 'Lithuania': 'üá±üáπ',
        'LU': 'üá±üá∫', 'Luxembourg': 'üá±üá∫', 'LV': 'üá±üáª', 'Latvia': 'üá±üáª', 'LY': 'üá±üáæ', 'Libya': 'üá±üáæ',
        'MA': 'üá≤üá¶', 'Morocco': 'üá≤üá¶', 'MC': 'üá≤üá®', 'Monaco': 'üá≤üá®', 'MD': 'üá≤üá©', 'Moldova, Republic of': 'üá≤üá©',
        'ME': 'üá≤üá™', 'Montenegro': 'üá≤üá™', 'MF': 'üá≤üá´', 'Saint Martin (French part)': 'üá≤üá´', 'MG': 'üá≤üá¨', 'Madagascar': 'üá≤üá¨',
        'MH': 'üá≤üá≠', 'Marshall Islands': 'üá≤üá≠', 'MK': 'üá≤üá∞', 'North Macedonia': 'üá≤üá∞', 'ML': 'üá≤üá±', 'Mali': 'üá≤üá±',
        'MM': 'üá≤üá≤', 'Myanmar': 'üá≤üá≤', 'MN': 'üá≤üá≥', 'Mongolia': 'üá≤üá≥', 'MO': 'üá≤üá¥', 'Macao': 'üá≤üá¥',
        'MP': 'üá≤üáµ', 'Northern Mariana Islands': 'üá≤üáµ', 'MQ': 'üá≤üá∂', 'Martinique': 'üá≤üá∂', 'MR': 'üá≤üá∑', 'Mauritania': 'üá≤üá∑',
        'MS': 'üá≤üá∏', 'Montserrat': 'üá≤üá∏', 'MT': 'üá≤üáπ', 'Malta': 'üá≤üáπ', 'MU': 'üá≤üá∫', 'Mauritius': 'üá≤üá∫',
        'MV': 'üá≤üáª', 'Maldives': 'üá≤üáª', 'MW': 'üá≤üáº', 'Malawi': 'üá≤üáº', 'MX': 'üá≤üáΩ', 'Mexico': 'üá≤üáΩ',
        'MY': 'üá≤üáæ', 'Malaysia': 'üá≤üáæ', 'MZ': 'üá≤üáø', 'Mozambique': 'üá≤üáø', 'NA': 'üá≥üá¶', 'Namibia': 'üá≥üá¶',
        'NC': 'üá≥üá®', 'New Caledonia': 'üá≥üá®', 'NE': 'üá≥üá™', 'Niger': 'üá≥üá™', 'NF': 'üá≥üá´', 'Norfolk Island': 'üá≥üá´',
        'NG': 'üá≥üá¨', 'Nigeria': 'üá≥üá¨', 'NI': 'üá≥üáÆ', 'Nicaragua': 'üá≥üáÆ', 'NL': 'üá≥üá±', 'Netherlands': 'üá≥üá±',
        'NO': 'üá≥üá¥', 'Norway': 'üá≥üá¥', 'NP': 'üá≥üáµ', 'Nepal': 'üá≥üáµ', 'NR': 'üá≥üá∑', 'Nauru': 'üá≥üá∑',
        'NU': 'üá≥üá∫', 'Niue': 'üá≥üá∫', 'NZ': 'üá≥üáø', 'New Zealand': 'üá≥üáø', 'OM': 'üá¥üá≤', 'Oman': 'üá¥üá≤',
        'PA': 'üáµüá¶', 'Panama': 'üáµüá¶', 'PE': 'üáµüá™', 'Peru': 'üáµüá™', 'PF': 'üáµüá´', 'French Polynesia': 'üáµüá´',
        'PG': 'üáµüá¨', 'Papua New Guinea': 'üáµüá¨', 'PH': 'üáµüá≠', 'Philippines': 'üáµüá≠', 'PK': 'üáµüá∞', 'Pakistan': 'üáµüá∞',
        'PL': 'üáµüá±', 'Poland': 'üáµüá±', 'PM': 'üáµüá≤', 'Saint Pierre and Miquelon': 'üáµüá≤', 'PN': 'üáµüá≥', 'Pitcairn': 'üáµüá≥',
        'PR': 'üáµüá∑', 'Puerto Rico': 'üáµüá∑', 'PS': 'üáµüá∏', 'Palestine, State of': 'üáµüá∏', 'PT': 'üáµüáπ', 'Portugal': 'üáµüáπ',
        'PW': 'üáµüáº', 'Palau': 'üáµüáº', 'PY': 'üáµüáæ', 'Paraguay': 'üáµüáæ', 'QA': 'üá∂üá¶', 'Qatar': 'üá∂üá¶',
        'RE': 'üá∑üá™', 'R√©union': 'üá∑üá™', 'RO': 'üá∑üá¥', 'Romania': 'üá∑üá¥', 'RS': 'üá∑üá∏', 'Serbia': 'üá∑üá∏',
        'RU': 'üá∑üá∫', 'Russian Federation': 'üá∑üá∫', 'Russia': 'üá∑üá∫', 'RW': 'üá∑üáº', 'Rwanda': 'üá∑üáº', 'SA': 'üá∏üá¶', 'Saudi Arabia': 'üá∏üá¶',
        'SB': 'üá∏üáß', 'Solomon Islands': 'üá∏üáß', 'SC': 'üá∏üá®', 'Seychelles': 'üá∏üá®', 'SD': 'üá∏üá©', 'Sudan': 'üá∏üá©',
        'SE': 'üá∏üá™', 'Sweden': 'üá∏üá™', 'SG': 'üá∏üá¨', 'Singapore': 'üá∏üá¨', 'SH': 'üá∏üá≠', 'Saint Helena, Ascension and Tristan da Cunha': 'üá∏üá≠',
        'SI': 'üá∏üáÆ', 'Slovenia': 'üá∏üáÆ', 'SJ': 'üá∏üáØ', 'Svalbard and Jan Mayen': 'üá∏üáØ', 'SK': 'üá∏üá∞', 'Slovakia': 'üá∏üá∞',
        'SL': 'üá∏üá±', 'Sierra Leone': 'üá∏üá±', 'SM': 'üá∏üá≤', 'San Marino': 'üá∏üá≤', 'SN': 'üá∏üá≥', 'Senegal': 'üá∏üá≥',
        'SO': 'üá∏üá¥', 'Somalia': 'üá∏üá¥', 'SR': 'üá∏üá∑', 'Suriname': 'üá∏üá∑', 'SS': 'üá∏üá∏', 'South Sudan': 'üá∏üá∏',
        'ST': 'üá∏üáπ', 'Sao Tome and Principe': 'üá∏üáπ', 'SV': 'üá∏üáª', 'El Salvador': 'üá∏üáª', 'SX': 'üá∏üáΩ', 'Sint Maarten (Dutch part)': 'üá∏üáΩ',
        'SY': 'üá∏üáæ', 'Syrian Arab Republic': 'üá∏üáæ', 'SZ': 'üá∏üáø', 'Eswatini': 'üá∏üáø', 'TC': 'üáπüá®', 'Turks and Caicos Islands': 'üáπüá®',
        'TD': 'üáπüá©', 'Chad': 'üáπüá©', 'TF': 'üáπüá´', 'French Southern Territories': 'üáπüá´', 'TG': 'üáπüá¨', 'Togo': 'üáπüá¨',
        'TH': 'üáπüá≠', 'Thailand': 'üáπüá≠', 'TJ': 'üáπüáØ', 'Tajikistan': 'üáπüáØ', 'TK': 'üáπüá∞', 'Tokelau': 'üáπüá∞',
        'TL': 'üáπüá±', 'Timor-Leste': 'üáπüá±', 'TM': 'üáπüá≤', 'Turkmenistan': 'üáπüá≤', 'TN': 'üáπüá≥', 'Tunisia': 'üáπüá≥',
        'TO': 'üáπüá¥', 'Tonga': 'üáπüá¥', 'TR': 'üáπüá∑', 'Turkey': 'üáπüá∑', 'TT': 'üáπüáπ', 'Trinidad and Tobago': 'üáπüáπ',
        'TV': 'üáπüáª', 'Tuvalu': 'üáπüáª', 'TW': 'üáπüáº', 'Taiwan, Province of China': 'üáπüáº', 'TZ': 'üáπüáø', 'Tanzania, United Republic of': 'üáπüáø',
        'UA': 'üá∫üá¶', 'Ukraine': 'üá∫üá¶', 'UG': 'üá∫üá¨', 'Uganda': 'üá∫üá¨', 'UM': 'üá∫üá≤', 'United States Minor Outlying Islands': 'üá∫üá≤',
        'US': 'üá∫üá∏', 'United States of America': 'üá∫üá∏', 'USA': 'üá∫üá∏', 'UY': 'üá∫üáæ', 'Uruguay': 'üá∫üáæ', 'UZ': 'üá∫üáø', 'Uzbekistan': 'üá∫üáø',
        'VA': 'üáªüá¶', 'Holy See (Vatican City State)': 'üáªüá¶', 'VC': 'üáªüá®', 'Saint Vincent and the Grenadines': 'üáªüá®', 'VE': 'üáªüá™', 'Venezuela, Bolivarian Republic of': 'üáªüá™',
        'VG': 'üáªüá¨', 'Virgin Islands, British': 'üáªüá¨', 'VI': 'üáªüáÆ', 'Virgin Islands, U.S.': 'üáªüáÆ', 'VN': 'üáªüá≥', 'Viet Nam': 'üáªüá≥',
        'VU': 'üáªüá∫', 'Vanuatu': 'üáªüá∫', 'WF': 'üáºüá´', 'Wallis and Futuna': 'üáºüá´', 'WS': 'üáºüá∏', 'Samoa': 'üáºüá∏',
        'XK': 'üáΩüá∞', 'Kosovo': 'üáΩüá∞', 'YE': 'üáæüá™', 'Yemen': 'üáæüá™', 'YT': 'üáæüáπ', 'Mayotte': 'üáæüáπ',
        'ZA': 'üáøüá¶', 'South Africa': 'üáøüá¶', 'ZM': 'üáøüá≤', 'Zambia': 'üáøüá≤', 'ZW': 'üáøüáº', 'Zimbabwe': 'üáøüáº'
      };
      if (!country) return 'üåê'; // Default globe emoji if country is undefined or null
      const normalizedCountry = String(country).trim(); // Ensure country is a string and trim whitespace
      // Try exact match (case-insensitive) for both codes and full names
      for (const key in flagMap) {
        if (key.toLowerCase() === normalizedCountry.toLowerCase()) return flagMap[key];
      }
      // Try partial match for full names (e.g., if API returns "United States" and map has "United States of America")
      // This is a bit more lenient, ensure it doesn't cause wrong matches for short country names.
      // Only do this for keys that are likely full country names (e.g., length > 3)
      for (const key in flagMap) {
        if (key.length > 3 && normalizedCountry.toLowerCase().includes(key.toLowerCase())) return flagMap[key];
      }
      return 'üåê'; // Default if no match found
    }

    // ===== TIKTOK USER LOOKUP FUNCTIONALITY ===== //
    const getResultsBtn = document.getElementById('getResultsBtn');
    const supportBtn = document.getElementById('supportBtn');

    if (getResultsBtn) getResultsBtn.addEventListener('click', lookupUser);
    if (supportBtn) supportBtn.addEventListener('click', () => window.open('https://ko-fi.com/moroccan', '_blank'));

    function lookupUser() {
      const usernameInput = document.getElementById('username');
      const resultDiv = document.getElementById('result');
      const currentGetResultsBtn = document.getElementById('getResultsBtn');
      const username = usernameInput ? usernameInput.value.trim() : '';

      if (!username) {
        if(resultDiv) {
            resultDiv.innerHTML = '<div class="message error-message">Please enter a valid TikTok username.</div>';
            resultDiv.style.display = 'block';
        }
        return;
      }

      // Check if API_CONFIG and getApiUrl are defined (from api_config.js)
      if (typeof API_CONFIG === 'undefined' || typeof getApiUrl === 'undefined') {
        console.error("API configuration (api_config.js) is not loaded or is incorrect.");
        if(resultDiv) {
            resultDiv.innerHTML = '<div class="message error-message">API configuration error. Please ensure api_config.js is present and correct.</div>';
            resultDiv.style.display = 'block';
        }
        return;
      }

      if(currentGetResultsBtn) currentGetResultsBtn.disabled = true;
      if(resultDiv) {
          resultDiv.innerHTML = '<div class="loading-spinner-container"><div class="loading-spinner"></div> Loading profile data...</div>';
          resultDiv.style.display = 'block';
      }

      // Use the getApiUrl function from api_config.js
      const apiUrl = getApiUrl(username);

      if (!apiUrl) {
        console.error("Failed to construct API URL. Check api_config.js.");
         if(resultDiv) {
            resultDiv.innerHTML = '<div class="message error-message">Could not construct API URL. Configuration might be missing.</div>';
            resultDiv.style.display = 'block';
        }
        if(currentGetResultsBtn) currentGetResultsBtn.disabled = false;
        return;
      }
      
      console.log("Attempting to fetch data via CORS proxy from:", apiUrl);

      fetch(apiUrl)
        .then(response => {
          console.log("Received response status:", response.status);
          if (!response.ok) {
            return response.text().then(text => {
                let errorMsg = `API request failed with status ${response.status}`;
                if (response.status === 429) errorMsg = 'Rate limit exceeded. Please try again later.';
                else if (response.status === 404) errorMsg = 'User not found or API endpoint issue.';
                else if (response.status === 503 && text.toLowerCase().includes("corsproxy.io")) errorMsg = 'The CORS proxy service might be temporarily unavailable or rate-limiting. Please try again shortly.';
                else {
                    try { const errData = JSON.parse(text); errorMsg = errData.message || errData.error || text || errorMsg; }
                    catch (e) { errorMsg = text || errorMsg; } // Use raw text if JSON parsing fails
                }
                console.error("API Error:", errorMsg, "Raw text:", text);
                throw new Error(errorMsg); // Throw an error to be caught by .catch()
            });
          }
          return response.json();
        })
        .then(data => {
          console.log("Full API Response Data:", JSON.stringify(data, null, 2)); // Log the full structure
          // Adjust based on the actual structure of the successful response
          // It seems the profile data might be directly in `data` or `data.profile`
          const apiProfile = data.profile || data; // Try data.profile first, then data itself

          if (apiProfile && typeof apiProfile === 'object' && Object.keys(apiProfile).length > 0) {
            // Sanitize function to prevent XSS
            const sanitize = (str) => {
                if (typeof str !== 'string') return str === null || typeof str === 'undefined' ? '' : String(str);
                const temp = document.createElement('div');
                temp.textContent = str; // Use textContent for security, then innerHTML to get encoded entities
                return temp.innerHTML;
            };

            // Attempt to find profile photo URL using various common keys
            let foundProfilePhotoUrl = '';
            const avatarKeys = ['Profile Photo', 'Avatar URL', 'avatar_url', 'avatarUrl', 'picture', 'profileImageUrl', 'profile_pic_url', 'profile_image_url', 'avatar', 'Avatar', 'profile_picture', 'photo_url', 'user_avatar'];
            for (const key of avatarKeys) {
                if (apiProfile[key] && typeof apiProfile[key] === 'string' && apiProfile[key].trim() !== '') {
                    foundProfilePhotoUrl = apiProfile[key];
                    console.log(`Found avatar URL using key: ${key}`);
                    break;
                }
            }
            const profilePhoto = foundProfilePhotoUrl ? sanitize(foundProfilePhotoUrl) : '';


            // Extract Username and Nickname, handling potential variations and sanitizing
            let rawUsernameFromAPI = apiProfile.Username || apiProfile.username || apiProfile.user_name || apiProfile.unique_id || username; // Fallback to input username
            if (typeof rawUsernameFromAPI === 'string' && rawUsernameFromAPI.startsWith('@')) {
                rawUsernameFromAPI = rawUsernameFromAPI.substring(1); // Remove leading '@' if present
            }
            const displayUsername = sanitize(rawUsernameFromAPI);
            const displayNickname = apiProfile.Nickname || apiProfile.nickname || apiProfile.name || apiProfile.display_name || apiProfile.user_display_name || displayUsername; // Fallback to username


            let profileDetailsHtml = '';
            for (const key in apiProfile) {
                if (Object.hasOwnProperty.call(apiProfile, key)) {
                    // Skip fields that are already handled in the header, are null/empty, or specifically requested to be hidden
                    if (['Nickname', 'nickname', 'Username', 'username', 'name', 'display_name', 'user_name', 'unique_id', 'user_display_name', ...avatarKeys].includes(key) ||
                        apiProfile[key] == null || String(apiProfile[key]).trim() === '') {
                        continue;
                    }

                    let value = apiProfile[key];
                    // Format display key: Add spaces before capitals (camelCase to Title Case), replace underscores, capitalize words
                    let displayKey = key.replace(/([A-Z])/g, ' $1').replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()).trim();
                    
                    // Skip "Sec U I D" and "Username Last Modified"
                    if (displayKey === 'Sec U I D' || displayKey === 'Username Last Modified') {
                        console.log(`Skipping field with displayKey: ${displayKey} (original key: ${key})`);
                        continue;
                    }


                    if (['Bio', 'bio', 'description', 'Signature', 'bio_text', 'user_bio'].includes(key)) { // Handle bio specifically for formatting
                        value = sanitize(String(value)).replace(/\n/g, '<br>'); // Sanitize and convert newlines
                         profileDetailsHtml += `<div class="profile-info-row bio-row"><span class="info-label">${sanitize(displayKey)}:</span><p class="info-value bio-text">${value || 'N/A'}</p></div>`;
                    } else if (['Country', 'country', 'region', 'Location', 'country_code', 'user_region'].includes(key)) { // Handle country for flag
                        value = sanitize(String(value));
                        profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${getCountryFlag(value)} ${value || 'N/A'}</span></div>`;
                    } else if (typeof value === 'number' && (key.toLowerCase().includes('follower') || key.toLowerCase().includes('following') || key.toLowerCase().includes('like') || key.toLowerCase().includes('video') || key.toLowerCase().includes('count') || key.toLowerCase().includes('digg'))) {
                        value = Number(value).toLocaleString(); // Format numbers with commas
                         profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${value}</span></div>`;
                    } else if (typeof value === 'boolean') {
                        value = value ? 'Yes' : 'No';
                         profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${value}</span></div>`;
                    } else if (typeof value === 'string' && (value.startsWith('http://') || value.startsWith('https://'))) { // Make links clickable
                        profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value"><a href="${sanitize(value)}" target="_blank" rel="noopener noreferrer" class="dm-link">${sanitize(value)}</a></span></div>`;
                    } else { // Default case for other string values
                         profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${sanitize(String(value)) || 'N/A'}</span></div>`;
                    }
                }
            }
            
            // If after processing, no details were added (e.g., all fields were skipped or empty)
            if (profileDetailsHtml.trim() === '') {
                 if(resultDiv) resultDiv.innerHTML = `<div class="message error-message">No displayable profile data found for '${sanitize(username)}'. The user might not exist, or the API returned minimal information.</div>`;
                 return; // Exit early
            }


            let formattedData = `
              <article class="profile-card" aria-labelledby="profile-card-heading-${displayUsername}">
                <h2 id="profile-card-heading-${displayUsername}" class="sr-only">Profile details for ${sanitize(displayNickname)}</h2>
                <div class="profile-card-header">
                  ${profilePhoto ? `<img src="${profilePhoto}" alt="Profile photo of ${sanitize(displayNickname)}" class="profile-photo-enhanced" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                  <div class="profile-photo-placeholder" style="${profilePhoto ? 'display:none;' : 'display:flex;'}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                  </div>
                  <div class="profile-identity">
                    <h3 class="profile-nickname">${sanitize(displayNickname)}</h3>
                    <p class="profile-username-display">${sanitize(displayUsername).startsWith('@') ? sanitize(displayUsername) : '@' + sanitize(displayUsername)}</p>
                  </div>
                </div>
                <div class="profile-card-body">${profileDetailsHtml}</div>
                <div class="profile-card-footer"><span class="message success-message">Profile data retrieved successfully!</span></div>
              </article>`;
            if(resultDiv) resultDiv.innerHTML = formattedData;
          } else {
            // This case handles if apiProfile is null, not an object, or an empty object
            console.warn("Profile data is missing, not an object, or empty in the API response.", "Received data:", data);
            if(resultDiv) resultDiv.innerHTML = `<div class="message error-message">Profile data not found or is incomplete for '${sanitize(username)}'. The API might be down, the user may not exist, or the response format is unexpected.</div>`;
          }
        })
        .catch(error => {
          console.error("Fetch or processing error:", error);
          if(resultDiv) resultDiv.innerHTML = `<div class="message error-message">Error: ${error.message || 'Failed to fetch profile data'}. Please check the username and try again. The API service or CORS proxy might be temporarily unavailable.</div>`;
        })
        .finally(() => {
          if(currentGetResultsBtn) currentGetResultsBtn.disabled = false;
        });
    }

    // Add event listener for Enter key on username input
    const usernameInputGlobal = document.getElementById('username');
    if (usernameInputGlobal) {
      usernameInputGlobal.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault(); // Prevent form submission if it's part of a form
          lookupUser();
        }
      });
    }
  </script>
</body>
</html>
