<!DOCTYPE html>
<html lang="en">
<head>
  <title>TikTok Account Location Finder | Full Profile Details & AI Analysis</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <meta name="description" content="Find TikTok account locations by username with our free TikTok location finder. Discover user locations, profile details, stats, AI-powered bio analysis, and more quickly using our online tool!">
  <meta name="keywords" content="TikTok location finder, tiktok profile lookup, tiktok lookup, tiktok account search, tiktok account look up, Find TikTok user location, TikTok account location, TikTok username location, Where is this TikTok user from, TikTok geolocation, TikTok user location search, Locate TikTok account by username, TikTok profile location, Find TikTok account location, Social media location finder, TikTok analytics tool, TikTok user tracker, Social media geolocation tool, TikTok data extractor, TikTok user mapping, TikTok location tracker, TikTok influencer location, Find TikTok influencers by location, TikTok marketing tool, Social media influencer finder, TikTok user search by location, Online TikTok location finder, Web tool for TikTok locations, TikTok location search engine, Browser-based TikTok locator, Free TikTok location finder, Free tool to find TikTok user location, How to find TikTok user location by username, Best tool to locate TikTok accounts, TikTok profile viewer, TikTok stats checker, AI bio analysis, Gemini API">
  <meta name="author" content="@mo.or__">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tikip.us/"/>

  <meta property="og:title" content="TikTok Account Location Finder | Full Profile Details & AI Analysis">
  <meta property="og:description" content="Retrieve complete TikTok user profiles, including username, bio, followers, videos, location, AI-powered bio analysis, and more. Free tool by @mo.or__ for research and analytics.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tikip.us">
  <meta property="og:image" content="https://tikip.us/favicon.png"> <meta property="og:site_name" content="TikTok Location Finder">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@mo.or__">
  <meta name="twitter:title" content="TikTok Account Location Finder | Full Profile Details & AI Analysis">
  <meta name="twitter:description" content="Free tool to find TikTok user locations, full profile details, and AI-powered bio analysis by username.">
  <meta name="twitter:image" content="https://tikip.us/favicon.png"> <meta content="Global" name="distribution"/>
  <meta content="General" name="rating"/>
  <meta content="en" http-equiv="content-language"/>
  <meta content="Turkey" name="geo.country"/> <meta content="en_US" property="og:locale"/>
  <meta content="en_UK" property="og:locale:alternate"/>
  <meta content="Turkey" name="geo.placename"/> <script async src="https://www.googletagmanager.com/gtag/js?id=G-HTPQL6DM82"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HTPQL6DM82'); </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6346556035067219"
     crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="B3Dexm1A96g9Vj5uQ3LjOOsA-RxFqSwca_G0LrOchB0" />
  <meta name="monetag" content="caa90b8bc2e2b44cb2ca5427c3072138">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="/favicon.png" type="image/png">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "TikTok Account Location Finder with AI Analysis",
    "url": "https://tikip.us/",
    "description": "A free online tool to find TikTok account locations, full profile details, and AI-powered bio analysis by username.",
    "creator": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://tikip.us/?username={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "TikTok Account Location Finder with AI Analysis",
    "applicationCategory": "SocialNetworkAnalysisTool",
    "operatingSystem": "Web",
    "browserRequirements": "Requires a modern web browser with JavaScript enabled.",
    "description": "Free web-based tool to retrieve public TikTok user profile details, including estimated location, bio, follower counts, video statistics, and AI-powered bio analysis by username.",
    "url": "https://tikip.us/",
    "author": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>

  <style>
    :root {
      /* Base Colors */
      --primary: #10B981; /* Emerald 500 */
      --primary-hover: #059669; /* Emerald 600 */
      --support-color: #EF4444; /* Red 500 */
      --support-hover: #DC2626; /* Red 600 */
      --highlight-color: #6366F1; /* Indigo 500 */
      --ai-button-bg: #6366F1; /* Indigo 500 */
      --ai-button-hover-bg: #4F46E5; /* Indigo 600 */

      /* Default to Dark Theme (Black Theme) Variables */
      --container-bg: #111827; /* Gray 900 */
      --text-color: #F3F4F6; /* Gray 100 */
      --text-secondary: #9CA3AF; /* Gray 400 */
      --input-bg: #1F2937; /* Gray 800 */
      --input-border: #374151; /* Gray 700 */
      --card-bg: #1F2937; /* Gray 800 */
      --card-header-bg: #111827; /* Gray 900 */
      --bg-color: #030712; /* Almost Black - Gray 950 */
      --success-color: #34D399; /* Emerald 400 */
      --patriotic-color: var(--text-color); /* Uses main text color */

      /* Shadows for Dark Theme */
      --main-container-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15);
      --card-element-shadow: 0 3px 10px rgba(0, 0, 0, 0.15), 0 2px 5px rgba(0, 0, 0, 0.1);
      --button-element-shadow: 0 2px 4px rgba(0, 0, 0, 0.25), 0 1px 2px rgba(0, 0, 0, 0.2);
      --button-element-shadow-hover: 0 4px 6px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.25);
      --input-element-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.05);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      color: var(--text-color);
      line-height: 1.6;
      -webkit-text-size-adjust: 100%;
      transition: background-color 0.3s ease, color 0.3s ease; /* Keep transitions for smoothness if any other dynamic changes occur */
      margin: 0; 
      width: 100vw;
      overflow-x: hidden;
    }

    .container {
      background-color: var(--container-bg);
      padding: clamp(15px, 4vw, 30px); 
      border-radius: 12px; 
      width: 100vw; 
      max-width: none; 
      transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: var(--main-container-shadow);
      border: 1px solid transparent; 
    }
    /* Removed :root[data-theme="light"] .container border rule as it's always dark */


    /* Theme toggle button CSS is removed as the button is removed from HTML */

    .patriotic-text {
      font-size: clamp(16px, 3.5vw, 18px); 
      text-align: center;
      color: var(--patriotic-color);
      margin-bottom: 15px; 
      font-weight: 600; 
      width: 100%;
      padding: 10px 0; 
    }

    h1 { 
      font-size: clamp(22px, 5vw, 28px); 
      font-weight: 700; 
      text-align: center;
      color: var(--text-color);
      margin-bottom: 8px; 
      width: 100%;
    }

    .credit {
      font-size: clamp(12px, 3vw, 14px); 
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 25px; 
      width: 100%;
    }

    .credit a {
      color: var(--highlight-color); 
      text-decoration: none;
      font-weight: 500; 
    }

    .credit a:hover {
      text-decoration: underline;
      color: var(--primary);
    }

    input {
      width: 100%;
      max-width: 600px; 
      padding: 14px 16px; 
      font-size: clamp(14px, 3.8vw, 16px); 
      border: 1px solid var(--input-border);
      border-radius: 8px; 
      margin-bottom: 15px; 
      background-color: var(--input-bg);
      color: var(--text-color);
      transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
      -webkit-appearance: none;
      user-select: text;
      box-shadow: var(--input-element-shadow);
    }

    input:focus {
      outline: none;
      border-color: var(--primary); 
      box-shadow: var(--input-element-shadow), 0 0 0 3px color-mix(in srgb, var(--primary) 30%, transparent); 
    }


    input::placeholder {
      color: var(--text-secondary);
      opacity: 0.8; 
    }

    button {
      width: 100%;
      max-width: 600px; 
      padding: 14px 16px; 
      font-size: clamp(15px, 4vw, 17px); 
      border: none;
      border-radius: 8px; 
      color: white;
      font-weight: 600; 
      cursor: pointer;
      margin-bottom: 12px; 
      transition: background 0.2s ease-out, transform 0.15s ease-out, box-shadow 0.2s ease-out; 
      -webkit-tap-highlight-color: transparent;
      text-shadow: 0 1px 1px rgba(0,0,0,0.15); 
      box-shadow: var(--button-element-shadow);
    }
    
    button:active {
        transform: translateY(1px) scale(0.98); 
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); 
    }


    #getResultsBtn {
      background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 80%, black 20%)); 
    }

    #getResultsBtn:hover, #getResultsBtn:focus {
      background: linear-gradient(135deg, var(--primary-hover), color-mix(in srgb, var(--primary-hover) 80%, black 20%)); 
      transform: translateY(-2px); 
      box-shadow: var(--button-element-shadow-hover);
    }

    #supportBtn {
      background: linear-gradient(135deg, var(--support-color), color-mix(in srgb, var(--support-color) 80%, black 20%)); 
      margin-bottom: 0; 
    }

    #supportBtn:hover, #supportBtn:focus {
      background: linear-gradient(135deg, var(--support-hover), color-mix(in srgb, var(--support-hover) 80%, black 20%)); 
      transform: translateY(-2px); 
      box-shadow: var(--button-element-shadow-hover);
    }
    
    .ai-analyze-btn {
        background: linear-gradient(135deg, var(--ai-button-bg), color-mix(in srgb, var(--ai-button-bg) 80%, black 20%));
        margin-top: 15px; 
    }
    .ai-analyze-btn:hover, .ai-analyze-btn:focus {
        background: linear-gradient(135deg, var(--ai-button-hover-bg), color-mix(in srgb, var(--ai-button-hover-bg) 80%, black 20%));
        transform: translateY(-2px);
        box-shadow: var(--button-element-shadow-hover);
    }


    #result {
      background-color: transparent; 
      padding: 0; 
      margin-top: 30px; 
      border: none; 
      min-height: 50px; 
      width: 100%;
      max-width: 600px; 
    }

    .profile-card {
      background-color: var(--card-bg);
      border-radius: 12px; 
      border: 1px solid var(--input-border);
      overflow: hidden;
      transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      width: 100%;
      max-width: 600px; 
      box-shadow: var(--card-element-shadow);
    }

    .profile-card-header {
      display: flex;
      align-items: center;
      padding: 20px; 
      background-color: var(--card-header-bg);
      border-bottom: 1px solid var(--input-border);
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .profile-photo-enhanced {
      width: 72px; 
      height: 72px; 
      border-radius: 50%;
      object-fit: cover;
      margin-right: 20px; 
      border: 3px solid var(--primary);
      flex-shrink: 0;
      background-color: var(--input-bg); 
      box-shadow: 0 2px 6px rgba(0,0,0,0.1); 
    }

    .profile-photo-placeholder {
      width: 72px; 
      height: 72px; 
      border-radius: 50%;
      margin-right: 20px; 
      background-color: var(--input-bg);
      border: 3px solid var(--input-border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      flex-shrink: 0;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .profile-photo-placeholder svg {
      width: 38px; 
      height: 38px; 
      fill: var(--text-secondary);
    }

    .profile-identity {
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-width: 0; 
    }

    .profile-nickname {
      font-size: clamp(18px, 4.8vw, 22px); 
      font-weight: 600;
      color: var(--text-color);
      margin: 0 0 3px 0; 
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .profile-username-display {
      font-size: clamp(14px, 3.5vw, 16px); 
      color: var(--text-secondary);
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .profile-card-body {
      padding: 15px 20px 20px 20px; 
    }

    .profile-info-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start; 
      padding: 12px 0; 
      border-bottom: 1px solid var(--input-bg); 
      font-size: clamp(13px, 3.6vw, 15px); 
    }
    /* Removed :root[data-theme="light"] .profile-info-row border override */


    .profile-info-row:last-child {
      border-bottom: none;
    }

    .info-label {
      font-weight: 500; 
      color: var(--text-secondary);
      margin-right: 15px; 
      flex-shrink: 0;
      text-transform: capitalize; 
    }

    .info-value {
      color: var(--text-color);
      text-align: right;
      word-break: break-word;
      flex-grow: 1;
      min-width: 0;
    }

    .bio-row { 
      flex-direction: column;
      align-items: flex-start;
    }

    .bio-row .info-label {
      margin-bottom: 8px;
    }

    .bio-row .info-value.bio-text {
      text-align: left;
      width: 100%;
      line-height: 1.55; 
      white-space: pre-wrap;
      color: var(--text-secondary);
      font-size: clamp(13px, 3.3vw, 14px); 
    }
    
    #bioAnalysisResult {
        margin-top: 20px; 
        padding: 15px;
        background-color: color-mix(in srgb, var(--card-bg) 90%, var(--highlight-color) 8%); 
        border: 1px solid color-mix(in srgb, var(--highlight-color) 50%, transparent); 
        border-radius: 8px;
        font-size: clamp(13px, 3.3vw, 14px);
        color: var(--text-secondary);
        line-height: 1.55;
    }
    #bioAnalysisResult h4 {
        color: var(--highlight-color);
        font-size: clamp(14px, 3.6vw, 16px);
        margin-bottom: 10px; 
        font-weight: 600;
    }
    #bioAnalysisResult p {
        margin-bottom: 6px;
    }
     #bioAnalysisResult strong {
        color: var(--text-color);
        font-weight: 500;
     }


    .profile-card-footer {
      padding: 15px 20px; 
      background-color: var(--card-header-bg);
      border-top: 1px solid var(--input-border);
      text-align: center;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .message {
      padding: 10px 15px; 
      border-radius: 6px; 
      font-weight: 500;
      margin: 0;
      display: inline-block;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08); /* Default shadow for dark theme */
    }
    /* Removed :root[data-theme="dark"] .message as it's now default */


    .success-message {
      color: var(--success-color);
      background-color: color-mix(in srgb, var(--success-color) 15%, transparent); 
      border: 1px solid color-mix(in srgb, var(--success-color) 30%, transparent);
    }

    .error-message {
      color: var(--support-color);
      background-color: color-mix(in srgb, var(--support-color) 15%, transparent); 
      border: 1px solid color-mix(in srgb, var(--support-color) 30%, transparent);
    }

    .loading-spinner-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 25px; 
      color: var(--text-secondary);
      text-align: center;
      width: 100%;
      font-size: 1.05em; 
    }
    .loading-spinner-container.inline { 
        padding: 8px 0 0 12px;
        justify-content: flex-start;
        font-size: 0.95em;
    }


    .loading-spinner {
      display: inline-block;
      width: 22px; 
      height: 22px; 
      border: 3px solid var(--input-border); 
      border-radius: 50%;
      border-top-color: var(--primary); 
      animation: spin 0.8s linear infinite; 
      margin-right: 12px; 
    }
    .loading-spinner-container.inline .loading-spinner {
        width: 18px;
        height: 18px;
        border-width: 2.5px;
    }


    main {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0 15px; 
    }
    
    .content-section {
      margin-top: 30px; 
      padding: 20px; 
      background-color: var(--card-bg); 
      border-radius: 10px; 
      font-size: clamp(13px, 3.5vw, 15px); 
      line-height: 1.65; 
      border: 1px solid var(--input-border);
      transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      width: 100%;
      max-width: 600px; 
      box-shadow: var(--card-element-shadow); 
    }
    .about-section, .page-content > .about-section {
         margin-top: 25px; 
         padding: 20px; 
         background-color: var(--card-bg);
         border-radius: 10px; 
         font-size: clamp(13px, 3.5vw, 15px); 
         line-height: 1.65; 
         border: 1px solid var(--input-border);
         transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
         width: 100%;
         max-width: 600px; 
         box-shadow: var(--card-element-shadow);
    }
    .footer {
         margin-top: 40px; 
         padding: 20px; 
         background-color: var(--card-bg);
         border-radius: 10px; 
         font-size: clamp(13px, 3.5vw, 15px); 
         line-height: 1.65; 
         border: 1px solid var(--input-border);
         transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
         width: 100%;
         max-width: 600px; 
         box-shadow: var(--card-element-shadow);
    }
    
    .page-content { 
        display: none; 
        width: 100%;
        max-width: 600px; 
        margin-top: 25px;
    }
    .page-content.active {
        display: block; 
    }
    .page-content h1 { 
        font-size: clamp(20px, 4.8vw, 26px); 
        color: var(--highlight-color);
        margin-bottom: 20px;
        font-weight: 600;
    }


    .about-section h2 { 
      color: var(--highlight-color);
      font-size: clamp(15px, 4vw, 18px); 
      margin-bottom: 10px; 
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .about-section p {
      margin-bottom: 12px; 
      color: var(--text-secondary);
    }

    .about-section p:last-child {
      margin-bottom: 0;
    }

    .dm-link {
      color: var(--highlight-color);
      text-decoration: none;
      font-weight: 500;
    }

    .dm-link:hover {
      text-decoration: underline;
      color: var(--primary);
    }

    .footer-nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px; 
    }

    .footer-nav a {
      color: var(--highlight-color);
      text-decoration: none;
      font-size: clamp(13px, 3.3vw, 14px); 
      font-weight: 500;
      transition: color 0.2s ease, transform 0.2s ease; 
    }

    .footer-nav a:hover {
      text-decoration: none; 
      color: var(--primary);
      transform: translateY(-1px); 
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 18px; 
      margin-top: 20px; 
      width: 100%;
      max-width: 600px; 
    }

    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 14px 16px; 
      font-size: clamp(14px, 3.8vw, 16px); 
      border: 1px solid var(--input-border);
      border-radius: 8px; 
      background-color: var(--input-bg);
      color: var(--text-color);
      transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
      -webkit-appearance: none;
      user-select: text;
      box-shadow: var(--input-element-shadow);
    }
    
    .contact-form input:focus,
    .contact-form textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: var(--input-element-shadow), 0 0 0 3px color-mix(in srgb, var(--primary) 30%, transparent);
    }

    .contact-form textarea {
      resize: vertical;
      min-height: 120px; 
    }

    .contact-form button { 
      background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 80%, black 20%)); 
    }

    .contact-form button:hover,
    .contact-form button:focus { 
      background: linear-gradient(135deg, var(--primary-hover), color-mix(in srgb, var(--primary-hover) 80%, black 20%));
      transform: translateY(-2px);
      box-shadow: var(--button-element-shadow-hover);
    }


    .back-btn { 
      background: linear-gradient(135deg, var(--support-color), color-mix(in srgb, var(--support-color) 80%, black 20%)); 
      margin-top: 20px; 
    }

    .back-btn:hover,
    .back-btn:focus { 
      background: linear-gradient(135deg, var(--support-hover), color-mix(in srgb, var(--support-hover) 80%, black 20%));
      transform: translateY(-2px);
      box-shadow: var(--button-element-shadow-hover);
    }


    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #ad-banner {
      width: 100%;
      max-width: 600px; 
      margin: 25px auto; 
      text-align: center;
      padding: 15px; 
      background-color: var(--card-bg);
      border: 1px solid var(--input-border);
      border-radius: 10px; 
      transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
      box-shadow: var(--card-element-shadow);
    }


    @media (max-width: 600px) { 
      .container { 
          padding: clamp(10px, 3vw, 20px);  
          border-radius: 10px; 
      }

      input, button, textarea { padding: 12px 14px; } 
      .profile-photo-enhanced, .profile-photo-placeholder { width: 64px; height: 64px; margin-right: 15px; } 
      .profile-photo-placeholder svg { width: 32px; height: 32px; } 
      .profile-card-header, .profile-card-body, .profile-card-footer { padding: 15px; } 
      /* Theme toggle media queries removed */
      .footer-nav { gap: 15px; } 
      .about-section, .page-content, .page-content > .about-section, .footer, #result, .profile-card, #ad-banner { 
          max-width: 100%; 
          border-radius: 8px; 
      }
    }

    @media (max-width: 400px) { 
      h1 { font-size: clamp(20px, 5.5vw, 24px); } 
      .page-content h1 { font-size: clamp(18px, 5vw, 22px); }
      input, button, textarea { padding: 10px 12px; font-size: clamp(13px, 3.5vw, 15px); } 
      .about-section, .page-content > .about-section, .footer { padding: 15px; } 
      .profile-card-header, .profile-card-body, .profile-card-footer { padding: 12px; } 
      .profile-photo-enhanced, .profile-photo-placeholder { width: 56px; height: 56px; } 
      .profile-photo-placeholder svg { width: 28px; height: 28px; } 
      .info-label { margin-right: 10px; } 
      /* Theme toggle media queries removed */
      .footer-nav { flex-direction: column; gap: 10px; } 
    }

    @media (min-width: 1024px) { 
      .container { padding: 30px; } 
      input, button, .about-section, .page-content, .page-content > .about-section, .footer, #result, .profile-card, #ad-banner { max-width: 700px; } 
    }

    /* iOS specific font size fix for inputs */
    @media screen and (max-width: 767px) {
      input[type="text"], input[type="email"], textarea { font-size: 16px !important; } 
    }

    /* For sr-only, screen reader only content */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
    }

  </style>
</head>
<body>
  <div class="container">
    <main>
        <div class="page-content active" id="main-page">
          <div class="patriotic-text">🇲🇦👑 الله الوطـــن الملك 🇲🇦👑</div>
          <h1>TikTok Account Location Finder</h1>
          <div class="credit">Created by <a href="https://www.tiktok.com/@mo.or__" target="_blank" rel="noopener">@_moro.__</a></div>
          
          <section aria-labelledby="search-tool-heading">
            <h2 id="search-tool-heading" class="sr-only">TikTok User Search Tool</h2> <input type="text" id="username" placeholder="Enter TikTok username (without @)" required aria-label="TikTok Username Input">
            <button id="getResultsBtn" aria-label="Get Profile Details Button">Get Profile Details</button>
            <button id="supportBtn" aria-label="Support the creator of this tool">Support Our Work ❤</button>
          </section>
          <div id="result" aria-live="polite"></div> <article class="about-section" aria-labelledby="about-tool-heading">
            <h2 id="about-tool-heading">About This Tool</h2>
            <p>Retrieve complete TikTok user profiles, including username, bio, followers, videos, location, and more. Now with AI-powered bio analysis! A free tool for researchers and social media enthusiasts.</p>
            <p><strong>Features:</strong> Full profile lookup, country flags, bio display, follower and video stats, AI bio analysis, responsive design, dark/light mode.</p>
          </article>
          
          <article class="about-section" aria-labelledby="faq-heading">
            <h2 id="faq-heading">FAQ</h2>
            <p><strong>What does this tool do?</strong> Fetches all public TikTok profile details, such as username, bio, followers, videos, estimated country, and provides an AI analysis of the bio.</p>
            <p><strong>Is it free?</strong> Yes, completely free with no hidden fees.</p>
            <p><strong>How accurate is the data?</strong> Based on public info; location, stats, and AI analysis may vary in accuracy.</p>
          </article>
          
          <article class="about-section" aria-labelledby="about-creator-heading">
            <h2 id="about-creator-heading">About the Creator</h2>
            <p>I'm Moor, a Graphic Designer & Web Developer with 4+ years of experience, passionate about building tools like this.</p>
            <p>Reach out on <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a> or support my work!</p>
          </article>
          
          <article class="about-section" aria-labelledby="get-involved-heading">
            <h2 id="get-involved-heading">Get Involved</h2>
            <p>Enjoy this tool? Share it or support its development to keep it free!</p>
            <p><a href="https://ko-fi.com/moroccan" class="dm-link" target="_blank" rel="noopener">Support on Ko-fi</a> | <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">Follow on TikTok</a></p>
          </article>
          
          <article class="about-section" aria-labelledby="disclaimer-heading">
            <h2 id="disclaimer-heading">Disclaimer</h2>
            <p>For educational use only. Respect user privacy and use responsibly. Data is sourced publicly and may not be 100% accurate. AI analysis is for informational purposes and may not reflect the user's true intent or characteristics.</p>
          </article>
        </div>

        <section class="page-content" id="contact-page" aria-labelledby="contact-page-heading">
          <h1 id="contact-page-heading">Contact Us</h1>
          <article class="about-section"> <p>Have questions or feedback? Reach out to us using the form below or contact us directly via <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a>.</p>
            <form class="contact-form" aria-labelledby="contact-page-heading">
              <label for="contact-name" class="sr-only">Your Name</label>
              <input type="text" id="contact-name" placeholder="Your Name" required aria-label="Your Name">
              <label for="contact-email" class="sr-only">Your Email</label>
              <input type="email" id="contact-email" placeholder="Your Email" required aria-label="Your Email">
              <label for="contact-message" class="sr-only">Your Message</label>
              <textarea id="contact-message" placeholder="Your Message" required aria-label="Your Message"></textarea>
              <button type="submit" id="contact-submit">Send Message</button>
            </form>
          </article>
          <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
        </section>

        <section class="page-content" id="about-page" aria-labelledby="about-us-page-heading">
          <h1 id="about-us-page-heading">About Us</h1>
          <article class="about-section">
            <p>Welcome to the TikTok Account Location Finder, a free tool created by <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">@_moro.__</a>.</p>
            <p>Our mission is to provide a user-friendly platform for researchers, marketers, and social media enthusiasts to access public TikTok profile data, now enhanced with AI-powered insights. This tool is designed with simplicity, accessibility, and responsiveness in mind, ensuring it works seamlessly across all devices.</p>
            <p>Built by Moor, a passionate Graphic Designer and Web Developer with over 4 years of experience, this project reflects a commitment to creating innovative tools for the community. Follow us on <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a> for updates and more!</p>
          </article>
          <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
        </section>

        <section class="page-content" id="privacy-page" aria-labelledby="privacy-policy-page-heading">
          <h1 id="privacy-policy-page-heading">Privacy Policy</h1>
          <article class="about-section">
            <h2>1. Introduction</h2>
            <p>We value your privacy and are committed to protecting your personal information. This Privacy Policy explains how we collect, use, and safeguard your data when you use the TikTok Account Location Finder.</p>
            
            <h2>2. Information We Collect</h2>
            <p>We do not collect personal information unless you voluntarily provide it (e.g., via the contact form). The tool fetches publicly available TikTok profile data, which may include usernames, bios, follower counts, and other public metrics. For the AI Bio Analysis feature, the bio text is sent to a third-party AI service (Google Gemini API) for processing, but not stored by us long-term.</p>
            
            <h2>3. How We Use Your Information</h2>
            <p>Any information provided through the contact form (e.g., name, email, message) is used solely to respond to your inquiries. Public TikTok data is retrieved and displayed for informational purposes only. Bio text sent for AI analysis is used solely to generate the analysis and is not used for other purposes by this tool.</p>
            
            <h2>4. Data Sharing</h2>
            <p>We do not sell, trade, or share your personal information with third parties, except as required by law or for the functioning of the AI Bio Analysis feature (bio text is sent to Google's Gemini API). Public TikTok data is sourced via a third-party API and is not stored by us.</p>
            
            <h2>5. Cookies and Tracking</h2>
            <p>This site uses local storage to track page visits for analytics purposes (e.g., visit counter). No cookies or third-party trackers are used beyond standard analytics and the AI service API calls.</p>
            
            <h2>6. Contact Us</h2>
            <p>If you have any questions about this Privacy Policy, please contact us via <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a> or the contact form.</p>
          </article>
          <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
        </section>

        <section class="page-content" id="terms-page" aria-labelledby="terms-of-service-page-heading">
          <h1 id="terms-of-service-page-heading">Terms of Service</h1>
          <article class="about-section">
            <h2>1. Acceptance of Terms</h2>
            <p>By using the TikTok Account Location Finder, you agree to these Terms of Service. If you do not agree, please do not use the tool.</p>
            
            <h2>2. Use of the Tool</h2>
            <p>This tool is for educational and research purposes only. You agree to use it responsibly and respect the privacy of others. Do not use the tool for illegal activities or to harm others. The AI-generated analysis is for informational purposes and should be interpreted with discretion.</p>
            
            <h2>3. Data Accuracy</h2>
            <p>The tool fetches publicly available TikTok data via a third-party API. We do not guarantee the accuracy or completeness of the data provided, including AI-generated bio analysis.</p>
            
            <h2>4. Intellectual Property</h2>
            <p>All content, design, and code on this site are the property of the creator (@_moro.__). Unauthorized copying or distribution is prohibited.</p>
            
            <h2>5. Limitation of Liability</h2>
            <p>We are not liable for any damages arising from the use of this tool. Use it at your own risk.</p>
            
            <h2>6. Changes to Terms</h2>
            <p>We may update these Terms of Service at any time. Continued use of the tool constitutes acceptance of the updated terms.</p>
            
            <h2>7. Contact Us</h2>
            <p>If you have any questions about these Terms, please contact us via <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a> or the contact form.</p>
          </article>
          <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
        </section>
    </main>
    
    <footer class="footer"> <nav class="footer-nav" aria-label="Footer navigation"> <a href="#" onclick="showPage('main-page'); return false;">Home</a>
        <a href="#" onclick="showPage('about-page'); return false;">About Us</a>
        <a href="#" onclick="showPage('contact-page'); return false;">Contact Us</a>
        <a href="#" onclick="showPage('privacy-page'); return false;">Privacy Policy</a>
        <a href="#" onclick="showPage('terms-page'); return false;">Terms of Service</a>
      </nav>
    </footer>

  </div> <script>
    // Base title for the website
    const baseTitle = "TikTok Account Location Finder | Full Profile Details & AI Analysis";

    // ===== DOMAIN RESTRICTION (Keep as is) ===== //
    if (window.location.hostname !== 'tikip.us' && window.location.hostname !== 'localhost' && !window.location.hostname.endsWith('.preview.app') ) { // Added localhost and preview for dev
      const resultDivAuthError = document.createElement('div'); 
      resultDivAuthError.id = 'result_auth_error';
      resultDivAuthError.style.position = 'fixed';
      resultDivAuthError.style.top = '0';
      resultDivAuthError.style.left = '0';
      resultDivAuthError.style.width = '100%';
      resultDivAuthError.style.height = '100%';
      resultDivAuthError.style.backgroundColor = 'rgba(0,0,0,0.95)';
      resultDivAuthError.style.color = 'white';
      resultDivAuthError.style.display = 'flex';
      resultDivAuthError.style.flexDirection = 'column';
      resultDivAuthError.style.alignItems = 'center';
      resultDivAuthError.style.justifyContent = 'center';
      resultDivAuthError.style.zIndex = '99999'; 
      resultDivAuthError.style.padding = '20px';
      resultDivAuthError.style.textAlign = 'center';
      resultDivAuthError.innerHTML = '<div style="background: #1a1a1a; padding: 30px; border-radius: 10px; border: 1px solid #ff444460; box-shadow: 0 0 20px rgba(255,0,0,0.6);"><h1>Unauthorized Domain</h1><p style="font-size: 1.2em; margin-top: 10px;">This application is only authorized to run on tikip.us.</p></div>';
      document.body.appendChild(resultDivAuthError);
      document.body.style.overflow = 'hidden'; 
      
      const mainContainer = document.querySelector('.container');
      if(mainContainer) mainContainer.style.display = 'none';
      console.error('Unauthorized domain. Application execution visually halted.');
    }

    // ===== THEME TOGGLE FUNCTIONALITY (REMOVED) ===== //
    // All JavaScript related to theme toggling has been removed.
    // The theme is now fixed to dark via CSS :root variables.

    // ===== PAGE NAVIGATION ===== //
    function showPage(pageId) {
      document.querySelectorAll('.page-content').forEach(page => {
        page.classList.remove('active');
      });
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add('active');
        const pageTitleElement = targetPage.querySelector('h1'); 
        if (pageTitleElement && pageId !== 'main-page') {
            document.title = pageTitleElement.textContent + " | TikTok Account Location Finder";
        } else {
            document.title = baseTitle; 
        }
      } else {
        console.warn(`Page with ID "${pageId}" not found. Defaulting to main page.`);
        const mainPage = document.getElementById('main-page');
        if(mainPage) mainPage.classList.add('active');
        document.title = baseTitle;
      }
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ===== CONTACT FORM SUBMISSION ===== //
    const contactSubmitButton = document.getElementById('contact-submit');
    if (contactSubmitButton) {
        contactSubmitButton.addEventListener('click', function(e) {
          e.preventDefault();
          const nameInput = document.getElementById('contact-name');
          const emailInput = document.getElementById('contact-email');
          const messageInput = document.getElementById('contact-message');
          
          const name = nameInput ? nameInput.value.trim() : '';
          const email = emailInput ? emailInput.value.trim() : '';
          const message = messageInput ? messageInput.value.trim() : '';
          
          const resultDiv = document.getElementById('result'); 

          if (name && email && message) {
            if (resultDiv) { // This will show message on main page's result div.
                            // Consider adding a message area specific to the contact form page.
                resultDiv.innerHTML = '<div class="message success-message">Thank you for your message! We will get back to you soon.</div>';
                resultDiv.style.display = 'block'; 
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                setTimeout(() => { 
                    if(resultDiv.innerHTML.includes("Thank you for your message")) { 
                        resultDiv.style.display = 'none'; 
                        resultDiv.innerHTML = ''; 
                    }
                }, 4000);
            } else {
                alert('Thank you for your message! We will get back to you soon.');
            }
            
            if(nameInput) nameInput.value = '';
            if(emailInput) emailInput.value = '';
            if(messageInput) messageInput.value = '';
          } else {
            if (resultDiv) { 
                resultDiv.innerHTML = '<div class="message error-message">Please fill in all fields in the contact form.</div>';
                resultDiv.style.display = 'block'; 
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 setTimeout(() => { 
                    if(resultDiv.innerHTML.includes("Please fill in all fields")) { 
                        resultDiv.style.display = 'none'; 
                        resultDiv.innerHTML = ''; 
                    }
                }, 4000);
            } else {
                 alert('Please fill in all fields in the contact form.');
            }
          }
        });
    }


    // ===== COUNTRY FLAG MAPPING ===== //
    function getCountryFlag(country) {
      const flagMap = {
        'AD': '🇦🇩', 'Andorra': '🇦🇩', 'AE': '🇦🇪', 'United Arab Emirates': '🇦🇪', 'AF': '🇦🇫', 'Afghanistan': '🇦🇫',
        'AG': '🇦🇬', 'Antigua and Barbuda': '🇦🇬', 'AI': '🇦🇮', 'Anguilla': '🇦🇮', 'AL': '🇦🇱', 'Albania': '🇦🇱',
        'AM': '🇦🇲', 'Armenia': '🇦🇲', 'AO': '🇦🇴', 'Angola': '🇦🇴', 'AQ': '🇦🇶', 'Antarctica': '🇦🇶',
        'AR': '🇦🇷', 'Argentina': '🇦🇷', 'AS': '🇦🇸', 'American Samoa': '🇦🇸', 'AT': '🇦🇹', 'Austria': '🇦🇹',
        'AU': '🇦🇺', 'Australia': '🇦🇺', 'AW': '🇦🇼', 'Aruba': '🇦🇼', 'AX': '🇦🇽', 'Åland Islands': '🇦🇽',
        'AZ': '🇦🇿', 'Azerbaijan': '🇦🇿', 'BA': '🇧🇦', 'Bosnia and Herzegovina': '🇧🇦', 'BB': '🇧🇧', 'Barbados': '🇧🇧',
        'BD': '🇧🇩', 'Bangladesh': '🇧🇩', 'BE': '🇧🇪', 'Belgium': '🇧🇪', 'BF': '🇧🇫', 'Burkina Faso': '🇧🇫',
        'BG': '🇧🇬', 'Bulgaria': '🇧🇬', 'BH': '🇧🇭', 'Bahrain': '🇧🇭', 'BI': '🇧🇮', 'Burundi': '🇧🇮',
        'BJ': '🇧🇯', 'Benin': '🇧🇯', 'BL': '🇧🇱', 'Saint Barthélemy': '🇧🇱', 'BM': '🇧🇲', 'Bermuda': '🇧🇲',
        'BN': '🇧🇳', 'Brunei Darussalam': '🇧🇳', 'BO': '�🇴', 'Bolivia': '🇧🇴', 'BQ': '🇧🇶', 'Bonaire, Sint Eustatius and Saba': '🇧🇶',
        'BR': '🇧🇷', 'Brazil': '🇧🇷', 'BS': '🇧🇸', 'Bahamas': '🇧🇸', 'BT': '🇧🇹', 'Bhutan': '🇧🇹',
        'BV': '🇧🇻', 'Bouvet Island': '🇧🇻', 'BW': '🇧🇼', 'Botswana': '🇧🇼', 'BY': '🇧🇾', 'Belarus': '🇧🇾',
        'BZ': '🇧🇿', 'Belize': '🇧🇿', 'CA': '🇨🇦', 'Canada': '🇨🇦', 'CC': '🇨🇨', 'Cocos (Keeling) Islands': '🇨🇨',
        'CD': '🇨🇩', 'Congo, Democratic Republic of the': '🇨🇩', 'CF': '🇨🇫', 'Central African Republic': '🇨🇫', 'CG': '🇨🇬', 'Congo, Republic of the': '🇨🇬',
        'CH': '🇨🇭', 'Switzerland': '🇨🇭', 'CI': '🇨🇮', "Côte D'Ivoire": '🇨🇮', 'CK': '🇨🇰', 'Cook Islands': '🇨🇰',
        'CL': '🇨🇱', 'Chile': '🇨🇱', 'CM': '🇨🇲', 'Cameroon': '🇨🇲', 'CN': '🇨🇳', 'China': '🇨🇳',
        'CO': '🇨🇴', 'Colombia': '🇨🇴', 'CR': '🇨🇷', 'Costa Rica': '🇨🇷', 'CU': '🇨🇺', 'Cuba': '🇨🇺',
        'CV': '🇨🇻', 'Cape Verde': '🇨🇻', 'CW': '🇨🇼', 'Curaçao': '🇨🇼', 'CX': '🇨🇽', 'Christmas Island': '🇨🇽',
        'CY': '🇨🇾', 'Cyprus': '🇨🇾', 'CZ': '🇨🇿', 'Czech Republic': '🇨🇿', 'DE': '🇩🇪', 'Germany': '🇩🇪',
        'DJ': '🇩🇯', 'Djibouti': '🇩🇯', 'DK': '🇩🇰', 'Denmark': '🇩🇰', 'DM': '🇩🇲', 'Dominica': '🇩🇲',
        'DO': '🇩🇴', 'Dominican Republic': '🇩🇴', 'DZ': '🇩🇿', 'Algeria': '🇩🇿', 'EC': '🇪🇨', 'Ecuador': '🇪🇨',
        'EE': '🇪🇪', 'Estonia': '🇪🇪', 'EG': '🇪🇬', 'Egypt': '🇪🇬', 'EH': '🇪🇭', 'Western Sahara': '🇪🇭',
        'ER': '🇪🇷', 'Eritrea': '🇪🇷', 'ES': '🇪🇸', 'Spain': '🇪🇸', 'ET': '🇪🇹', 'Ethiopia': '🇪🇹', 
        'FI': '🇫🇮', 'Finland': '🇫🇮', 'FJ': '🇫🇯', 'Fiji': '🇫🇯', 'FK': '🇫🇰', 'Falkland Islands (Malvinas)': '🇫🇰',
        'FM': '🇫🇲', 'Micronesia, Federated States of': '🇫🇲', 'FO': '🇫🇴', 'Faroe Islands': '🇫🇴', 'FR': '🇫🇷', 'France': '🇫🇷',
        'GA': '🇬🇦', 'Gabon': '🇬🇦', 'GB': '🇬🇧', 'United Kingdom': '🇬🇧', 'UK': '🇬🇧', 'GD': '🇬🇩', 'Grenada': '🇬🇩',
        'GE': '🇬🇪', 'Georgia': '🇬🇪', 'GF': '🇬🇫', 'French Guiana': '🇬🇫', 'GG': '🇬🇬', 'Guernsey': '🇬🇬',
        'GH': '🇬🇭', 'Ghana': '🇬🇭', 'GI': '🇬🇮', 'Gibraltar': '🇬🇮', 'GL': '🇬🇱', 'Greenland': '🇬🇱',
        'GM': '🇬🇲', 'Gambia': '🇬🇲', 'GN': '🇬🇳', 'Guinea': '🇬🇳', 'GP': '🇬🇵', 'Guadeloupe': '🇬🇵',
        'GQ': '🇬🇶', 'Equatorial Guinea': '🇬🇶', 'GR': '🇬🇷', 'Greece': '🇬🇷', 'GS': '🇬🇸', 'South Georgia and the South Sandwich Islands': '🇬🇸',
        'GT': '🇬🇹', 'Guatemala': '🇬🇹', 'GU': '🇬🇺', 'Guam': '🇬🇺', 'GW': '🇬🇼', 'Guinea-Bissau': '🇬🇼',
        'GY': '🇬🇾', 'Guyana': '🇬🇾', 'HK': '🇭🇰', 'Hong Kong': '🇭🇰', 'HM': '🇭🇲', 'Heard Island and McDonald Islands': '🇭🇲', 
        'HN': '🇭🇳', 'Honduras': '🇭🇳', 'HR': '🇭🇷', 'Croatia': '🇭🇷', 'HT': '🇭🇹', 'Haiti': '🇭🇹',
        'HU': '🇭🇺', 'Hungary': '🇭🇺', 'ID': '🇮🇩', 'Indonesia': '🇮🇩', 'IE': '🇮🇪', 'Ireland': '🇮🇪',
        'IL': '🇮🇱', 'Israel': '🇮🇱', 'IM': '🇮🇲', 'Isle of Man': '🇮🇲', 'IN': '🇮🇳', 'India': '🇮🇳',
        'IO': '🇮🇴', 'British Indian Ocean Territory': '🇮🇴', 'IQ': '🇮🇶', 'Iraq': '🇮🇶', 'IR': '🇮🇷', 'Iran, Islamic Republic of': '🇮🇷',
        'IS': '🇮🇸', 'Iceland': '🇮🇸', 'IT': '🇮🇹', 'Italy': '🇮🇹', 'JE': '🇯🇪', 'Jersey': '🇯🇪',
        'JM': '🇯🇲', 'Jamaica': '🇯🇲', 
        'JO': '🇯🇴', 'Jordan': '🇯🇴', 'JP': '🇯🇵', 'Japan': '🇯🇵', 'KE': '🇰🇪', 'Kenya': '🇰🇪',
        'KG': '🇰🇬', 'Kyrgyzstan': '🇰🇬', 'KH': '🇰🇭', 'Cambodia': '🇰🇭', 'KI': '🇰🇮', 'Kiribati': '🇰🇮',
        'KM': '🇰🇲', 'Comoros': '🇰🇲', 'KN': '🇰🇳', 'Saint Kitts and Nevis': '🇰🇳', 'KP': '🇰🇵', "Korea, Democratic People's Republic of": '🇰🇵',
        'KR': '🇰🇷', 'Korea, Republic of': '🇰🇷', 
        'KW': '🇰🇼', 'Kuwait': '🇰🇼', 'KY': '🇰🇾', 'Cayman Islands': '🇰🇾',
        'KZ': '🇰🇿', 'Kazakhstan': '🇰🇿', 'LA': '🇱🇦', "Lao People's Democratic Republic": '🇱🇦', 'LB': '🇱🇧', 'Lebanon': '🇱🇧',
        'LC': '🇱🇨', 'Saint Lucia': '🇱🇨', 'LI': '🇱🇮', 'Liechtenstein': '🇱🇮', 'LK': '🇱🇰', 'Sri Lanka': '🇱🇰',
        'LR': '🇱🇷', 'Liberia': '🇱🇷', 'LS': '🇱🇸', 'Lesotho': '🇱🇸', 'LT': '🇱🇹', 'Lithuania': '🇱🇹',
        'LU': '🇱🇺', 'Luxembourg': '🇱🇺', 'LV': '🇱🇻', 'Latvia': '🇱🇻', 'LY': '🇱🇾', 'Libya': '🇱🇾',
        'MA': '🇲🇦', 'Morocco': '🇲🇦', 'MC': '🇲🇨', 'Monaco': '🇲🇨', 'MD': '🇲🇩', 'Moldova, Republic of': '🇲🇩',
        'ME': '🇲🇪', 'Montenegro': '🇲🇪', 'MF': '🇲🇫', 'Saint Martin (French part)': '🇲🇫', 'MG': '🇲🇬', 'Madagascar': '🇲🇬',
        'MH': '🇲🇭', 'Marshall Islands': '🇲🇭', 'MK': '🇲🇰', 'North Macedonia': '🇲🇰', 'ML': '🇲🇱', 'Mali': '🇲🇱',
        'MM': '🇲🇲', 'Myanmar': '🇲🇲', 'MN': '🇲🇳', 'Mongolia': '🇲🇳', 'MO': '🇲🇴', 'Macao': '🇲🇴',
        'MP': '🇲🇵', 'Northern Mariana Islands': '🇲🇵', 'MQ': '🇲🇶', 'Martinique': '🇲🇶', 'MR': '🇲🇷', 'Mauritania': '🇲🇷',
        'MS': '🇲🇸', 'Montserrat': '🇲🇸', 'MT': '🇲🇹', 'Malta': '🇲🇹', 'MU': '🇲🇺', 'Mauritius': '🇲🇺',
        'MV': '🇲🇻', 'Maldives': '🇲🇻', 'MW': '🇲🇼', 'Malawi': '🇲🇼', 'MX': '🇲🇽', 'Mexico': '🇲🇽',
        'MY': '🇲🇾', 'Malaysia': '🇲🇾', 'MZ': '🇲🇿', 'Mozambique': '🇲🇿', 'NA': '🇳🇦', 'Namibia': '🇳🇦',
        'NC': '🇳🇨', 'New Caledonia': '🇳🇨', 'NE': '🇳🇪', 'Niger': '🇳🇪', 'NF': '🇳🇫', 'Norfolk Island': '🇳🇫',
        'NG': '🇳🇬', 'Nigeria': '🇳🇬', 'NI': '🇳🇮', 'Nicaragua': '🇳🇮', 'NL': '🇳🇱', 'Netherlands': '🇳🇱',
        'NO': '🇳🇴', 'Norway': '🇳🇴', 'NP': '🇳🇵', 'Nepal': '🇳🇵', 'NR': '🇳🇷', 'Nauru': '🇳🇷',
        'NU': '🇳🇺', 'Niue': '🇳🇺', 'NZ': '🇳🇿', 'New Zealand': '🇳🇿', 'OM': '🇴🇲', 'Oman': '🇴🇲',
        'PA': '🇵🇦', 'Panama': '🇵🇦', 'PE': '🇵🇪', 'Peru': '🇵🇪', 'PF': '🇵🇫', 'French Polynesia': '🇵🇫',
        'PG': '🇵🇬', 'Papua New Guinea': '🇵🇬', 'PH': '🇵🇭', 'Philippines': '🇵🇭', 'PK': '🇵🇰', 'Pakistan': '🇵🇰',
        'PL': '🇵🇱', 'Poland': '🇵🇱', 'PM': '🇵🇲', 'Saint Pierre and Miquelon': '🇵🇲', 'PN': '🇵🇳', 'Pitcairn': '🇵🇳',
        'PR': '🇵🇷', 'Puerto Rico': '🇵🇷', 'PS': '🇵🇸', 'Palestine, State of': '🇵🇸', 'PT': '🇵🇹', 'Portugal': '🇵🇹',
        'PW': '🇵🇼', 'Palau': '🇵🇼', 'PY': '🇵🇾', 'Paraguay': '🇵🇾', 'QA': '🇶🇦', 'Qatar': '🇶🇦',
        'RE': '🇷🇪', 'Réunion': '🇷🇪', 'RO': '🇷🇴', 'Romania': '🇷🇴', 'RS': '🇷🇸', 'Serbia': '🇷🇸',
        'RU': '🇷🇺', 'Russian Federation': '🇷🇺', 'Russia': '🇷🇺', 'RW': '🇷🇼', 'Rwanda': '🇷🇼', 'SA': '🇸🇦', 'Saudi Arabia': '🇸🇦',
        'SB': '🇸🇧', 'Solomon Islands': '🇸🇧', 'SC': '🇸🇨', 'Seychelles': '🇸🇨', 'SD': '🇸🇩', 'Sudan': '🇸🇩',
        'SE': '🇸🇪', 'Sweden': '🇸🇪', 'SG': '🇸🇬', 'Singapore': '🇸🇬', 'SH': '🇸🇭', 'Saint Helena, Ascension and Tristan da Cunha': '🇸🇭',
        'SI': '🇸🇮', 'Slovenia': '🇸🇮', 'SJ': '🇸🇯', 'Svalbard and Jan Mayen': '🇸🇯', 'SK': '🇸🇰', 'Slovakia': '🇸🇰',
        'SL': '🇸🇱', 'Sierra Leone': '🇸🇱', 'SM': '🇸🇲', 'San Marino': '🇸🇲', 'SN': '🇸🇳', 'Senegal': '🇸🇳',
        'SO': '🇸🇴', 'Somalia': '🇸🇴', 'SR': '🇸🇷', 'Suriname': '🇸🇷', 'SS': '🇸🇸', 'South Sudan': '🇸🇸',
        'ST': '🇸🇹', 'Sao Tome and Principe': '🇸🇹', 'SV': '🇸🇻', 'El Salvador': '🇸🇻', 'SX': '🇸🇽', 'Sint Maarten (Dutch part)': '🇸🇽',
        'SY': '🇸🇾', 'Syrian Arab Republic': '🇸🇾', 'SZ': '🇸🇿', 'Eswatini': '🇸🇿', 'TC': '🇹🇨', 'Turks and Caicos Islands': '🇹🇨',
        'TD': '🇹🇩', 'Chad': '🇹🇩', 'TF': '🇹🇫', 'French Southern Territories': '🇹🇫', 'TG': '🇹🇬', 'Togo': '🇹🇬',
        'TH': '🇹🇭', 'Thailand': '🇹🇭', 'TJ': '🇹🇯', 'Tajikistan': '🇹🇯', 'TK': '🇹🇰', 'Tokelau': '🇹🇰',
        'TL': '🇹🇱', 'Timor-Leste': '🇹🇱', 'TM': '🇹🇲', 'Turkmenistan': '🇹🇲', 'TN': '🇹🇳', 'Tunisia': '🇹🇳',
        'TO': '🇹🇴', 'Tonga': '🇹🇴', 'TR': '🇹🇷', 'Turkey': '🇹🇷', 'TT': '🇹🇹', 'Trinidad and Tobago': '🇹🇹',
        'TV': '🇹🇻', 'Tuvalu': '🇹🇻', 'TW': '🇹🇼', 'Taiwan, Province of China': '🇹🇼', 'TZ': '🇹🇿', 'Tanzania, United Republic of': '🇹🇿',
        'UA': '🇺🇦', 'Ukraine': '🇺🇦', 'UG': '🇺🇬', 'Uganda': '🇺🇬', 'UM': '🇺🇲', 'United States Minor Outlying Islands': '🇺🇲',
        'US': '🇺🇸', 'United States': '🇺🇸', 'USA': '🇺🇸', 'UY': '🇺🇾', 'Uruguay': '🇺🇾', 'UZ': '🇺🇿', 'Uzbekistan': '🇺🇿',
        'VA': '🇻🇦', 'Holy See (Vatican City State)': '🇻🇦', 'VC': '🇻🇨', 'Saint Vincent and the Grenadines': '🇻🇨', 'VE': '🇻🇪', 'Venezuela, Bolivarian Republic of': '🇻🇪',
        'VG': '🇻🇬', 'Virgin Islands, British': '🇻🇬', 'VI': '🇻🇮', 'Virgin Islands, U.S.': '🇻🇮', 'VN': '🇻🇳', 'Viet Nam': '🇻🇳',
        'VU': '🇻🇺', 'Vanuatu': '🇻🇺', 'WF': '🇼🇫', 'Wallis and Futuna': '🇼🇫', 'WS': '🇼🇸', 'Samoa': '🇼🇸',
        'XK': '🇽🇰', 'Kosovo': '🇽🇰', 'YE': '🇾🇪', 'Yemen': '🇾🇪', 'YT': '🇾🇹', 'Mayotte': '🇾🇹',
        'ZA': '🇿🇦', 'South Africa': '🇿🇦', 'ZM': '🇿🇲', 'Zambia': '🇿🇲', 'ZW': '🇿🇼', 'Zimbabwe': '🇿🇼'
      };
      
      if (!country) return '🌐'; 
      const normalizedCountry = String(country).trim(); 
      
      for (const key in flagMap) {
        if (key.toLowerCase() === normalizedCountry.toLowerCase()) {
          return flagMap[key];
        }
      }
      
      for (const key in flagMap) {
        if (normalizedCountry.toLowerCase().includes(key.toLowerCase()) && key.length > 3) { 
          return flagMap[key];
        }
      }
      
      return '🌐'; 
    }

    const getResultsBtn = document.getElementById('getResultsBtn');
    const supportBtn = document.getElementById('supportBtn');

    if (getResultsBtn) {
        getResultsBtn.addEventListener('click', lookupUser);
    }
    if (supportBtn) {
        supportBtn.addEventListener('click', function() {
          window.open('https://ko-fi.com/moroccan', '_blank');
        });
    }

    let currentBioText = ""; 

    async function analyzeBioWithGemini(bioText) {
        const resultDiv = document.getElementById('result'); 
        const profileCardBody = resultDiv.querySelector('.profile-card-body');
        
        let analysisResultDiv = document.getElementById('bioAnalysisResult');
        if (!analysisResultDiv && profileCardBody) {
            analysisResultDiv = document.createElement('div');
            analysisResultDiv.id = 'bioAnalysisResult';
            profileCardBody.appendChild(analysisResultDiv); 
        } else if (analysisResultDiv) {
            analysisResultDiv.innerHTML = ''; 
        }

        if (!analysisResultDiv) {
            console.error("Could not find or create bioAnalysisResult div");
            return;
        }
        
        const loadingContainer = document.createElement('div');
        loadingContainer.className = 'loading-spinner-container inline';
        loadingContainer.innerHTML = '<div class="loading-spinner"></div> Analyzing bio with AI...';
        
        const aiButton = document.getElementById('aiAnalyzeBioBtn');
        if(aiButton && aiButton.parentNode) {
            aiButton.parentNode.insertBefore(loadingContainer, aiButton.nextSibling);
        } else if (profileCardBody) {
             profileCardBody.appendChild(loadingContainer); 
        }

        const prompt = `Analyze the following TikTok user bio and provide a brief summary (1-2 sentences), identify key themes or topics mentioned (as a comma-separated list or bullet points), and suggest the overall sentiment (e.g., positive, neutral, negative, humorous, professional). Bio: "${bioText}"`;
        let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
        const payload = { contents: chatHistory };
        const apiKey = ""; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({ error: { message: "Unknown API error" } }));
                console.error("Gemini API Error Response:", errorData);
                throw new Error(`Gemini API request failed: ${errorData.error?.message || response.statusText}`);
            }

            const result = await response.json();
            loadingContainer.remove(); 

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const analysisText = result.candidates[0].content.parts[0].text;
                
                const sanitizedAnalysis = analysisText
                    .replace(/</g, "&lt;") 
                    .replace(/>/g, "&gt;")
                    .replace(/\n\n/g, '<br><br>') 
                    .replace(/\n/g, '<br>')     
                    .replace(/\* (.*?)(<br>|$)/g, '<p style="margin-left: 20px; margin-bottom: 3px;">&bull; $1</p>');

                analysisResultDiv.innerHTML = `<h4>✨ AI Bio Analysis:</h4>${sanitizedAnalysis}`;
            } else {
                console.error("Unexpected Gemini API response structure:", result);
                analysisResultDiv.innerHTML = `<h4>✨ AI Bio Analysis:</h4><p class="error-message">Could not retrieve analysis. The response from the AI was not in the expected format.</p>`;
            }
        } catch (error) {
            console.error("Error calling Gemini API:", error);
            loadingContainer.remove(); 
            analysisResultDiv.innerHTML = `<h4>✨ AI Bio Analysis:</h4><p class="error-message">Error analyzing bio: ${error.message}. Please try again later.</p>`;
        }
    }

    function lookupUser() {
      const usernameInput = document.getElementById('username');
      const resultDiv = document.getElementById('result');
      const currentGetResultsBtn = document.getElementById('getResultsBtn'); 

      const username = usernameInput ? usernameInput.value.trim() : '';
      currentBioText = ""; 
      
      if (!username) {
        if(resultDiv) {
            resultDiv.innerHTML = '<div class="message error-message">Please enter a valid TikTok username.</div>';
            resultDiv.style.display = 'block';
        }
        return;
      }

      if(currentGetResultsBtn) currentGetResultsBtn.disabled = true;
      if(resultDiv) {
          resultDiv.innerHTML = '<div class="loading-spinner-container"><div class="loading-spinner"></div> Loading profile data...</div>';
          resultDiv.style.display = 'block';
      }
      
      const apiUrl = `https://corsproxy.io/?https://jaefu3p97g.execute-api.us-east-1.amazonaws.com/default/smttab?username=${encodeURIComponent(username)}`;
      console.log("Attempting to fetch data from:", apiUrl);

      fetch(apiUrl)
        .then(response => {
          console.log("Received response status:", response.status);
          if (!response.ok) {
            return response.text().then(text => {
                let errorMsg = `API request failed with status ${response.status}`;
                if (response.status === 429) errorMsg = 'Rate limit exceeded. Please try again later.';
                else if (response.status === 404) errorMsg = 'User not found or API endpoint issue.';
                else {
                    try {
                        const errData = JSON.parse(text);
                        errorMsg = errData.message || errData.error || text || errorMsg;
                    } catch (e) {
                        errorMsg = text || errorMsg; 
                    }
                }
                console.error("API Error:", errorMsg, "Raw text:", text);
                throw new Error(errorMsg); 
            });
          }
          return response.json();
        })
        .then(data => {
          console.log("Full API Response Data:", JSON.stringify(data, null, 2)); 
          
          const apiProfile = data.profile; 

          if (apiProfile && typeof apiProfile === 'object') { 
            const sanitize = (str) => {
                if (typeof str !== 'string') return str === null || str === undefined ? '' : String(str); 
                const temp = document.createElement('div');
                temp.textContent = str;
                return temp.innerHTML; 
            };

            let foundProfilePhotoUrl = '';
            const avatarKeys = ['Profile Photo', 'Avatar URL', 'avatar_url', 'avatarUrl', 'picture', 'profileImageUrl', 'profile_pic_url', 'profile_photo']; 
            for (const key of avatarKeys) {
                if (apiProfile[key] && typeof apiProfile[key] === 'string' && apiProfile[key].trim() !== '') {
                    foundProfilePhotoUrl = apiProfile[key];
                    console.log(`Found avatar URL using key: ${key}`);
                    break; 
                }
            }
            const profilePhoto = foundProfilePhotoUrl ? sanitize(foundProfilePhotoUrl) : '';

            let rawUsernameFromAPI = apiProfile.Username || username; 
            if (typeof rawUsernameFromAPI === 'string' && rawUsernameFromAPI.startsWith('@')) {
                rawUsernameFromAPI = rawUsernameFromAPI.substring(1);
            }
            const displayUsername = sanitize(rawUsernameFromAPI);
            const displayNickname = apiProfile.Nickname ? sanitize(apiProfile.Nickname) : displayUsername;

            let profileDetailsHtml = '';
            let hasBio = false;

            for (const key in apiProfile) {
                if (Object.hasOwnProperty.call(apiProfile, key)) {
                    if (key === 'Nickname' || key === 'Username' || avatarKeys.includes(key) || apiProfile[key] == null) { 
                        continue;
                    }

                    let value = apiProfile[key];
                    let displayKey = key.replace(/([A-Z])/g, ' $1').trim(); 

                    if (key === 'Bio') {
                        hasBio = true;
                        currentBioText = String(value); 
                        value = sanitize(currentBioText).replace(/\n/g, '<br>'); 
                         profileDetailsHtml += `
                        <div class="profile-info-row bio-row">
                          <span class="info-label">${sanitize(displayKey)}:</span>
                          <p class="info-value bio-text" id="userBioText">${value || 'N/A'}</p>
                        </div>`;
                    } else if (key === 'Country' || key === 'Region') { 
                        value = sanitize(String(value));
                        profileDetailsHtml += `
                        <div class="profile-info-row">
                          <span class="info-label">${sanitize(displayKey)}:</span>
                          <span class="info-value">${getCountryFlag(value)} ${value || 'N/A'}</span>
                        </div>`;
                    } else if (typeof value === 'number' && (key.toLowerCase().includes('follower') || key.toLowerCase().includes('following') || key.toLowerCase().includes('like') || key.toLowerCase().includes('video'))) {
                        value = Number(value).toLocaleString(); 
                         profileDetailsHtml += `
                        <div class="profile-info-row">
                          <span class="info-label">${sanitize(displayKey)}:</span>
                          <span class="info-value">${value}</span>
                        </div>`;
                    } else if (typeof value === 'boolean') {
                        value = value ? 'Yes' : 'No'; 
                         profileDetailsHtml += `
                        <div class="profile-info-row">
                          <span class="info-label">${sanitize(displayKey)}:</span>
                          <span class="info-value">${value}</span>
                        </div>`;
                    }
                    else { 
                         profileDetailsHtml += `
                        <div class="profile-info-row">
                          <span class="info-label">${sanitize(displayKey)}:</span>
                          <span class="info-value">${sanitize(String(value)) || 'N/A'}</span>
                        </div>`;
                    }
                }
            }
            
            let aiButtonHtml = '';
            if (hasBio && currentBioText.trim() !== "") {
                aiButtonHtml = `<button id="aiAnalyzeBioBtn" class="ai-analyze-btn">✨ Analyze Bio with AI</button>`;
            }

            let formattedData = `
              <article class="profile-card" aria-labelledby="profile-card-heading-${displayUsername}"> <h2 id="profile-card-heading-${displayUsername}" class="sr-only">Profile details for ${displayNickname} (@${displayUsername})</h2> <div class="profile-card-header">
                  ${profilePhoto ? `<img src="${profilePhoto}" alt="Profile photo of ${displayNickname}" class="profile-photo-enhanced" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''} <div class="profile-photo-placeholder" style="${profilePhoto ? 'display:none;' : 'display:flex;'}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                  </div>
                  <div class="profile-identity">
                    <h3 class="profile-nickname">${displayNickname}</h3>
                    <p class="profile-username-display">@${displayUsername}</p> 
                  </div>
                </div>
                <div class="profile-card-body">
                  ${profileDetailsHtml}
                  ${aiButtonHtml}
                  <div id="bioAnalysisResult"></div>
                </div>
                <div class="profile-card-footer">
                  <span class="message success-message">Profile data retrieved successfully!</span>
                </div>
              </article>
            `;
            if(resultDiv) {
                resultDiv.innerHTML = formattedData;
                const aiButton = document.getElementById('aiAnalyzeBioBtn');
                if (aiButton) {
                    aiButton.addEventListener('click', () => {
                        if (currentBioText && currentBioText.trim() !== "") {
                           analyzeBioWithGemini(currentBioText);
                        } else {
                            const bioAnalysisDiv = document.getElementById('bioAnalysisResult');
                            if(bioAnalysisDiv) bioAnalysisDiv.innerHTML = '<p class="error-message">No bio text found to analyze.</p>';
                        }
                    });
                }
            }
          } else {
            console.warn("Profile data ('data.profile') is missing or not an object in the API response.", "Received data:", data);
            if(resultDiv) resultDiv.innerHTML = '<div class="message error-message">Profile data not found or is incomplete. The API might be down, the user may not exist, or the response format is unexpected.</div>';
          }
        })
        .catch(error => {
          console.error("Fetch or processing error:", error);
          if(resultDiv) resultDiv.innerHTML = `<div class="message error-message">Error: ${error.message || 'Failed to fetch profile data'}. Please check the username and try again. The API service might be temporarily unavailable.</div>`;
        })
        .finally(() => {
          if(currentGetResultsBtn) currentGetResultsBtn.disabled = false;
        });
    }

    const usernameInputGlobal = document.getElementById('username'); 
    if (usernameInputGlobal) {
      usernameInputGlobal.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault(); 
          lookupUser();
        }
      });
    }

  </script>
</body>
</html>
