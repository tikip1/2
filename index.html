<!DOCTYPE html>
<html lang="en">
<head>
  <title>TikTok Account Location Finder | Full Profile Details</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Our TikTok Location Finder helps you discover TikTok account locations by username. Get full profile details, Free, accurate, and easy to use!">
  <meta name="keywords" content="TikTok location finder, tiktok profile lookup, tiktok lookup, tiktok account search, find TikTok user location, TikTok account location, TikTok username location, FAQ TikTok tool, About TikTok location tool, TikTok geolocation, TikTok user location search, Locate TikTok account by username, TikTok profile location, Free TikTok location finder, How to find TikTok user location, TikTok account details, TikTok stats checker">
  <meta name="author" content="@mo.or__">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tikip.us/"/>
  <meta property="og:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta property="og:description" content="Use our free TikTok Location Finder to get full profile details, including location, by username. Learn more about the tool and find answers in our FAQ.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tikip.us">
  <meta property="og:image" content="https://tikip.us/favicon.png">
  <meta property="og:site_name" content="TikTok Location Finder">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@mo.or__">
  <meta name="twitter:title" content="TikTok Account Location Finder | Full Profile Details & FAQ">
  <meta name="twitter:description" content="Free tool to find TikTok user locations and full profile details by username. Check out our FAQ and learn more about how it works.">
  <meta name="twitter:image" content="https://tikip.us/favicon.png">
  <meta content="Global" name="distribution"/>
  <meta content="General" name="rating"/>
  <meta content="en" http-equiv="content-language"/>
  <meta content="Turkey" name="geo.country"/>
  <meta content="en_US" property="og:locale"/>
  <meta content="en_UK" property="og:locale:alternate"/>
  <meta content="Turkey" name="geo.placename"/>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HTPQL6DM82"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HTPQL6DM82');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6346556035067219"
     crossorigin="anonymous"></script>
  <meta name="google-site-verification" content="B3Dexm1A96g9Vj5uQ3LjOOsA-RxFqSwca_G0LrOchB0" />
  <meta name="monetag" content="caa90b8bc2e2b44cb2ca5427c3072138">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/favicon.png">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "TikTok Account Location Finder & FAQ",
    "url": "https://tikip.us/",
    "description": "A free online tool to find TikTok account locations and full profile details by username. Includes an FAQ section for common questions.",
    "creator": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://tikip.us/?username={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "TikTok Account Location Finder",
    "applicationCategory": "SocialNetworkAnalysisTool",
    "operatingSystem": "Web",
    "browserRequirements": "Requires a modern web browser with JavaScript enabled.",
    "description": "Free web-based tool to retrieve public TikTok user profile details, including estimated location, bio, follower counts, and video statistics by username. Learn more about the tool and see our FAQ.",
    "url": "https://tikip.us/",
    "author": {
      "@type": "Person",
      "name": "@mo.or__"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  <style>
    :root {
      --primary-color: #007AFF;
      --primary-hover-color: #0056b3;
      --secondary-color: #6c757d;
      --success-color: #28a745;
      --danger-color: #dc3545;
      --danger-hover-color: #c82333;
      --light-bg: #F8F9FA;
      --dark-bg: #1A1A1A;
      --light-card-bg: #FFFFFF;
      --dark-card-bg: #242424;
      --light-text-color: #212529;
      --dark-text-color: #EAEAEA;
      --light-text-secondary: #6c757d;
      --dark-text-secondary: #A0A0A0;
      --light-border-color: #DEE2E6;
      --dark-border-color: #444444;
      --input-bg-light: #FFFFFF;
      --input-bg-dark: #2C2C2C;
      --font-family-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --box-shadow-sm: 0 .125rem .25rem rgba(0,0,0,.075);
      --box-shadow-md: 0 .5rem 1rem rgba(0,0,0,.1);
      --box-shadow-lg: 0 1rem 3rem rgba(0,0,0,.125);
      --border-radius: 0.5rem;
      --transition-speed: 0.2s;
    }
    body { background-color: var(--light-bg); color: var(--light-text-color); font-family: var(--font-family-sans-serif); display: flex; flex-direction: column; align-items: center; min-height: 100vh; line-height: 1.6; -webkit-text-size-adjust: 100%; transition: background-color var(--transition-speed) ease-in-out, color var(--transition-speed) ease-in-out; padding: 1rem; }
    .container { background-color: transparent; width: 100%; max-width: 720px; padding: 0 1rem; display: flex; flex-direction: column; align-items: center; }
    .theme-toggle { background-color: var(--light-card-bg); border: 1px solid var(--light-border-color); box-shadow: var(--box-shadow-sm); position: fixed; top: 1rem; right: 1rem; border-radius: 50%; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all var(--transition-speed) ease-in-out; z-index: 1000; }
    .theme-toggle svg { fill: var(--light-text-color); width: 22px; height: 22px; transition: fill var(--transition-speed) ease-in-out; }
    .theme-toggle:hover { transform: scale(1.1); box-shadow: var(--box-shadow-md); }
    .patriotic-text { color: var(--light-text-color); font-size: clamp(1rem, 3vw, 1.25rem); text-align: center; margin-bottom: 0.75rem; font-weight: 600; width: 100%; padding: 0.5rem 0; }
    h1 { color: var(--light-text-color); font-size: clamp(1.5rem, 5vw, 2rem); font-weight: 700; text-align: center; margin-bottom: 0.5rem; width: 100%; }
    .credit { color: var(--light-text-secondary); font-size: clamp(0.75rem, 2.5vw, 0.875rem); text-align: center; margin-bottom: 1.5rem; width: 100%; }
    .credit a { color: var(--primary-color); }
    .credit a:hover { text-decoration: underline; }
    input, button, textarea { font-family: inherit; font-size: 1rem; border-radius: var(--border-radius); transition: all var(--transition-speed) ease-in-out; }
    input { background-color: var(--input-bg-light); border: 1px solid var(--light-border-color); color: var(--light-text-color); box-shadow: var(--box-shadow-sm); width: 100%; padding: 0.75rem 1rem; margin-bottom: 1rem; -webkit-appearance: none; user-select: text; }
    input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm); }
    input::placeholder { color: var(--light-text-secondary); opacity: 0.7; }
    button { color: #FFFFFF; box-shadow: var(--box-shadow-sm); text-shadow: none; width: 100%; padding: 0.75rem 1rem; font-weight: 600; cursor: pointer; margin-bottom: 0.75rem; border: none; -webkit-tap-highlight-color: transparent; }
    button:active { transform: translateY(1px) scale(0.98); }
    #getResultsBtn { background: linear-gradient(145deg, var(--primary-color), var(--primary-hover-color)); }
    #getResultsBtn:hover, #getResultsBtn:focus { background: linear-gradient(145deg, var(--primary-hover-color), var(--primary-color)); box-shadow: var(--box-shadow-md); transform: translateY(-2px); }
    #supportBtn { background: linear-gradient(145deg, var(--danger-color), var(--danger-hover-color)); }
    #supportBtn:hover, #supportBtn:focus { background: linear-gradient(145deg, var(--danger-hover-color), var(--danger-color)); box-shadow: var(--box-shadow-md); transform: translateY(-2px); }
    #result { margin-top: 2rem; min-height: 50px; width: 100%; display: none; /* Initially hidden */ }
    .profile-card { background-color: var(--light-card-bg); border: 1px solid var(--light-border-color); box-shadow: var(--box-shadow-md); border-radius: var(--border-radius); overflow: hidden; width: 100%; margin-bottom: 1.5rem; }
    .profile-card-header { background-color: var(--light-bg); border-bottom: 1px solid var(--light-border-color); display: flex; align-items: center; padding: 1.25rem; }
    .profile-photo-enhanced, .profile-photo-placeholder { width: 72px; height: 72px; border-radius: 50%; object-fit: cover; margin-right: 1.25rem; border-width: 3px; border-style: solid; flex-shrink: 0; }
    .profile-photo-enhanced { border-color: var(--primary-color); }
    .profile-photo-placeholder { background-color: var(--light-bg); border-color: var(--light-border-color); display: flex; align-items: center; justify-content: center; }
    .profile-photo-placeholder svg { fill: var(--light-text-secondary); width: 36px; height: 36px; }
    .profile-identity { display: flex; flex-direction: column; align-items: flex-start; min-width: 0; gap: 0.1rem; }
    .profile-nickname { color: var(--light-text-color); font-size: clamp(1.25rem, 4vw, 1.5rem); font-weight: 600; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .profile-username-display { color: var(--light-text-secondary); font-size: clamp(0.875rem, 3vw, 1rem); margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .profile-card-body { padding: 0.75rem 1.25rem 1.25rem; }
    .profile-info-row { border-bottom: 1px solid var(--light-border-color); display: flex; justify-content: space-between; align-items: flex-start; padding: 0.75rem 0; font-size: clamp(0.875rem, 3vw, 0.95rem); }
    .profile-info-row:last-child { border-bottom: none; }
    .info-label { color: var(--light-text-secondary); font-weight: 500; margin-right: 1rem; flex-shrink: 0; }
    .info-value { color: var(--light-text-color); text-align: right; word-break: break-word; flex-grow: 1; min-width: 0; }
    .bio-row { flex-direction: column; align-items: flex-start; }
    .bio-row .info-label { margin-bottom: 0.5rem; }
    .bio-row .info-value.bio-text { color: var(--light-text-secondary); text-align: left; width: 100%; line-height: 1.5; font-size: clamp(0.8rem, 2.8vw, 0.9rem); }
    .profile-card-footer { background-color: var(--light-bg); border-top: 1px solid var(--light-border-color); padding: 1rem 1.25rem; text-align: center; }
    .message { padding: 0.75rem 1rem; border-radius: var(--border-radius); font-weight: 500; display: block; box-shadow: var(--box-shadow-sm); margin-top:1rem; text-align: center; }
    .message.success-message { color: var(--success-color); background-color: #e9f7ef; border: 1px solid var(--success-color); }
    .message.error-message { color: var(--danger-color); background-color: #fdecea; border: 1px solid var(--danger-color); }
    .loading-spinner-container { display: flex; align-items: center; justify-content: center; padding: 1.5rem; text-align: center; width: 100%; }
    .loading-spinner { border-top-color: var(--primary-color); display: inline-block; width: 24px; height: 24px; border: 3px solid rgba(0,0,0,0.1); border-radius: 50%; animation: spin 0.8s linear infinite; margin-right: 0.75rem; }
    main { width: 100%; display: flex; flex-direction: column; align-items: center; padding-bottom: 2rem; }
    .about-section, .page-content > .about-section, .footer { background-color: var(--light-card-bg); border: 1px solid var(--light-border-color); box-shadow: var(--box-shadow-md); margin-top: 2rem; padding: 1.25rem; border-radius: var(--border-radius); font-size: clamp(0.875rem, 3vw, 0.95rem); line-height: 1.7; width: 100%; }
    .page-content { display: none; width: 100%; margin-top: 2rem; }
    .page-content.active { display: block; }
    .page-content h1 { color: var(--primary-color); font-size: clamp(1.35rem, 4.5vw, 1.75rem); margin-bottom: 1.25rem; text-align:center; }
    .about-section h2 { color: var(--primary-color); font-size: clamp(1.1rem, 3.5vw, 1.25rem); margin-bottom: 0.75rem; font-weight: 600; }
    .about-section p { color: var(--light-text-secondary); margin-bottom: 0.75rem; }
    .about-section p:last-child { margin-bottom: 0; }
    .dm-link { color: var(--primary-color); }
    .dm-link:hover { text-decoration: underline; }
    .footer { text-align: center; padding: 1.5rem; }
    .footer-nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem 1.5rem; }
    .footer-nav a { color: var(--primary-color); font-size: clamp(0.8rem, 2.8vw, 0.9rem); font-weight: 500; transition: color var(--transition-speed) ease-in-out, transform var(--transition-speed) ease-in-out; text-decoration: none; }
    .footer-nav a:hover { color: var(--primary-hover-color); transform: translateY(-1px); }
    .contact-form { display: flex; flex-direction: column; gap: 1rem; margin-top: 1.25rem; width: 100%; }
    .contact-form input, .contact-form textarea { background-color: var(--input-bg-light); border: 1px solid var(--light-border-color); color: var(--light-text-color); box-shadow: var(--box-shadow-sm); width: 100%; padding: 0.75rem 1rem; border-radius: var(--border-radius); -webkit-appearance: none; user-select: text; }
    .contact-form input:focus, .contact-form textarea:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm); }
    .contact-form button { background: linear-gradient(145deg, var(--primary-color), var(--primary-hover-color)); }
    .contact-form button:hover, .contact-form button:focus { background: linear-gradient(145deg, var(--primary-hover-color), var(--primary-color)); }
    .contact-form textarea { resize: vertical; min-height: 120px; }
    .back-btn { background: linear-gradient(145deg, var(--secondary-color), #5a6268); color: #FFFFFF; text-decoration: none; }
    .back-btn:hover, .back-btn:focus { background: linear-gradient(145deg, #5a6268, var(--secondary-color)); }
    :root[data-theme="dark"] body { background-color: var(--dark-bg); color: var(--dark-text-color); }
    :root[data-theme="dark"] .theme-toggle { background-color: var(--dark-card-bg); border: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .theme-toggle svg { fill: var(--dark-text-color); }
    :root[data-theme="dark"] .patriotic-text { color: var(--dark-text-color); }
    :root[data-theme="dark"] h1 { color: var(--dark-text-color); }
    :root[data-theme="dark"] .credit { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .credit a { color: var(--primary-color); }
    :root[data-theme="dark"] input { background-color: var(--input-bg-dark); border: 1px solid var(--dark-border-color); color: var(--dark-text-color); }
    :root[data-theme="dark"] input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm); }
    :root[data-theme="dark"] input::placeholder { color: var(--dark-text-secondary); opacity: 0.7; }
    :root[data-theme="dark"] .profile-card { background-color: var(--dark-card-bg); border: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .profile-card-header { background-color: var(--dark-bg); border-bottom: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .profile-photo-placeholder { background-color: var(--dark-bg); border-color: var(--dark-border-color); }
    :root[data-theme="dark"] .profile-photo-placeholder svg { fill: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-nickname { color: var(--dark-text-color); }
    :root[data-theme="dark"] .profile-username-display { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-info-row { border-bottom: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .info-label { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .info-value { color: var(--dark-text-color); }
    :root[data-theme="dark"] .bio-row .info-value.bio-text { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .profile-card-footer { background-color: var(--dark-bg); border-top: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .message.success-message { color: #d4edda; background-color: #1c3c24; border: 1px solid var(--success-color); }
    :root[data-theme="dark"] .message.error-message { color: #f8d7da; background-color: #491c21; border: 1px solid var(--danger-color); }
    :root[data-theme="dark"] .loading-spinner { border-top-color: var(--primary-color); border-left-color: var(--dark-border-color); border-right-color: var(--dark-border-color); border-bottom-color: var(--dark-border-color); }
    :root[data-theme="dark"] .about-section, :root[data-theme="dark"] .page-content > .about-section, :root[data-theme="dark"] .footer { background-color: var(--dark-card-bg); border: 1px solid var(--dark-border-color); }
    :root[data-theme="dark"] .page-content h1 { color: var(--primary-color); }
    :root[data-theme="dark"] .about-section h2 { color: var(--primary-color); }
    :root[data-theme="dark"] .about-section p { color: var(--dark-text-secondary); }
    :root[data-theme="dark"] .dm-link { color: var(--primary-color); }
    :root[data-theme="dark"] .footer-nav a { color: var(--primary-color); }
    :root[data-theme="dark"] .footer-nav a:hover { color: var(--primary-hover-color); }
    :root[data-theme="dark"] .contact-form input, :root[data-theme="dark"] .contact-form textarea { background-color: var(--input-bg-dark); border: 1px solid var(--dark-border-color); color: var(--dark-text-color); }
    :root[data-theme="dark"] .contact-form input:focus, :root[data-theme="dark"] .contact-form textarea:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25), var(--box-shadow-sm); }
    @keyframes spin { to { transform: rotate(360deg); } }
    @media (max-width: 768px) { html { font-size: 15px; } .container { padding: 0 0.75rem; } }
    @media (max-width: 480px) { html { font-size: 14px; } body { padding: 0.5rem; } .container { padding: 0 0.5rem; } .theme-toggle { top: 0.5rem; right: 0.5rem; width: 40px; height: 40px; } .theme-toggle svg { width: 20px; height: 20px; } input, button, textarea { padding: 0.65rem 0.85rem; } .profile-card-header { padding: 1rem; } .profile-photo-enhanced, .profile-photo-placeholder { margin-right: 1rem; width: 60px; height: 60px; } .profile-photo-placeholder svg { width: 30px; height: 30px; } .profile-identity { align-items: flex-start; } .footer-nav { flex-direction: column; gap: 0.75rem; } }
    @media screen and (max-width: 767px) { input, select, textarea { font-size: 1rem; } }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
    /* Custom alert message box (used by script.js for contact form) */
    .custom-alert-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; transition: opacity 0.3s ease-in-out; } /* Initially display:none */
    .custom-alert-overlay.active { display: flex; opacity: 1; }
    .custom-alert-box { background-color: var(--light-card-bg); color: var(--light-text-color); padding: 2rem; border-radius: var(--border-radius); box-shadow: var(--box-shadow-lg); text-align: center; max-width: 90%; width: 400px; }
    :root[data-theme="dark"] .custom-alert-box { background-color: var(--dark-card-bg); color: var(--dark-text-color); }
    .custom-alert-box p { margin-bottom: 1.5rem; font-size: 1.1rem; }
    .custom-alert-box button { background: var(--primary-color); color: white; padding: 0.6rem 1.2rem; border: none; border-radius: var(--border-radius); cursor: pointer; }
    .custom-alert-box button:hover { background: var(--primary-hover-color); }
  </style>
</head>
<body>
  <!-- Error message div, initially hidden -->
  <div id="script-error-message" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:var(--light-bg); color:var(--light-text-color); z-index:9999; display:flex; flex-direction:column; justify-content:center; align-items:center; font-family: var(--font-family-sans-serif); text-align:center; padding: 20px;">
    <div style="border: 2px solid var(--danger-color); padding: 30px 40px; background-color: var(--light-card-bg); border-radius: var(--border-radius); box-shadow: var(--box-shadow-lg);">
        <h1 style="color:var(--danger-color); margin-bottom:15px; font-size:1.8em;">Critical Error</h1>
        <p style="font-size:1.1em; margin-bottom:20px;">This page requires JavaScript to function correctly.</p>
        <p>Please ensure JavaScript is enabled in your browser and try reloading the page.</p>
        <p style="margin-top:15px; font-size:0.9em;">If the problem persists, the necessary script files might be missing or blocked by your network/browser extensions.</p>
    </div>
  </div>

  <!-- Main application wrapper, initially hidden. script.js will show this. -->
  <div id="app-wrapper" style="display:none; width:100%; display:flex; flex-direction:column; align-items:center;">
    <div class="container">
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <!-- Icon will be loaded by script.js -->
        </svg>
      </button>

      <main>
          <!-- Main Page Content (Initially Active) -->
          <div class="page-content active" id="main-page">
            <div class="patriotic-text">❌🚬 | 🏋‍♀️✅</div>
            <h1>TikTok Account Location Finder</h1>
            <div class="credit">Created by <a href="https://www.tiktok.com/@mo.or__" target="_blank" rel="noopener">@_moro.__</a></div>
            <section aria-labelledby="search-tool-heading">
              <h2 id="search-tool-heading" class="sr-only">TikTok Profile Search Tool</h2>
              <input type="text" id="username" placeholder="Enter TikTok username (without @)" required aria-label="TikTok Username Input">
              <button id="getResultsBtn" aria-label="Search TikTok profile">Get Profile Details</button>
              <button id="supportBtn" aria-label="Support the creator">Support Our Work ❤</button>
            </section>
            <div id="result" aria-live="polite"></div>
            <article class="about-section" aria-labelledby="about-tool-heading">
              <h2 id="about-tool-heading">About This TikTok Location Finder Tool</h2>
              <p>This <strong>TikTok Location Finder</strong> is a free tool designed to help you retrieve complete public TikTok user profiles...</p>
              <p><strong>Key Features:</strong> Comprehensive <strong>TikTok profile lookup</strong>...</p>
            </article>
            <article class="about-section" aria-labelledby="faq-heading">
              <h2 id="faq-heading">Frequently Asked Questions (FAQ)</h2>
              <p><strong>How does the TikTok Location Finder work?</strong>...</p>
              <p><strong>Is this TikTok tool free to use?</strong>...</p>
              <p><strong>How accurate is the TikTok username location and other data?</strong>...</p>
            </article>
            <article class="about-section" aria-labelledby="about-creator-heading">
              <h2 id="about-creator-heading">About the Creator</h2>
              <p>I'm Moor, a Graphic Designer & Web Developer...</p>
              <p>Reach out on <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">TikTok</a> or support my work!</p>
            </article>
            <article class="about-section" aria-labelledby="get-involved-heading">
              <h2 id="get-involved-heading">Get Involved</h2>
              <p>Enjoy this tool? Share it or support its development...</p>
              <p><a href="https://ko-fi.com/moroccan" class="dm-link" target="_blank" rel="noopener">Support on Ko-fi</a> | <a href="https://www.tiktok.com/@mo.or__" class="dm-link" target="_blank" rel="noopener">Follow on TikTok</a></p>
            </article>
            <article class="about-section" aria-labelledby="disclaimer-heading">
              <h2 id="disclaimer-heading">Disclaimer</h2>
              <p>For educational use only. Respect user privacy...</p>
            </article>
          </div>

          <!-- Contact Page Content -->
          <section class="page-content" id="contact-page" aria-labelledby="contact-page-heading">
            <h1 id="contact-page-heading">Contact Us</h1>
            <article class="about-section">
              <p>Have questions or feedback? Reach out...</p>
              <form class="contact-form" id="contactForm" aria-labelledby="contact-page-heading">
                <input type="text" id="contact-name" placeholder="Your Name" required aria-label="Your Name">
                <input type="email" id="contact-email" placeholder="Your Email" required aria-label="Your Email">
                <textarea id="contact-message" placeholder="Your Message" required aria-label="Your Message"></textarea>
                <button type="submit" id="contact-submit">Send Message</button>
              </form>
              <div id="form-feedback" style="margin-top: 1rem;" role="status" aria-live="polite"></div>
            </article>
            <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
          </section>

          <!-- About Page Content -->
          <section class="page-content" id="about-page" aria-labelledby="about-us-page-heading">
            <h1 id="about-us-page-heading">About Us</h1>
            <article class="about-section">
              <p>Welcome to the TikTok Account Location Finder...</p>
            </article>
            <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
          </section>

          <!-- Privacy Policy Page Content -->
          <section class="page-content" id="privacy-page" aria-labelledby="privacy-policy-page-heading">
            <h1 id="privacy-policy-page-heading">Privacy Policy</h1>
            <article class="about-section">
              <h2>1. Introduction</h2><p>We value your privacy...</p>
              <h2>2. Information We Collect</h2><p>We do not collect personal information...</p>
              <h2>3. How We Use Your Information</h2><p>Any information provided through the contact form...</p>
              <h2>4. Data Sharing</h2><p>We do not sell, trade, or share...</p>
              <h2>5. Cookies and Tracking</h2><p>This site uses local storage...</p>
              <h2>6. Contact Us</h2><p>If you have any questions about this Privacy Policy...</p>
            </article>
            <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
          </section>

          <!-- Terms of Service Page Content -->
          <section class="page-content" id="terms-page" aria-labelledby="terms-of-service-page-heading">
            <h1 id="terms-of-service-page-heading">Terms of Service</h1>
            <article class="about-section">
              <h2>1. Acceptance of Terms</h2><p>By using the TikTok Account Location Finder...</p>
              <h2>2. Use of the Tool</h2><p>This tool is for educational and research purposes only...</p>
              <h2>3. Data Accuracy</h2><p>The tool fetches publicly available TikTok data...</p>
              <h2>4. Intellectual Property</h2><p>All content, design, and code on this site...</p>
              <h2>5. Limitation of Liability</h2><p>We are not liable for any damages...</p>
              <h2>6. Changes to Terms</h2><p>We may update these Terms of Service...</p>
              <h2>7. Contact Us</h2><p>If you have any questions about these Terms...</p>
            </article>
            <button class="back-btn" onclick="showPage('main-page')">Back to Home</button>
          </section>
      </main>

      <footer class="footer">
        <nav class="footer-nav" aria-label="Footer navigation">
          <a href="#" onclick="showPage('main-page'); return false;">Home</a>
          <a href="#" onclick="showPage('about-page'); return false;">About Us</a>
          <a href="#" onclick="showPage('contact-page'); return false;">Contact Us</a>
          <a href="#" onclick="showPage('privacy-page'); return false;">Privacy Policy</a>
          <a href="#" onclick="showPage('terms-page'); return false;">Terms of Service</a>
        </nav>
      </footer>
    </div> <!-- End of .container -->

    <!-- Custom Alert Structure (used by script.js) -->
    <div class="custom-alert-overlay" id="customAlertOverlay">
      <div class="custom-alert-box">
          <p id="customAlertMessage"></p>
          <button id="customAlertClose">OK</button>
      </div>
    </div>
  </div> <!-- End of #app-wrapper -->

  <script src="script_spa.js" defer onerror="handleScriptLoadError()"></script>
  <script>
    function handleScriptLoadError() {
      var appWrapper = document.getElementById('app-wrapper');
      if (appWrapper) { appWrapper.style.display = 'none'; }
      var errorMessageDiv = document.getElementById('script-error-message');
      if (errorMessageDiv) { errorMessageDiv.style.display = 'flex'; }
      const errorBody = document.getElementById('script-error-message');
      const errorBox = errorBody.querySelector('div');
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          errorBody.style.backgroundColor = 'var(--dark-bg, #1A1A1A)';
          errorBody.style.color = 'var(--dark-text-color, #EAEAEA)';
          if(errorBox) errorBox.style.backgroundColor = 'var(--dark-card-bg, #242424)';
          if(errorBox) errorBox.style.borderColor = 'var(--danger-color, #dc3545)';
          errorBody.querySelector('h1').style.color = 'var(--danger-color, #dc3545)';
      } else {
          errorBody.style.backgroundColor = 'var(--light-bg, #F8F9FA)';
          errorBody.style.color = 'var(--light-text-color, #212529)';
          if(errorBox) errorBox.style.backgroundColor = 'var(--light-card-bg, #FFFFFF)';
          if(errorBox) errorBox.style.borderColor = 'var(--danger-color, #dc3545)';
          errorBody.querySelector('h1').style.color = 'var(--danger-color, #dc3545)';
      }
    }
  </script>
</body>
</html>
```

And here's the new `script_spa.js` file:


```javascript
// script_spa.js

// Base title for the website (used by SPA navigation)
const baseTitle = "TikTok Account Location Finder | Full Profile Details & FAQ";

// ===== THEME TOGGLE FUNCTIONALITY ===== //
const themeToggle = document.getElementById('themeToggle');
const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

function initializeTheme() {
    const currentTheme = localStorage.getItem('theme') || (prefersDarkScheme.matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', currentTheme);
    updateThemeIcon(currentTheme);
}

if (themeToggle) {
    themeToggle.addEventListener('click', function() {
      let theme = document.documentElement.getAttribute('data-theme');
      theme = theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      updateThemeIcon(theme);
    });
}

function updateThemeIcon(theme) {
  if (!themeToggle) return;
  const icon = themeToggle.querySelector('svg');
  if (!icon) return;
  const moonIconPath = '<path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1-8.313-12.454z"/>';
  const sunIconPath = '<path d="M12 18a6 6 0 1 1 0-12 6 6 0 1 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 1 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/>';
  icon.innerHTML = theme === 'dark' ? moonIconPath : sunIconPath;
}

// ===== PAGE NAVIGATION + DYNAMIC TITLE UPDATE (for SPA) ===== //
function showPage(pageId) {
  document.querySelectorAll('.page-content').forEach(page => {
    page.classList.remove('active');
  });
  const targetPage = document.getElementById(pageId);
  if (targetPage) {
    targetPage.classList.add('active');
    const pageTitleElement = targetPage.querySelector('h1'); // In SPA, sections use h1 for titles
    if (pageTitleElement && pageId !== 'main-page') {
        document.title = pageTitleElement.textContent.trim() + " | TikTok Account Location Finder";
    } else {
        document.title = baseTitle;
    }
  } else {
    console.warn(`Page with ID "${pageId}" not found. Defaulting to main page.`);
    const mainPage = document.getElementById('main-page');
    if(mainPage) mainPage.classList.add('active');
    document.title = baseTitle;
  }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ===== CONTACT FORM SUBMISSION (for SPA contact section) ===== //
const contactSubmitButton = document.getElementById('contact-submit');
const contactForm = document.getElementById('contactForm'); // Ensure your form has this ID
const formFeedbackDiv = document.getElementById('form-feedback'); // Specific feedback div for contact form

if (contactForm && contactSubmitButton) {
    contactForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const nameInput = document.getElementById('contact-name');
      const emailInput = document.getElementById('contact-email');
      const messageInput = document.getElementById('contact-message');

      const name = nameInput ? nameInput.value.trim() : '';
      const email = emailInput ? emailInput.value.trim() : '';
      const message = messageInput ? messageInput.value.trim() : '';

      if (formFeedbackDiv) formFeedbackDiv.innerHTML = ''; // Clear previous messages

      if (name && email && message) {
        if (!email.includes('@') || !email.includes('.')) {
            if (formFeedbackDiv) formFeedbackDiv.innerHTML = '<div class="message error-message">Please enter a valid email address.</div>';
            else showAlert('Please enter a valid email address.');
            return;
        }
        console.log("Contact form submitted:", { name, email, message });
        if (formFeedbackDiv) formFeedbackDiv.innerHTML = '<div class="message success-message">Thank you for your message! We will get back to you soon. (Demo)</div>';
        else showAlert('Thank you for your message! We will get back to you soon. (Demo)');
        contactForm.reset();
      } else {
        if (formFeedbackDiv) formFeedbackDiv.innerHTML = '<div class="message error-message">Please fill in all fields.</div>';
        else showAlert('Please fill in all fields.');
      }
    });
}

// ===== COUNTRY FLAG MAPPING ===== //
function getCountryFlag(country) {
  const flagMap = {
    'AD': '🇦🇩', 'Andorra': '🇦🇩', 'AE': '🇦🇪', 'United Arab Emirates': '🇦🇪', 'AF': '🇦🇫', 'Afghanistan': '🇦🇫',
    'AG': '🇦🇬', 'Antigua and Barbuda': '🇦🇬', 'AI': '🇦🇮', 'Anguilla': '🇦🇮', 'AL': '🇦🇱', 'Albania': '🇦🇱',
    'AM': '🇦🇲', 'Armenia': '🇦🇲', 'AO': '🇦🇴', 'Angola': '🇦🇴', 'AQ': '🇦🇶', 'Antarctica': '🇦🇶',
    'AR': '🇦🇷', 'Argentina': '🇦🇷', 'AS': '🇦🇸', 'American Samoa': '🇦🇸', 'AT': '🇦🇹', 'Austria': '🇦🇹',
    'AU': '🇦🇺', 'Australia': '🇦🇺', 'AW': '🇦🇼', 'Aruba': '🇦🇼', 'AX': '🇦🇽', 'Åland Islands': '🇦🇽',
    'AZ': '🇦🇿', 'Azerbaijan': '🇦🇿', 'BA': '🇧🇦', 'Bosnia and Herzegovina': '🇧🇦', 'BB': '🇧🇧', 'Barbados': '🇧🇧',
    'BD': '🇧🇩', 'Bangladesh': '🇧🇩', 'BE': '🇧🇪', 'Belgium': '🇧🇪', 'BF': '🇧🇫', 'Burkina Faso': '🇧🇫',
    'BG': '🇧🇬', 'Bulgaria': '🇧�', 'BH': '🇧🇭', 'Bahrain': '🇧🇭', 'BI': '🇧🇮', 'Burundi': '🇧🇮',
    'BJ': '🇧🇯', 'Benin': '🇧🇯', 'BL': '🇧🇱', 'Saint Barthélemy': '🇧🇱', 'BM': '🇧🇲', 'Bermuda': '🇧🇲',
    'BN': '🇧🇳', 'Brunei Darussalam': '🇧🇳', 'BO': '🇧🇴', 'Bolivia': '🇧🇴', 'BQ': '🇧🇶', 'Bonaire, Sint Eustatius and Saba': '🇧🇶',
    'BR': '🇧🇷', 'Brazil': '🇧🇷', 'BS': '🇧🇸', 'Bahamas': '🇧🇸', 'BT': '🇧🇹', 'Bhutan': '🇧🇹',
    'BV': '🇧🇻', 'Bouvet Island': '🇧🇻', 'BW': '🇧🇼', 'Botswana': '🇧🇼', 'BY': '🇧🇾', 'Belarus': '🇧🇾',
    'BZ': '🇧🇿', 'Belize': '🇧🇿', 'CA': '🇨🇦', 'Canada': '🇨🇦', 'CC': '🇨🇨', 'Cocos (Keeling) Islands': '🇨🇨',
    'CD': '🇨🇩', 'Congo, Democratic Republic of the': '🇨🇩', 'CF': '🇨🇫', 'Central African Republic': '🇨🇫', 'CG': '🇨🇬', 'Congo, Republic of the': '🇨🇬',
    'CH': '🇨🇭', 'Switzerland': '🇨🇭', 'CI': '🇨🇮', "Côte D'Ivoire": '🇨🇮', 'CK': '🇨🇰', 'Cook Islands': '🇨🇰',
    'CL': '🇨🇱', 'Chile': '🇨🇱', 'CM': '🇨🇲', 'Cameroon': '🇨🇲', 'CN': '🇨🇳', 'China': '🇨🇳',
    'CO': '🇨🇴', 'Colombia': '🇨🇴', 'CR': '🇨🇷', 'Costa Rica': '🇨🇷', 'CU': '🇨🇺', 'Cuba': '🇨🇺',
    'CV': '🇨🇻', 'Cape Verde': '🇨🇻', 'CW': '🇨🇼', 'Curaçao': '🇨🇼', 'CX': '🇨🇽', 'Christmas Island': '🇨🇽',
    'CY': '🇨🇾', 'Cyprus': '🇨🇾', 'CZ': '🇨🇿', 'Czech Republic': '🇨🇿', 'DE': '🇩🇪', 'Germany': '🇩🇪',
    'DJ': '🇩🇯', 'Djibouti': '🇩🇯', 'DK': '🇩🇰', 'Denmark': '🇩🇰', 'DM': '🇩🇲', 'Dominica': '🇩🇲',
    'DO': '🇩🇴', 'Dominican Republic': '🇩🇴', 'DZ': '🇩🇿', 'Algeria': '🇩🇿', 'EC': '🇪🇨', 'Ecuador': '🇪🇨',
    'EE': '🇪🇪', 'Estonia': '🇪🇪', 'EG': '🇪🇬', 'Egypt': '🇪🇬', 'EH': '🇪🇭', 'Western Sahara': '🇪🇭',
    'ER': '🇪🇷', 'Eritrea': '🇪🇷', 'ES': '🇪🇸', 'Spain': '🇪🇸', 'ET': '🇪🇹', 'Ethiopia': '🇪🇹',
    'FI': '🇫🇮', 'Finland': '🇫🇮', 'FJ': '🇫🇯', 'Fiji': '🇫🇯', 'FK': '🇫🇰', 'Falkland Islands (Malvinas)': '🇫🇰',
    'FM': '🇫🇲', 'Micronesia, Federated States of': '🇫🇲', 'FO': '🇫🇴', 'Faroe Islands': '🇫🇴', 'FR': '🇫🇷', 'France': '🇫🇷',
    'GA': '🇬🇦', 'Gabon': '🇬🇦', 'GB': '🇬🇧', 'United Kingdom': '🇬🇧', 'UK': '🇬🇧', 'GD': '🇬🇩', 'Grenada': '🇬🇩',
    'GE': '🇬🇪', 'Georgia': '🇬🇪', 'GF': '🇬🇫', 'French Guiana': '🇬🇫', 'GG': '🇬🇬', 'Guernsey': '🇬🇬',
    'GH': '🇬🇭', 'Ghana': '🇬🇭', 'GI': '🇬🇮', 'Gibraltar': '🇬🇮', 'GL': '🇬🇱', 'Greenland': '🇬🇱',
    'GM': '🇬🇲', 'Gambia': '🇬🇲', 'GN': '🇬🇳', 'Guinea': '🇬🇳', 'GP': '🇬🇵', 'Guadeloupe': '🇬🇵',
    'GQ': '🇬🇶', 'Equatorial Guinea': '🇬🇶', 'GR': '🇬🇷', 'Greece': '🇬🇷', 'GS': '🇬🇸', 'South Georgia and the South Sandwich Islands': '🇬🇸',
    'GT': '🇬🇹', 'Guatemala': '🇬🇹', 'GU': '🇬🇺', 'Guam': '🇬🇺', 'GW': '🇬🇼', 'Guinea-Bissau': '🇬🇼',
    'GY': '🇬🇾', 'Guyana': '🇬🇾', 'HK': '🇭🇰', 'Hong Kong': '🇭🇰', 'HM': '🇭🇲', 'Heard Island and McDonald Islands': '🇭🇲',
    'HN': '🇭🇳', 'Honduras': '🇭🇳', 'HR': '🇭🇷', 'Croatia': '🇭🇷', 'HT': '🇭🇹', 'Haiti': '🇭🇹',
    'HU': '🇭🇺', 'Hungary': '🇭🇺', 'ID': '🇮🇩', 'Indonesia': '🇮🇩', 'IE': '🇮🇪', 'Ireland': '🇮🇪',
    'IL': '🇮🇱', 'Israel': '🇮🇱', 'IM': '🇮🇲', 'Isle of Man': '🇮🇲', 'IN': '🇮🇳', 'India': '🇮🇳',
    'IO': '🇮🇴', 'British Indian Ocean Territory': '🇮🇴', 'IQ': '🇮🇶', 'Iraq': '🇮🇶', 'IR': '🇮🇷', 'Iran, Islamic Republic of': '🇮🇷',
    'IS': '🇮🇸', 'Iceland': '🇮🇸', 'IT': '🇮🇹', 'Italy': '🇮🇹', 'JE': '🇯🇪', 'Jersey': '🇯🇪',
    'JM': '🇯🇲', 'Jamaica': '🇯🇲',
    'JO': '🇯🇴', 'Jordan': '🇯🇴', 'JP': '🇯🇵', 'Japan': '🇯🇵', 'KE': '🇰🇪', 'Kenya': '🇰🇪',
    'KG': '🇰🇬', 'Kyrgyzstan': '🇰🇬', 'KH': '🇰🇭', 'Cambodia': '🇰🇭', 'KI': '🇰🇮', 'Kiribati': '🇰🇮',
    'KM': '🇰🇲', 'Comoros': '🇰🇲', 'KN': '🇰🇳', 'Saint Kitts and Nevis': '🇰🇳', 'KP': '🇰🇵', "Korea, Democratic People's Republic of": '🇰🇵',
    'KR': '🇰🇷', 'Korea, Republic of': '🇰🇷',
    'KW': '🇰🇼', 'Kuwait': '🇰🇼', 'KY': '🇰🇾', 'Cayman Islands': '🇰🇾',
    'KZ': '🇰🇿', 'Kazakhstan': '🇰🇿', 'LA': '🇱🇦', "Lao People's Democratic Republic": '🇱🇦', 'LB': '🇱🇧', 'Lebanon': '🇱🇧',
    'LC': '🇱🇨', 'Saint Lucia': '🇱🇨', 'LI': '🇱🇮', 'Liechtenstein': '🇱🇮', 'LK': '🇱🇰', 'Sri Lanka': '🇱🇰',
    'LR': '🇱🇷', 'Liberia': '🇱🇷', 'LS': '🇱🇸', 'Lesotho': '🇱🇸', 'LT': '🇱🇹', 'Lithuania': '🇱🇹',
    'LU': '🇱🇺', 'Luxembourg': '🇱🇺', 'LV': '🇱🇻', 'Latvia': '🇱🇻', 'LY': '🇱🇾', 'Libya': '🇱🇾',
    'MA': '🇲🇦', 'Morocco': '🇲🇦', 'MC': '🇲🇨', 'Monaco': '🇲🇨', 'MD': '🇲🇩', 'Moldova, Republic of': '🇲🇩',
    'ME': '🇲🇪', 'Montenegro': '🇲🇪', 'MF': '🇲🇫', 'Saint Martin (French part)': '🇲🇫', 'MG': '🇲🇬', 'Madagascar': '🇲🇬',
    'MH': '🇲🇭', 'Marshall Islands': '🇲🇭', 'MK': '🇲🇰', 'North Macedonia': '🇲🇰', 'ML': '🇲🇱', 'Mali': '🇲🇱',
    'MM': '🇲🇲', 'Myanmar': '🇲🇲', 'MN': '🇲🇳', 'Mongolia': '🇲🇳', 'MO': '🇲🇴', 'Macao': '🇲🇴',
    'MP': '🇲🇵', 'Northern Mariana Islands': '🇲🇵', 'MQ': '🇲🇶', 'Martinique': '🇲🇶', 'MR': '🇲🇷', 'Mauritania': '🇲🇷',
    'MS': '🇲🇸', 'Montserrat': '🇲🇸', 'MT': '🇲🇹', 'Malta': '🇲🇹', 'MU': '🇲🇺', 'Mauritius': '🇲🇺',
    'MV': '🇲🇻', 'Maldives': '🇲🇻', 'MW': '🇲🇼', 'Malawi': '🇲🇼', 'MX': '🇲🇽', 'Mexico': '🇲🇽',
    'MY': '🇲🇾', 'Malaysia': '🇲🇾', 'MZ': '🇲🇿', 'Mozambique': '🇲🇿', 'NA': '🇳🇦', 'Namibia': '🇳🇦',
    'NC': '🇳🇨', 'New Caledonia': '🇳🇨', 'NE': '🇳🇪', 'Niger': '🇳🇪', 'NF': '🇳🇫', 'Norfolk Island': '🇳🇫',
    'NG': '🇳🇬', 'Nigeria': '🇳🇬', 'NI': '🇳🇮', 'Nicaragua': '🇳🇮', 'NL': '🇳🇱', 'Netherlands': '🇳🇱',
    'NO': '🇳🇴', 'Norway': '🇳🇴', 'NP': '🇳🇵', 'Nepal': '🇳🇵', 'NR': '🇳🇷', 'Nauru': '🇳🇷',
    'NU': '🇳🇺', 'Niue': '🇳🇺', 'NZ': '🇳🇿', 'New Zealand': '🇳🇿', 'OM': '🇴🇲', 'Oman': '🇴🇲',
    'PA': '🇵🇦', 'Panama': '🇵🇦', 'PE': '🇵🇪', 'Peru': '🇵🇪', 'PF': '🇵🇫', 'French Polynesia': '🇵🇫',
    'PG': '🇵🇬', 'Papua New Guinea': '🇵🇬', 'PH': '🇵🇭', 'Philippines': '🇵🇭', 'PK': '🇵🇰', 'Pakistan': '🇵🇰',
    'PL': '🇵🇱', 'Poland': '🇵🇱', 'PM': '🇵🇲', 'Saint Pierre and Miquelon': '🇵🇲', 'PN': '🇵🇳', 'Pitcairn': '🇵🇳',
    'PR': '🇵🇷', 'Puerto Rico': '🇵🇷', 'PS': '🇵🇸', 'Palestine, State of': '🇵🇸', 'PT': '🇵🇹', 'Portugal': '🇵🇹',
    'PW': '🇵🇼', 'Palau': '🇵🇼', 'PY': '🇵🇾', 'Paraguay': '🇵🇾', 'QA': '🇶🇦', 'Qatar': '🇶🇦',
    'RE': '🇷🇪', 'Réunion': '🇷🇪', 'RO': '🇷🇴', 'Romania': '🇷🇴', 'RS': '🇷🇸', 'Serbia': '🇷🇸',
    'RU': '🇷🇺', 'Russian Federation': '🇷🇺', 'Russia': '🇷🇺', 'RW': '🇷🇼', 'Rwanda': '🇷🇼', 'SA': '🇸🇦', 'Saudi Arabia': '🇸🇦',
    'SB': '🇸🇧', 'Solomon Islands': '🇸🇧', 'SC': '🇸🇨', 'Seychelles': '🇸🇨', 'SD': '🇸🇩', 'Sudan': '🇸🇩',
    'SE': '🇸🇪', 'Sweden': '🇸🇪', 'SG': '🇸🇬', 'Singapore': '🇸🇬', 'SH': '🇸🇭', 'Saint Helena, Ascension and Tristan da Cunha': '🇸🇭',
    'SI': '🇸🇮', 'Slovenia': '🇸🇮', 'SJ': '🇸🇯', 'Svalbard and Jan Mayen': '🇸🇯', 'SK': '🇸🇰', 'Slovakia': '🇸🇰',
    'SL': '🇸🇱', 'Sierra Leone': '🇸🇱', 'SM': '🇸🇲', 'San Marino': '🇸🇲', 'SN': '🇸🇳', 'Senegal': '🇸🇳',
    'SO': '🇸🇴', 'Somalia': '🇸🇴', 'SR': '🇸🇷', 'Suriname': '🇸🇷', 'SS': '🇸🇸', 'South Sudan': '🇸🇸',
    'ST': '🇸🇹', 'Sao Tome and Principe': '🇸🇹', 'SV': '🇸🇻', 'El Salvador': '🇸🇻', 'SX': '🇸🇽', 'Sint Maarten (Dutch part)': '🇸🇽',
    'SY': '🇸🇾', 'Syrian Arab Republic': '🇸🇾', 'SZ': '🇸🇿', 'Eswatini': '🇸🇿', 'TC': '🇹🇨', 'Turks and Caicos Islands': '🇹🇨',
    'TD': '🇹🇩', 'Chad': '🇹🇩', 'TF': '🇹🇫', 'French Southern Territories': '🇹🇫', 'TG': '🇹🇬', 'Togo': '🇹🇬',
    'TH': '🇹🇭', 'Thailand': '🇹🇭', 'TJ': '🇹🇯', 'Tajikistan': '🇹🇯', 'TK': '🇹🇰', 'Tokelau': '🇹🇰',
    'TL': '🇹🇱', 'Timor-Leste': '🇹🇱', 'TM': '🇹🇲', 'Turkmenistan': '🇹🇲', 'TN': '🇹🇳', 'Tunisia': '🇹🇳',
    'TO': '🇹🇴', 'Tonga': '🇹🇴', 'TR': '🇹🇷', 'Turkey': '🇹🇷', 'TT': '🇹🇹', 'Trinidad and Tobago': '🇹🇹',
    'TV': '🇹🇻', 'Tuvalu': '🇹🇻', 'TW': '🇹🇼', 'Taiwan, Province of China': '🇹🇼', 'TZ': '🇹🇿', 'Tanzania, United Republic of': '🇹🇿',
    'UA': '🇺🇦', 'Ukraine': '🇺🇦', 'UG': '🇺🇬', 'Uganda': '🇺🇬', 'UM': '🇺🇲', 'United States Minor Outlying Islands': '🇺🇲',
    'US': '🇺🇸', 'United States of America': '🇺🇸', 'USA': '🇺🇸', 'UY': '🇺🇾', 'Uruguay': '🇺🇾', 'UZ': '🇺🇿', 'Uzbekistan': '🇺🇿',
    'VA': '🇻🇦', 'Holy See (Vatican City State)': '🇻🇦', 'VC': '🇻🇨', 'Saint Vincent and the Grenadines': '🇻🇨', 'VE': '🇻🇪', 'Venezuela, Bolivarian Republic of': '🇻🇪',
    'VG': '🇻🇬', 'Virgin Islands, British': '🇻🇬', 'VI': '🇻🇮', 'Virgin Islands, U.S.': '🇻🇮', 'VN': '🇻🇳', 'Viet Nam': '🇻🇳',
    'VU': '🇻🇺', 'Vanuatu': '🇻🇺', 'WF': '🇼🇫', 'Wallis and Futuna': '🇼🇫', 'WS': '🇼🇸', 'Samoa': '🇼🇸',
    'XK': '🇽🇰', 'Kosovo': '🇽🇰', 'YE': '🇾🇪', 'Yemen': '🇾🇪', 'YT': '🇾🇹', 'Mayotte': '🇾🇹',
    'ZA': '🇿🇦', 'South Africa': '🇿🇦', 'ZM': '🇿🇲', 'Zambia': '🇿🇲', 'ZW': '🇿🇼', 'Zimbabwe': '🇿🇼'
  };
  if (!country) return '🌐';
  const normalizedCountry = String(country).trim();
  for (const key in flagMap) {
    if (key.toLowerCase() === normalizedCountry.toLowerCase()) return flagMap[key];
  }
  for (const key in flagMap) {
    if (key.length > 3 && normalizedCountry.toLowerCase().includes(key.toLowerCase())) return flagMap[key];
  }
  return '🌐';
}

// ===== TIKTOK USER LOOKUP FUNCTIONALITY ===== //
const getResultsBtn = document.getElementById('getResultsBtn');
const supportBtn = document.getElementById('supportBtn');
const usernameInput = document.getElementById('username'); // Defined once for this scope
const resultDiv = document.getElementById('result'); // Defined once for this scope

if (getResultsBtn) getResultsBtn.addEventListener('click', lookupUser);
if (supportBtn) supportBtn.addEventListener('click', () => window.open('https://ko-fi.com/moroccan', '_blank'));

function lookupUser() {
  if (!usernameInput || !resultDiv || !getResultsBtn) {
    console.warn("LookupUser called but essential elements are missing.");
    return;
  }
  const username = usernameInput.value.trim();

  if (!username) {
    resultDiv.innerHTML = '<div class="message error-message">Please enter a valid TikTok username.</div>';
    resultDiv.style.display = 'block';
    return;
  }

  getResultsBtn.disabled = true;
  resultDiv.innerHTML = '<div class="loading-spinner-container"><div class="loading-spinner"></div> Loading profile data...</div>';
  resultDiv.style.display = 'block';

  // !!! IMPORTANT: API Call Change for Backend Proxy !!!
  // This URL should point to an endpoint ON YOUR SERVER that you create.
  // Your server-side script will then make the actual call to the third-party API.
  const yourBackendProxyUrl = `/api/tiktok-profile?username=${encodeURIComponent(username)}`;
  // Example for a full domain if needed:
  // const yourBackendProxyUrl = `https://tikip.us/api/tiktok-profile?username=${encodeURIComponent(username)}`;

  console.log("Attempting to fetch data via YOUR backend proxy from:", yourBackendProxyUrl);

  fetch(yourBackendProxyUrl)
    .then(response => {
      console.log("Received response status from your proxy:", response.status);
      if (!response.ok) {
        return response.text().then(text => {
            let errorMsg = `Request to your server failed (status ${response.status}).`;
            try { const errData = JSON.parse(text); errorMsg = errData.message || errData.error || text || errorMsg; }
            catch (e) { errorMsg = text || errorMsg; }
            console.error("Your Proxy API Error:", errorMsg, "Raw text:", text);
            throw new Error(errorMsg);
        });
      }
      return response.json();
    })
    .then(data => {
      console.log("Data from your proxy:", JSON.stringify(data, null, 2));
      const apiProfile = data.profile || data; // Adjust based on your proxy's response structure

      if (apiProfile && typeof apiProfile === 'object' && Object.keys(apiProfile).length > 0) {
        const sanitize = (str) => {
            if (typeof str !== 'string') return str === null || typeof str === 'undefined' ? '' : String(str);
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        };

        let foundProfilePhotoUrl = '';
        const avatarKeys = ['Profile Photo', 'Avatar URL', 'avatar_url', 'avatarUrl', 'picture', 'profileImageUrl', 'profile_pic_url', 'profile_image_url', 'avatar', 'Avatar', 'profile_picture', 'photo_url', 'user_avatar'];
        for (const key of avatarKeys) {
            if (apiProfile[key] && typeof apiProfile[key] === 'string' && apiProfile[key].trim() !== '') {
                foundProfilePhotoUrl = apiProfile[key];
                break;
            }
        }
        const profilePhoto = foundProfilePhotoUrl ? sanitize(foundProfilePhotoUrl) : '';

        let rawUsernameFromAPI = apiProfile.Username || apiProfile.username || apiProfile.user_name || apiProfile.unique_id || username;
        if (typeof rawUsernameFromAPI === 'string' && rawUsernameFromAPI.startsWith('@')) {
            rawUsernameFromAPI = rawUsernameFromAPI.substring(1);
        }
        const displayUsername = sanitize(rawUsernameFromAPI);
        const displayNickname = apiProfile.Nickname || apiProfile.nickname || apiProfile.name || apiProfile.display_name || apiProfile.user_display_name || displayUsername;

        let profileDetailsHtml = '';
        for (const key in apiProfile) {
            if (Object.hasOwnProperty.call(apiProfile, key)) {
                if (['Nickname', 'nickname', 'Username', 'username', 'name', 'display_name', 'user_name', 'unique_id', 'user_display_name', ...avatarKeys].includes(key) ||
                    apiProfile[key] == null || String(apiProfile[key]).trim() === '') {
                    continue;
                }
                let displayKey = key.replace(/([A-Z])/g, ' $1').replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()).trim();
                if (displayKey.toLowerCase() === 'sec u i d' || displayKey.toLowerCase() === 'username last modified') {
                    continue;
                }
                let value = apiProfile[key];
                if (['Bio', 'bio', 'description', 'Signature', 'bio_text', 'user_bio'].includes(key)) {
                    value = sanitize(String(value)).replace(/\n/g, '<br>');
                    profileDetailsHtml += `<div class="profile-info-row bio-row"><span class="info-label">${sanitize(displayKey)}:</span><p class="info-value bio-text">${value || 'N/A'}</p></div>`;
                } else if (['Country', 'country', 'region', 'Location', 'country_code', 'user_region'].includes(key)) {
                    value = sanitize(String(value));
                    profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${getCountryFlag(value)} ${value || 'N/A'}</span></div>`;
                } else if (typeof value === 'number' && (key.toLowerCase().includes('follower') || key.toLowerCase().includes('following') || key.toLowerCase().includes('like') || key.toLowerCase().includes('video') || key.toLowerCase().includes('count') || key.toLowerCase().includes('digg'))) {
                    value = Number(value).toLocaleString();
                    profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${value}</span></div>`;
                } else if (typeof value === 'boolean') {
                    value = value ? 'Yes' : 'No';
                    profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${value}</span></div>`;
                } else if (typeof value === 'string' && (value.startsWith('http://') || value.startsWith('https://'))) {
                    profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value"><a href="${sanitize(value)}" target="_blank" rel="noopener noreferrer" class="dm-link">${sanitize(value)}</a></span></div>`;
                } else {
                    profileDetailsHtml += `<div class="profile-info-row"><span class="info-label">${sanitize(displayKey)}:</span><span class="info-value">${sanitize(String(value)) || 'N/A'}</span></div>`;
                }
            }
        }

        if (profileDetailsHtml.trim() === '') {
             resultDiv.innerHTML = `<div class="message error-message">No displayable profile data found for '${sanitize(username)}'.</div>`;
        } else {
            let formattedData = `
              <article class="profile-card" aria-labelledby="profile-card-heading-${displayUsername}">
                <h2 id="profile-card-heading-${displayUsername}" class="sr-only">Profile details for ${sanitize(displayNickname)}</h2>
                <div class="profile-card-header">
                  ${profilePhoto ? `<img src="${profilePhoto}" alt="Profile photo of ${sanitize(displayNickname)}" class="profile-photo-enhanced" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                  <div class="profile-photo-placeholder" style="${profilePhoto ? 'display:none;' : 'display:flex;'}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                  </div>
                  <div class="profile-identity">
                    <h3 class="profile-nickname">${sanitize(displayNickname)}</h3>
                    <p class="profile-username-display">${sanitize(displayUsername).startsWith('@') ? sanitize(displayUsername) : '@' + sanitize(displayUsername)}</p>
                  </div>
                </div>
                <div class="profile-card-body">${profileDetailsHtml}</div>
                <div class="profile-card-footer"><span class="message success-message">Profile data retrieved successfully!</span></div>
              </article>`;
            resultDiv.innerHTML = formattedData;
        }
      } else {
        console.warn("Profile data from your proxy is missing or in unexpected format.", "Received data:", data);
        resultDiv.innerHTML = `<div class="message error-message">Profile data not found or is incomplete for '${sanitize(username)}'.</div>`;
      }
    })
    .catch(error => {
      console.error("Fetch or processing error (your proxy or API):", error);
      resultDiv.innerHTML = `<div class="message error-message">Error: ${error.message || 'Failed to fetch profile data'}. Please try again.</div>`;
    })
    .finally(() => {
      if (getResultsBtn) getResultsBtn.disabled = false;
    });
}

if (usernameInput) {
  usernameInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      if (typeof lookupUser === 'function') {
          lookupUser();
      }
    }
  });
}

// ===== CUSTOM ALERT FUNCTIONALITY ===== //
const customAlertOverlay = document.getElementById('customAlertOverlay');
const customAlertMessageEl = document.getElementById('customAlertMessage');
const customAlertCloseBtn = document.getElementById('customAlertClose');

function showAlert(message) {
    if (customAlertMessageEl && customAlertOverlay) {
        customAlertMessageEl.textContent = message;
        customAlertOverlay.classList.add('active');
    } else {
        console.warn("Custom alert elements not found. Alert message:", message);
        // Fallback for critical alerts if custom modal isn't available
        // window.alert(message); // Generally avoid, but could be a last resort
    }
}

if (customAlertCloseBtn && customAlertOverlay) {
    customAlertCloseBtn.addEventListener('click', () => {
        customAlertOverlay.classList.remove('active');
    });
    customAlertOverlay.addEventListener('click', (event) => {
        if (event.target === customAlertOverlay) { // Click on overlay itself
            customAlertOverlay.classList.remove('active');
        }
    });
}


// ===== INITIALIZATION ON DOM CONTENT LOADED ===== //
document.addEventListener('DOMContentLoaded', function() {
    // Show the main application content wrapper
    const appWrapper = document.getElementById('app-wrapper');
    if (appWrapper) {
        appWrapper.style.display = 'flex'; // Or 'block' if that's your main wrapper's default
    }

    // Ensure the script error message is hidden if the script loads successfully
    const scriptErrorMsg = document.getElementById('script-error-message');
    if (scriptErrorMsg) {
        scriptErrorMsg.style.display = 'none';
    }

    // Initialize theme (globally applicable)
    if (typeof initializeTheme === 'function') {
        initializeTheme();
    }

    // Initialize SPA navigation to show the main page by default
    if (typeof showPage === 'function') {
        showPage('main-page');
    }
});
```

**Explanation of Changes:**

**In `index_html_spa_updated.html`:**
1.  **Removed Inline Script:** The large `<script>...</script>` block that was previously at the end of your `<body>` has been removed.
2.  **Script Error Handling Div:**
    * Added `<div id="script-error-message" style="display:none; ...">...</div>` at the beginning of `<body>`. This will be shown if `script_spa.js` fails to load.
3.  **App Wrapper Div:**
    * Your main content (which was inside `<div class="container">`) is now wrapped by `<div id="app-wrapper" style="display:none; width:100%; display:flex; flex-direction:column; align-items:center;">`. This wrapper is initially hidden.
4.  **External Script Link:**
    * It now links to the new external script: `<script src="script_spa.js" defer onerror="handleScriptLoadError()"></script>`. The `defer` attribute ensures it executes after the HTML is parsed. The `onerror` attribute calls `handleScriptLoadError()` if `script_spa.js` can't be loaded.
5.  **`handleScriptLoadError()` Function:**
    * An inline script at the end of `<body>` defines this function. It hides `#app-wrapper` and shows `#script-error-message`. It also attempts to apply basic theme styles to the error message.
6.  **Custom Alert HTML:**
    * The HTML structure for the custom alert (`<div class="custom-alert-overlay" id="customAlertOverlay">...</div>`) is included, as `script_spa.js` uses it.
7.  **Contact Form Feedback Div:**
    * The contact form section in your HTML (`id="contact-page"`) now includes `<div id="form-feedback" style="margin-top: 1rem;" role="status" aria-live="polite"></div>`. The `script_spa.js` will use this to display messages for the contact form instead of the general `showAlert` or `#result` div.

**In `script_spa.js`:**
1.  **All JavaScript Logic:** Contains all the JavaScript functionality from your original inline script (theme, SPA navigation, contact form, country flags, TikTok lookup).
2.  **Backend Proxy for API Call:**
    * In the `lookupUser` function, the `fetch` call now targets:
        ```javascript
        const yourBackendProxyUrl = `/api/tiktok-profile?username=${encodeURIComponent(username)}`;
        fetch(yourBackendProxyUrl)
        ```
    * **You need to create this `/api/tiktok-profile` endpoint on your server.** This server-side script will receive the username, make the actual call to `https://faas-sgp1-18bc02ac.doserverless.co/...`, and return the JSON response.
3.  **DOM Content Loaded Logic:**
    * An event listener for `DOMContentLoaded` is added at the end. When the HTML is fully loaded and parsed, this will:
        * Make the `#app-wrapper` visible (`appWrapper.style.display = 'flex';`).
        * Ensure `#script-error-message` is hidden.
        * Initialize the theme.
        * Call `showPage('main-page')` to display the initial content for your SPA.
4.  **Contact Form Feedback Update:**
    * The contact form submission logic now targets `#form-feedback` for its messages. If `#form-feedback` isn't found, it falls back to `showAlert`.
5.  **Custom Alert (`showAlert` function):**
    * The `showAlert` function is included to display modal-like alerts, used by the contact form.

**To Make This Work on Your Hosting:**

1.  **Upload `index_html_spa_updated.html`** to your server (rename it to `index.html`).
2.  **Upload `script_spa.js`** to the *same directory* as your `index.html` (rename it to `script.js` on the server if your HTML links to `script.js`, or update the link in HTML to `script_spa.js`).
3.  **Implement the Backend Proxy:** Create a server-side script (e.g., in PHP, Node.js, Python) at the path `/api/tiktok-profile` on your server. This script must:
    * Accept a `username` query parameter.
    * Make a request to the actual TikTok API: `https://faas-sgp1-18bc02ac.doserverless.co/api/v1/web/fn-67a396e1-78e9-4dff-8f6a-0f07c2d80c56/default/sm-t/?username=ENCODED_USERNAME_HERE`.
    * Return the JSON response from that API.
4.  **Ensure Correct File Paths:** Double-check that the `<script src="script_spa.js">` path in your HTML correctly points to where you've uploaded the JavaScript file on your server.

This setup achieves your goals: the API link is not in the HTML, the core logic is in `script_spa.js`, and the site provides feedback if `script_spa.js` fails to load. The most complex part for you will be setting up the backend pro
